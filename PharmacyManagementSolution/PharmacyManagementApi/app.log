INFO  09:21:17 Now listening on: http://localhost:5033
INFO  09:21:17 Application started. Press Ctrl+C to shut down.
INFO  09:21:17 Hosting environment: Development
INFO  09:21:17 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
WARN  09:21:33 Failed to determine the https port for redirect.
INFO  09:21:33 Fetching all pending orders.
INFO  09:21:34 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  09:21:35 Executed DbCommand (64ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [o].[OrderDetailId], [o].[Cost], [o].[DeliveryStatus], [o].[MedicineId], [o].[OrderId], [o].[Quantity], [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice]
FROM [OrderDetails] AS [o]
INNER JOIN [Medicines] AS [m] ON [o].[MedicineId] = [m].[MedicineId]
INFO  09:21:35 Fetched 2 pending orders.
INFO  10:00:29 Now listening on: http://localhost:5033
INFO  10:00:29 Application started. Press Ctrl+C to shut down.
INFO  10:00:29 Hosting environment: Development
INFO  10:00:29 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
WARN  10:00:37 Failed to determine the https port for redirect.
INFO  10:00:39 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:00:40 Executed DbCommand (116ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [u].[Email], [u].[AccountStatus], [u].[BankBalance], [u].[HasedPassword], [u].[Password], [u].[UserId]
FROM [UserCredentials] AS [u]
WHERE [u].[Email] = @__key_0
ERROR 10:00:41 An error occurred while logging in.
PharmacyManagementApi.CustomException.NoUserCredentialFoundException: No user found with given id Sentha@1123
   at PharmacyManagementApi.Repositories.General_Repositories.UserCredentialRepository.Get(String key) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Repositories\General_Repositories\UserCredentialRepository.cs:line 59
   at PharmacyManagementApi.Services.AuthService.Login(LoginDTO loginDTO) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\AuthService.cs:line 48
INFO  11:05:51 Now listening on: http://localhost:5033
INFO  11:05:51 Application started. Press Ctrl+C to shut down.
INFO  11:05:51 Hosting environment: Development
INFO  11:05:51 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
INFO  09:57:44 Now listening on: http://localhost:5033
INFO  09:57:44 Application started. Press Ctrl+C to shut down.
INFO  09:57:44 Hosting environment: Development
INFO  09:57:44 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
WARN  09:57:47 Failed to determine the https port for redirect.
INFO  09:57:51 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  09:57:52 Executed DbCommand (110ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [u].[Email], [u].[AccountStatus], [u].[BankBalance], [u].[HasedPassword], [u].[Password], [u].[UserId]
FROM [UserCredentials] AS [u]
WHERE [u].[Email] = @__key_0
ERROR 09:57:53 An error occurred while logging in.
PharmacyManagementApi.CustomException.NoUserCredentialFoundException: No user found with given id Sentha@1123
   at PharmacyManagementApi.Repositories.General_Repositories.UserCredentialRepository.Get(String key) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Repositories\General_Repositories\UserCredentialRepository.cs:line 59
   at PharmacyManagementApi.Services.AuthService.Login(LoginDTO loginDTO) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\AuthService.cs:line 48
INFO  09:59:06 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  09:59:06 Executed DbCommand (8ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [u].[Email], [u].[AccountStatus], [u].[BankBalance], [u].[HasedPassword], [u].[Password], [u].[UserId]
FROM [UserCredentials] AS [u]
WHERE [u].[Email] = @__key_0
INFO  09:59:07 Executed DbCommand (4ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
FROM [Customers] AS [c]
WHERE [c].[CustomerId] = @__key_0
INFO  09:59:07 Generating token for customer 2
INFO  09:59:07 Token generated successfully for customer 2
INFO  10:00:43 Fetching all product details
INFO  10:00:43 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:00:43 Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [s].[StockId], [s].[ExpiryDate], [s].[MedicineId], [s].[PurchaseDetailId], [s].[Quantity], [s].[SellingPrice], [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [c].[CategoryId], [c].[CategoryName]
FROM [Stocks] AS [s]
INNER JOIN [Medicines] AS [m] ON [s].[MedicineId] = [m].[MedicineId]
INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
INFO  10:00:43 Product details fetched successfully
INFO  10:06:48 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:07:00 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:07:01 Executed DbCommand (299ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [PharmacyManager];
INFO  10:07:01 Executed DbCommand (98ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [PharmacyManager] SET READ_COMMITTED_SNAPSHOT ON;
END;
INFO  10:07:01 Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
INFO  10:07:01 Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
INFO  10:07:01 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
INFO  10:07:01 Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
INFO  10:07:01 Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
INFO  10:07:01 Applying migration '20240530043648_init'.
INFO  10:07:02 Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Categories] (
    [CategoryId] int NOT NULL IDENTITY,
    [CategoryName] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Categories] PRIMARY KEY ([CategoryId])
);
INFO  10:07:02 Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Customers] (
    [CustomerId] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Email] nvarchar(450) NOT NULL,
    [Phone] nvarchar(max) NOT NULL,
    [Address] nvarchar(max) NOT NULL,
    [Role] nvarchar(max) NOT NULL,
    [IsSubcribed] bit NOT NULL,
    CONSTRAINT [PK_Customers] PRIMARY KEY ([CustomerId])
);
INFO  10:07:02 Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Purchases] (
    [PurchaseId] int NOT NULL IDENTITY,
    [PurchaseDate] datetime2 NOT NULL,
    [TotalAmount] float NULL,
    CONSTRAINT [PK_Purchases] PRIMARY KEY ([PurchaseId])
);
INFO  10:07:02 Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Vendors] (
    [VendorId] int NOT NULL IDENTITY,
    [VendorName] nvarchar(max) NOT NULL,
    [Address] nvarchar(max) NOT NULL,
    [Phone] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Vendors] PRIMARY KEY ([VendorId])
);
INFO  10:07:02 Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Medicines] (
    [MedicineId] int NOT NULL IDENTITY,
    [MedicineName] nvarchar(max) NOT NULL,
    [CategoryId] int NOT NULL,
    [CurrentQuantity] int NOT NULL,
    [FeedbackSum] float NOT NULL,
    [FeedbackCount] float NOT NULL,
    [SellingPrice] float NOT NULL,
    CONSTRAINT [PK_Medicines] PRIMARY KEY ([MedicineId]),
    CONSTRAINT [FK_Medicines_Categories_CategoryId] FOREIGN KEY ([CategoryId]) REFERENCES [Categories] ([CategoryId]) ON DELETE NO ACTION
);
INFO  10:07:02 Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Medications] (
    [MedicationId] int NOT NULL IDENTITY,
    [MedicationName] nvarchar(max) NOT NULL,
    [CustomerId] int NOT NULL,
    CONSTRAINT [PK_Medications] PRIMARY KEY ([MedicationId]),
    CONSTRAINT [FK_Medications_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([CustomerId]) ON DELETE NO ACTION
);
INFO  10:07:02 Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Orders] (
    [OrderId] int NOT NULL IDENTITY,
    [CustomerId] int NOT NULL,
    [PaidAmount] float NOT NULL,
    [TotalAmount] float NOT NULL,
    [Discount] real NOT NULL,
    [ShipmentCost] float NOT NULL,
    CONSTRAINT [PK_Orders] PRIMARY KEY ([OrderId]),
    CONSTRAINT [FK_Orders_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([CustomerId]) ON DELETE NO ACTION
);
INFO  10:07:02 Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [UserCredentials] (
    [Email] nvarchar(450) NOT NULL,
    [UserId] int NOT NULL,
    [Password] varbinary(max) NOT NULL,
    [HasedPassword] varbinary(max) NOT NULL,
    [BankBalance] int NOT NULL,
    [AccountStatus] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_UserCredentials] PRIMARY KEY ([Email]),
    CONSTRAINT [FK_UserCredentials_Customers_UserId] FOREIGN KEY ([UserId]) REFERENCES [Customers] ([CustomerId]) ON DELETE NO ACTION
);
INFO  10:07:03 Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Carts] (
    [CartId] int NOT NULL IDENTITY,
    [CustomerId] int NOT NULL,
    [MedicineId] int NOT NULL,
    [Quantity] int NOT NULL,
    [Cost] float NOT NULL,
    [TotalCost] float NOT NULL,
    [Date] datetime2 NOT NULL,
    CONSTRAINT [PK_Carts] PRIMARY KEY ([CartId]),
    CONSTRAINT [FK_Carts_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([CustomerId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Carts_Medicines_MedicineId] FOREIGN KEY ([MedicineId]) REFERENCES [Medicines] ([MedicineId]) ON DELETE NO ACTION
);
INFO  10:07:03 Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Feedbacks] (
    [FeedbackId] int NOT NULL IDENTITY,
    [FeedbackMessage] nvarchar(max) NOT NULL,
    [MedicineId] int NOT NULL,
    [CustomerId] int NOT NULL,
    [Rating] float NOT NULL,
    CONSTRAINT [PK_Feedbacks] PRIMARY KEY ([FeedbackId]),
    CONSTRAINT [FK_Feedbacks_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([CustomerId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Feedbacks_Medicines_MedicineId] FOREIGN KEY ([MedicineId]) REFERENCES [Medicines] ([MedicineId]) ON DELETE NO ACTION
);
INFO  10:07:04 Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [PurchaseDetails] (
    [PurchaseDetailId] int NOT NULL IDENTITY,
    [PurchaseId] int NOT NULL,
    [MedicineId] int NOT NULL,
    [Amount] int NOT NULL,
    [Quantity] int NOT NULL,
    [TotalSum] int NOT NULL,
    [VendorId] int NOT NULL,
    [ExpiryDate] datetime2 NOT NULL,
    [StorageRequirement] nvarchar(max) NOT NULL,
    [DosageForm] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_PurchaseDetails] PRIMARY KEY ([PurchaseDetailId]),
    CONSTRAINT [FK_PurchaseDetails_Medicines_MedicineId] FOREIGN KEY ([MedicineId]) REFERENCES [Medicines] ([MedicineId]) ON DELETE CASCADE,
    CONSTRAINT [FK_PurchaseDetails_Purchases_PurchaseId] FOREIGN KEY ([PurchaseId]) REFERENCES [Purchases] ([PurchaseId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_PurchaseDetails_Vendors_VendorId] FOREIGN KEY ([VendorId]) REFERENCES [Vendors] ([VendorId]) ON DELETE CASCADE
);
INFO  10:07:04 Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [MedicationItems] (
    [MedicationItemId] int NOT NULL IDENTITY,
    [MedicineId] int NOT NULL,
    [MedicationId] int NOT NULL,
    [Quantity] int NOT NULL,
    CONSTRAINT [PK_MedicationItems] PRIMARY KEY ([MedicationItemId]),
    CONSTRAINT [FK_MedicationItems_Medications_MedicationId] FOREIGN KEY ([MedicationId]) REFERENCES [Medications] ([MedicationId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_MedicationItems_Medicines_MedicineId] FOREIGN KEY ([MedicineId]) REFERENCES [Medicines] ([MedicineId]) ON DELETE NO ACTION
);
INFO  10:07:04 Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [OrderDetails] (
    [OrderDetailId] int NOT NULL IDENTITY,
    [OrderId] int NOT NULL,
    [MedicineId] int NOT NULL,
    [Quantity] int NOT NULL,
    [Cost] float NOT NULL,
    [DeliveryStatus] bit NOT NULL,
    CONSTRAINT [PK_OrderDetails] PRIMARY KEY ([OrderDetailId]),
    CONSTRAINT [FK_OrderDetails_Medicines_MedicineId] FOREIGN KEY ([MedicineId]) REFERENCES [Medicines] ([MedicineId]) ON DELETE CASCADE,
    CONSTRAINT [FK_OrderDetails_Orders_OrderId] FOREIGN KEY ([OrderId]) REFERENCES [Orders] ([OrderId]) ON DELETE NO ACTION
);
INFO  10:07:06 Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Stocks] (
    [StockId] int NOT NULL IDENTITY,
    [PurchaseDetailId] int NOT NULL,
    [MedicineId] int NOT NULL,
    [Quantity] int NOT NULL,
    [ExpiryDate] datetime2 NOT NULL,
    [SellingPrice] float NOT NULL,
    CONSTRAINT [PK_Stocks] PRIMARY KEY ([StockId]),
    CONSTRAINT [FK_Stocks_Medicines_MedicineId] FOREIGN KEY ([MedicineId]) REFERENCES [Medicines] ([MedicineId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Stocks_PurchaseDetails_PurchaseDetailId] FOREIGN KEY ([PurchaseDetailId]) REFERENCES [PurchaseDetails] ([PurchaseDetailId]) ON DELETE NO ACTION
);
INFO  10:07:06 Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [DeliveryDetails] (
    [DeliveryId] int NOT NULL IDENTITY,
    [CustomerId] int NOT NULL,
    [OrderDetailId] int NOT NULL,
    [MedicineId] int NOT NULL,
    [DeliveryDate] datetime2 NOT NULL,
    [Quantity] int NOT NULL,
    [ExpiryDate] datetime2 NOT NULL,
    CONSTRAINT [PK_DeliveryDetails] PRIMARY KEY ([DeliveryId]),
    CONSTRAINT [FK_DeliveryDetails_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([CustomerId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_DeliveryDetails_Medicines_MedicineId] FOREIGN KEY ([MedicineId]) REFERENCES [Medicines] ([MedicineId]) ON DELETE CASCADE,
    CONSTRAINT [FK_DeliveryDetails_OrderDetails_OrderDetailId] FOREIGN KEY ([OrderDetailId]) REFERENCES [OrderDetails] ([OrderDetailId]) ON DELETE NO ACTION
);
INFO  10:07:06 Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Carts_CustomerId] ON [Carts] ([CustomerId]);
INFO  10:07:06 Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Carts_MedicineId] ON [Carts] ([MedicineId]);
INFO  10:07:06 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Customers_Email] ON [Customers] ([Email]);
INFO  10:07:06 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_DeliveryDetails_CustomerId] ON [DeliveryDetails] ([CustomerId]);
INFO  10:07:06 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_DeliveryDetails_MedicineId] ON [DeliveryDetails] ([MedicineId]);
INFO  10:07:06 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_DeliveryDetails_OrderDetailId] ON [DeliveryDetails] ([OrderDetailId]);
INFO  10:07:06 Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Feedbacks_CustomerId] ON [Feedbacks] ([CustomerId]);
INFO  10:07:06 Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Feedbacks_MedicineId] ON [Feedbacks] ([MedicineId]);
INFO  10:07:06 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_MedicationItems_MedicationId] ON [MedicationItems] ([MedicationId]);
INFO  10:07:07 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_MedicationItems_MedicineId] ON [MedicationItems] ([MedicineId]);
INFO  10:07:07 Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Medications_CustomerId] ON [Medications] ([CustomerId]);
INFO  10:07:07 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Medicines_CategoryId] ON [Medicines] ([CategoryId]);
INFO  10:07:07 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_OrderDetails_MedicineId] ON [OrderDetails] ([MedicineId]);
INFO  10:07:07 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_OrderDetails_OrderId] ON [OrderDetails] ([OrderId]);
INFO  10:07:07 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Orders_CustomerId] ON [Orders] ([CustomerId]);
INFO  10:07:07 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_PurchaseDetails_MedicineId] ON [PurchaseDetails] ([MedicineId]);
INFO  10:07:07 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_PurchaseDetails_PurchaseId] ON [PurchaseDetails] ([PurchaseId]);
INFO  10:07:07 Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_PurchaseDetails_VendorId] ON [PurchaseDetails] ([VendorId]);
INFO  10:07:07 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Stocks_MedicineId] ON [Stocks] ([MedicineId]);
INFO  10:07:09 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Stocks_PurchaseDetailId] ON [Stocks] ([PurchaseDetailId]);
INFO  10:07:09 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_UserCredentials_UserId] ON [UserCredentials] ([UserId]);
INFO  10:07:09 Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20240530043648_init', N'6.0.30');
INFO  10:12:14 Now listening on: http://localhost:5033
INFO  10:12:14 Application started. Press Ctrl+C to shut down.
INFO  10:12:14 Hosting environment: Development
INFO  10:12:14 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
WARN  10:13:18 Failed to determine the https port for redirect.
INFO  10:13:20 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:13:22 Executed DbCommand (146ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [u].[Email], [u].[AccountStatus], [u].[BankBalance], [u].[HasedPassword], [u].[Password], [u].[UserId]
FROM [UserCredentials] AS [u]
WHERE [u].[Email] = @__key_0
ERROR 10:13:22 An error occurred while logging in.
PharmacyManagementApi.CustomException.NoUserCredentialFoundException: No user found with given id Sentha@123
   at PharmacyManagementApi.Repositories.General_Repositories.UserCredentialRepository.Get(String key) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Repositories\General_Repositories\UserCredentialRepository.cs:line 59
   at PharmacyManagementApi.Services.AuthService.Login(LoginDTO loginDTO) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\AuthService.cs:line 48
INFO  10:35:12 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:35:21 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:35:21 Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
INFO  10:35:21 Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
INFO  10:35:21 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
INFO  10:35:21 Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
INFO  10:35:21 Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
INFO  10:35:21 Applying migration '20240530050512_orderQuantity-added'.
INFO  10:35:21 Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Medicines] ADD [TotalNumberOfPurchase] int NOT NULL DEFAULT 0;
INFO  10:35:21 Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20240530050512_orderQuantity-added', N'6.0.30');
INFO  10:38:53 Now listening on: http://localhost:5033
INFO  10:38:53 Application started. Press Ctrl+C to shut down.
INFO  10:38:53 Hosting environment: Development
INFO  10:38:53 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
WARN  10:39:10 Failed to determine the https port for redirect.
INFO  10:39:12 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:39:14 Executed DbCommand (145ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 450), @p2='?' (DbType = Boolean), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Customers] ([Address], [Email], [IsSubcribed], [Name], [Phone], [Role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [CustomerId]
FROM [Customers]
WHERE @@ROWCOUNT = 1 AND [CustomerId] = scope_identity();
INFO  10:39:14 Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (Size = 8000) (DbType = Binary), @p4='?' (Size = 8000) (DbType = Binary), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UserCredentials] ([Email], [AccountStatus], [BankBalance], [HasedPassword], [Password], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
INFO  10:39:47 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:39:47 Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 450), @p2='?' (DbType = Boolean), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Customers] ([Address], [Email], [IsSubcribed], [Name], [Phone], [Role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [CustomerId]
FROM [Customers]
WHERE @@ROWCOUNT = 1 AND [CustomerId] = scope_identity();
INFO  10:39:47 Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (Size = 8000) (DbType = Binary), @p4='?' (Size = 8000) (DbType = Binary), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UserCredentials] ([Email], [AccountStatus], [BankBalance], [HasedPassword], [Password], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
INFO  10:40:26 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:40:27 Executed DbCommand (3ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [u].[Email], [u].[AccountStatus], [u].[BankBalance], [u].[HasedPassword], [u].[Password], [u].[UserId]
FROM [UserCredentials] AS [u]
WHERE [u].[Email] = @__key_0
ERROR 10:40:27 An error occurred while logging in.
PharmacyManagementApi.CustomException.UnAuthorizedUserException: User Name or Password not correct
   at PharmacyManagementApi.Services.AuthService.Login(LoginDTO loginDTO) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\AuthService.cs:line 68
INFO  10:40:45 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:40:45 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [u].[Email], [u].[AccountStatus], [u].[BankBalance], [u].[HasedPassword], [u].[Password], [u].[UserId]
FROM [UserCredentials] AS [u]
WHERE [u].[Email] = @__key_0
INFO  10:40:45 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
FROM [Customers] AS [c]
WHERE [c].[CustomerId] = @__key_0
INFO  10:40:45 Generating token for customer 2
INFO  10:40:45 Token generated successfully for customer 2
INFO  10:42:12 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:42:12 Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 450), @p2='?' (DbType = Boolean), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Customers] ([Address], [Email], [IsSubcribed], [Name], [Phone], [Role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [CustomerId]
FROM [Customers]
WHERE @@ROWCOUNT = 1 AND [CustomerId] = scope_identity();
INFO  10:42:12 Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (Size = 8000) (DbType = Binary), @p4='?' (Size = 8000) (DbType = Binary), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UserCredentials] ([Email], [AccountStatus], [BankBalance], [HasedPassword], [Password], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
INFO  10:42:21 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:42:21 Executed DbCommand (4ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [u].[Email], [u].[AccountStatus], [u].[BankBalance], [u].[HasedPassword], [u].[Password], [u].[UserId]
FROM [UserCredentials] AS [u]
WHERE [u].[Email] = @__key_0
INFO  10:42:21 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
FROM [Customers] AS [c]
WHERE [c].[CustomerId] = @__key_0
INFO  10:42:21 Generating token for customer 3
INFO  10:42:21 Token generated successfully for customer 3
INFO  10:43:42 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:43:42 Starting PurchaseMedicine transaction.
INFO  10:43:42 Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Purchases] ([PurchaseDate], [TotalAmount])
VALUES (@p0, @p1);
SELECT [PurchaseId]
FROM [Purchases]
WHERE @@ROWCOUNT = 1 AND [PurchaseId] = scope_identity();
INFO  10:43:42 Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [c].[CategoryName]
FROM [Medicines] AS [m]
INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
LEFT JOIN [Feedbacks] AS [f] ON [m].[MedicineId] = [f].[MedicineId]
ORDER BY [m].[MedicineId], [c].[CategoryId]
INFO  10:43:42 Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
INFO  10:43:42 Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Categories] ([CategoryName])
VALUES (@p0);
SELECT [CategoryId]
FROM [Categories]
WHERE @@ROWCOUNT = 1 AND [CategoryId] = scope_identity();
INFO  10:43:42 Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Double), @p3='?' (DbType = Double), @p4='?' (Size = 4000), @p5='?' (DbType = Double), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Medicines] ([CategoryId], [CurrentQuantity], [FeedbackCount], [FeedbackSum], [MedicineName], [SellingPrice], [TotalNumberOfPurchase])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [MedicineId]
FROM [Medicines]
WHERE @@ROWCOUNT = 1 AND [MedicineId] = scope_identity();
INFO  10:43:42 Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
INFO  10:43:42 Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [v].[VendorId], [v].[Address], [v].[Phone], [v].[VendorName]
FROM [Vendors] AS [v]
ERROR 10:43:43 Error occurred in PurchaseMedicine, rolling back transaction.
PharmacyManagementApi.CustomException.NoVendorFoundException: No vendor found, add the vendor
   at AdminService.PurchaseMedicine(PurchaseDTO items) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\AdminService.cs:line 101
INFO  10:43:58 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:43:58 Starting PurchaseMedicine transaction.
INFO  10:43:59 Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Purchases] ([PurchaseDate], [TotalAmount])
VALUES (@p0, @p1);
SELECT [PurchaseId]
FROM [Purchases]
WHERE @@ROWCOUNT = 1 AND [PurchaseId] = scope_identity();
INFO  10:43:59 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [c].[CategoryName]
FROM [Medicines] AS [m]
INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
LEFT JOIN [Feedbacks] AS [f] ON [m].[MedicineId] = [f].[MedicineId]
ORDER BY [m].[MedicineId], [c].[CategoryId]
INFO  10:43:59 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
INFO  10:43:59 Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Categories] ([CategoryName])
VALUES (@p0);
SELECT [CategoryId]
FROM [Categories]
WHERE @@ROWCOUNT = 1 AND [CategoryId] = scope_identity();
INFO  10:43:59 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Double), @p3='?' (DbType = Double), @p4='?' (Size = 4000), @p5='?' (DbType = Double), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Medicines] ([CategoryId], [CurrentQuantity], [FeedbackCount], [FeedbackSum], [MedicineName], [SellingPrice], [TotalNumberOfPurchase])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [MedicineId]
FROM [Medicines]
WHERE @@ROWCOUNT = 1 AND [MedicineId] = scope_identity();
INFO  10:43:59 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
INFO  10:43:59 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [v].[VendorId], [v].[Address], [v].[Phone], [v].[VendorName]
FROM [Vendors] AS [v]
INFO  10:43:59 Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [PurchaseDetails] ([Amount], [DosageForm], [ExpiryDate], [MedicineId], [PurchaseId], [Quantity], [StorageRequirement], [TotalSum], [VendorId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [PurchaseDetailId]
FROM [PurchaseDetails]
WHERE @@ROWCOUNT = 1 AND [PurchaseDetailId] = scope_identity();
INFO  10:43:59 Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Stocks] ([ExpiryDate], [MedicineId], [PurchaseDetailId], [Quantity], [SellingPrice])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [StockId]
FROM [Stocks]
WHERE @@ROWCOUNT = 1 AND [StockId] = scope_identity();
INFO  10:43:59 Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [c].[CategoryName]
FROM [Medicines] AS [m]
INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
LEFT JOIN [Feedbacks] AS [f] ON [m].[MedicineId] = [f].[MedicineId]
ORDER BY [m].[MedicineId], [c].[CategoryId]
INFO  10:43:59 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
INFO  10:43:59 Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Categories] ([CategoryName])
VALUES (@p0);
SELECT [CategoryId]
FROM [Categories]
WHERE @@ROWCOUNT = 1 AND [CategoryId] = scope_identity();
INFO  10:43:59 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Double), @p3='?' (DbType = Double), @p4='?' (Size = 4000), @p5='?' (DbType = Double), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Medicines] ([CategoryId], [CurrentQuantity], [FeedbackCount], [FeedbackSum], [MedicineName], [SellingPrice], [TotalNumberOfPurchase])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [MedicineId]
FROM [Medicines]
WHERE @@ROWCOUNT = 1 AND [MedicineId] = scope_identity();
INFO  10:43:59 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
INFO  10:43:59 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [v].[VendorId], [v].[Address], [v].[Phone], [v].[VendorName]
FROM [Vendors] AS [v]
INFO  10:43:59 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [PurchaseDetails] ([Amount], [DosageForm], [ExpiryDate], [MedicineId], [PurchaseId], [Quantity], [StorageRequirement], [TotalSum], [VendorId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [PurchaseDetailId]
FROM [PurchaseDetails]
WHERE @@ROWCOUNT = 1 AND [PurchaseDetailId] = scope_identity();
INFO  10:43:59 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Stocks] ([ExpiryDate], [MedicineId], [PurchaseDetailId], [Quantity], [SellingPrice])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [StockId]
FROM [Stocks]
WHERE @@ROWCOUNT = 1 AND [StockId] = scope_identity();
INFO  10:43:59 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [c].[CategoryName]
FROM [Medicines] AS [m]
INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
LEFT JOIN [Feedbacks] AS [f] ON [m].[MedicineId] = [f].[MedicineId]
ORDER BY [m].[MedicineId], [c].[CategoryId]
INFO  10:43:59 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
INFO  10:43:59 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [v].[VendorId], [v].[Address], [v].[Phone], [v].[VendorName]
FROM [Vendors] AS [v]
INFO  10:43:59 Executed DbCommand (4ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:43:59 Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [CurrentQuantity] = @p0
WHERE [MedicineId] = @p1;
SELECT @@ROWCOUNT;
INFO  10:43:59 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [PurchaseDetails] ([Amount], [DosageForm], [ExpiryDate], [MedicineId], [PurchaseId], [Quantity], [StorageRequirement], [TotalSum], [VendorId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [PurchaseDetailId]
FROM [PurchaseDetails]
WHERE @@ROWCOUNT = 1 AND [PurchaseDetailId] = scope_identity();
INFO  10:43:59 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Stocks] ([ExpiryDate], [MedicineId], [PurchaseDetailId], [Quantity], [SellingPrice])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [StockId]
FROM [Stocks]
WHERE @@ROWCOUNT = 1 AND [StockId] = scope_identity();
INFO  10:43:59 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [p].[PurchaseId], [p].[PurchaseDate], [p].[TotalAmount]
FROM [Purchases] AS [p]
WHERE [p].[PurchaseId] = @__key_0
INFO  10:43:59 Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Purchases] SET [TotalAmount] = @p0
WHERE [PurchaseId] = @p1;
SELECT @@ROWCOUNT;
INFO  10:43:59 PurchaseMedicine transaction completed successfully.
INFO  10:44:10 Fetching all product details
INFO  10:44:10 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:44:10 Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [c].[CategoryName]
FROM [Medicines] AS [m]
INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
LEFT JOIN [Feedbacks] AS [f] ON [m].[MedicineId] = [f].[MedicineId]
ORDER BY [m].[MedicineId], [c].[CategoryId]
INFO  10:44:10 Product details fetched successfully
INFO  10:44:59 Fetching orders for customer 3
INFO  10:44:59 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
WARN  10:45:00 Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
INFO  10:45:00 Executed DbCommand (30ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [t3].[MedicationId], [t3].[CustomerId], [t3].[MedicationName], [t3].[MedicationItemId], [t3].[MedicationId0], [t3].[MedicineId], [t3].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN [Carts] AS [c0] ON [t].[CustomerId] = [c0].[CustomerId]
LEFT JOIN (
    SELECT [m1].[MedicationId], [m1].[CustomerId], [m1].[MedicationName], [m2].[MedicationItemId], [m2].[MedicationId] AS [MedicationId0], [m2].[MedicineId], [m2].[Quantity]
    FROM [Medications] AS [m1]
    LEFT JOIN [MedicationItems] AS [m2] ON [m1].[MedicationId] = [m2].[MedicationId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [c0].[CartId], [t3].[MedicationId]
WARN  10:45:00 No orders found for customer 3
ERROR 10:45:00 Error fetching orders for customer 3
PharmacyManagementApi.CustomException.NoOrderFoundException: There is no order for the customer
   at PharmacyManagementApi.Services.ViewService.GetAllOrders(Int32 userId) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\ViewService.cs:line 154
INFO  10:46:12 Adding medicine 2 to cart for customer 2
INFO  10:46:12 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:46:12 Executed DbCommand (5ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:46:12 Finding medicine details for medicine ID: 2
INFO  10:46:12 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:46:12 Medicine details found for medicine ID: 2
INFO  10:46:12 Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CartId], [c].[Cost], [c].[CustomerId], [c].[Date], [c].[MedicineId], [c].[Quantity], [c].[TotalCost]
FROM [Carts] AS [c]
INFO  10:46:12 Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Double), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Carts] ([Cost], [CustomerId], [Date], [MedicineId], [Quantity], [TotalCost])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [CartId]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [CartId] = scope_identity();
INFO  10:46:12 Medicine 2 added to cart 1 for customer 2
INFO  10:46:16 Adding medicine 2 to cart for customer 2
INFO  10:46:16 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:46:16 Executed DbCommand (5ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:46:16 Finding medicine details for medicine ID: 2
INFO  10:46:16 Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:46:16 Medicine details found for medicine ID: 2
INFO  10:46:16 Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CartId], [c].[Cost], [c].[CustomerId], [c].[Date], [c].[MedicineId], [c].[Quantity], [c].[TotalCost]
FROM [Carts] AS [c]
WARN  10:46:16 Cart already exists for medicine 2 and customer 2
ERROR 10:46:16 Error adding medicine 2 to cart for customer 2
PharmacyManagementApi.CustomException.DuplicateValueException: There is already a cart with medicine Id try updateCart2
   at PharmacyManagementApi.Services.CartService.AddToCart(AddToCartDTO addToCart) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\CartService.cs:line 109
INFO  10:47:17 Updating cart for medicine 1 and customer 1
INFO  10:47:17 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:47:17 Executed DbCommand (5ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
ERROR 10:47:18 Error updating cart for medicine 1 and customer 1
PharmacyManagementApi.CustomException.NoMedicineFoundException: No Medicine found with given id 1
   at PharmacyManagementApi.Repositories.General_Repositories.MedicineRepository.Get(Int32 key) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Repositories\General_Repositories\MedicineRepository.cs:line 58
   at PharmacyManagementApi.Services.CartService.UpdateCart(UpdateCartDTO addToCart) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\CartService.cs:line 156
INFO  10:47:28 Updating cart for medicine 2 and customer 1
INFO  10:47:28 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:47:28 Executed DbCommand (5ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:47:28 Finding medicine details for medicine ID: 2
INFO  10:47:28 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:47:28 Medicine details found for medicine ID: 2
INFO  10:47:28 Executed DbCommand (26ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [t3].[MedicationId], [t3].[CustomerId], [t3].[MedicationName], [t3].[MedicationItemId], [t3].[MedicationId0], [t3].[MedicineId], [t3].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN [Carts] AS [c0] ON [t].[CustomerId] = [c0].[CustomerId]
LEFT JOIN (
    SELECT [m1].[MedicationId], [m1].[CustomerId], [m1].[MedicationName], [m2].[MedicationItemId], [m2].[MedicationId] AS [MedicationId0], [m2].[MedicineId], [m2].[Quantity]
    FROM [Medications] AS [m1]
    LEFT JOIN [MedicationItems] AS [m2] ON [m1].[MedicationId] = [m2].[MedicationId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [c0].[CartId], [t3].[MedicationId]
WARN  10:47:28 No cart found for medicine 2 and customer 1
ERROR 10:47:28 Error updating cart for medicine 2 and customer 1
PharmacyManagementApi.CustomException.NoCartFoundException: No cart Contains the Medicine Id , Add the cart first
   at PharmacyManagementApi.Services.CartService.UpdateCart(UpdateCartDTO addToCart) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\CartService.cs:line 163
INFO  10:47:49 Updating cart for medicine 2 and customer 2
INFO  10:47:49 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:47:49 Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:47:49 Finding medicine details for medicine ID: 2
INFO  10:47:49 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:47:49 Medicine details found for medicine ID: 2
INFO  10:47:49 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [t3].[MedicationId], [t3].[CustomerId], [t3].[MedicationName], [t3].[MedicationItemId], [t3].[MedicationId0], [t3].[MedicineId], [t3].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN [Carts] AS [c0] ON [t].[CustomerId] = [c0].[CustomerId]
LEFT JOIN (
    SELECT [m1].[MedicationId], [m1].[CustomerId], [m1].[MedicationName], [m2].[MedicationItemId], [m2].[MedicationId] AS [MedicationId0], [m2].[MedicineId], [m2].[Quantity]
    FROM [Medications] AS [m1]
    LEFT JOIN [MedicationItems] AS [m2] ON [m1].[MedicationId] = [m2].[MedicationId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [c0].[CartId], [t3].[MedicationId]
INFO  10:47:49 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CartId], [c].[Cost], [c].[CustomerId], [c].[Date], [c].[MedicineId], [c].[Quantity], [c].[TotalCost]
FROM [Carts] AS [c]
WHERE [c].[CartId] = @__key_0
INFO  10:47:49 Executed DbCommand (5ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Carts] SET [Quantity] = @p0
WHERE [CartId] = @p1;
SELECT @@ROWCOUNT;
INFO  10:47:49 Cart updated successfully for medicine 2 and customer 2
INFO  10:48:09 Updating cart for medicine 2 and customer 2
INFO  10:48:09 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:48:09 Executed DbCommand (13ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:48:09 Finding medicine details for medicine ID: 2
INFO  10:48:09 Executed DbCommand (5ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:48:09 Medicine details found for medicine ID: 2
INFO  10:48:09 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [t3].[MedicationId], [t3].[CustomerId], [t3].[MedicationName], [t3].[MedicationItemId], [t3].[MedicationId0], [t3].[MedicineId], [t3].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN [Carts] AS [c0] ON [t].[CustomerId] = [c0].[CustomerId]
LEFT JOIN (
    SELECT [m1].[MedicationId], [m1].[CustomerId], [m1].[MedicationName], [m2].[MedicationItemId], [m2].[MedicationId] AS [MedicationId0], [m2].[MedicineId], [m2].[Quantity]
    FROM [Medications] AS [m1]
    LEFT JOIN [MedicationItems] AS [m2] ON [m1].[MedicationId] = [m2].[MedicationId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [c0].[CartId], [t3].[MedicationId]
INFO  10:48:09 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CartId], [c].[Cost], [c].[CustomerId], [c].[Date], [c].[MedicineId], [c].[Quantity], [c].[TotalCost]
FROM [Carts] AS [c]
WHERE [c].[CartId] = @__key_0
INFO  10:48:09 Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Carts] SET [Quantity] = @p0
WHERE [CartId] = @p1;
SELECT @@ROWCOUNT;
INFO  10:48:09 Cart updated successfully for medicine 2 and customer 2
INFO  10:48:43 Removing cart item with ID: 2
INFO  10:48:43 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:48:43 Executed DbCommand (5ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CartId], [c].[Cost], [c].[CustomerId], [c].[Date], [c].[MedicineId], [c].[Quantity], [c].[TotalCost]
FROM [Carts] AS [c]
WHERE [c].[CartId] = @__key_0
ERROR 10:48:43 Error removing cart item with ID: 2
PharmacyManagementApi.CustomException.NoCartFoundException: No Cart found with given id 2
   at PharmacyManagementApi.Repositories.General_Repositories.CartRepository.Get(Int32 key) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Repositories\General_Repositories\CartRepository.cs:line 65
   at PharmacyManagementApi.Services.CartService.RemoveFromCart(Int32 cartId) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\CartService.cs:line 227
INFO  10:49:19 Performing checkout for customer 2
INFO  10:49:19 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:49:19 Executed DbCommand (26ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [t3].[MedicationId], [t3].[CustomerId], [t3].[MedicationName], [t3].[MedicationItemId], [t3].[MedicationId0], [t3].[MedicineId], [t3].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN [Carts] AS [c0] ON [t].[CustomerId] = [c0].[CustomerId]
LEFT JOIN (
    SELECT [m1].[MedicationId], [m1].[CustomerId], [m1].[MedicationName], [m2].[MedicationItemId], [m2].[MedicationId] AS [MedicationId0], [m2].[MedicineId], [m2].[Quantity]
    FROM [Medications] AS [m1]
    LEFT JOIN [MedicationItems] AS [m2] ON [m1].[MedicationId] = [m2].[MedicationId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [c0].[CartId], [t3].[MedicationId]
INFO  10:49:19 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [t3].[MedicationId], [t3].[CustomerId], [t3].[MedicationName], [t3].[MedicationItemId], [t3].[MedicationId0], [t3].[MedicineId], [t3].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN [Carts] AS [c0] ON [t].[CustomerId] = [c0].[CustomerId]
LEFT JOIN (
    SELECT [m1].[MedicationId], [m1].[CustomerId], [m1].[MedicationName], [m2].[MedicationItemId], [m2].[MedicationId] AS [MedicationId0], [m2].[MedicineId], [m2].[Quantity]
    FROM [Medications] AS [m1]
    LEFT JOIN [MedicationItems] AS [m2] ON [m1].[MedicationId] = [m2].[MedicationId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [c0].[CartId], [t3].[MedicationId]
INFO  10:49:20 Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Single), @p2='?' (DbType = Double), @p3='?' (DbType = Double), @p4='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([CustomerId], [Discount], [PaidAmount], [ShipmentCost], [TotalAmount])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [OrderId]
FROM [Orders]
WHERE @@ROWCOUNT = 1 AND [OrderId] = scope_identity();
INFO  10:49:20 Executed DbCommand (5ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:49:20 Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Double), @p1='?' (DbType = Boolean), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([Cost], [DeliveryStatus], [MedicineId], [OrderId], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [OrderDetailId]
FROM [OrderDetails]
WHERE @@ROWCOUNT = 1 AND [OrderDetailId] = scope_identity();
INFO  10:49:20 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:49:20 Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [CurrentQuantity] = @p0, [TotalNumberOfPurchase] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  10:49:20 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CartId], [c].[Cost], [c].[CustomerId], [c].[Date], [c].[MedicineId], [c].[Quantity], [c].[TotalCost]
FROM [Carts] AS [c]
WHERE [c].[CartId] = @__key_0
INFO  10:49:20 Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [Carts]
WHERE [CartId] = @p0;
SELECT @@ROWCOUNT;
INFO  10:49:20 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__key_0
INFO  10:49:20 Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Double), @p1='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Orders] SET [PaidAmount] = @p0, [TotalAmount] = @p1
WHERE [OrderId] = @p2;
SELECT @@ROWCOUNT;
INFO  10:49:20 Checkout completed successfully for customer 2, order ID: 1
INFO  10:50:25 Adding medicine 2 to cart for customer 3
INFO  10:50:25 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:50:25 Executed DbCommand (4ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:50:25 Finding medicine details for medicine ID: 2
INFO  10:50:25 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:50:25 Medicine details found for medicine ID: 2
WARN  10:50:25 Expected quantity 6 is not available for medicine 2
ERROR 10:50:25 Error adding medicine 2 to cart for customer 3
PharmacyManagementApi.CustomException.OutOfStockException: Expected Quantity is not available in the stock
   at PharmacyManagementApi.Services.CartService.AddToCart(AddToCartDTO addToCart) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\CartService.cs:line 102
INFO  10:50:36 Adding medicine 3 to cart for customer 3
INFO  10:50:36 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:50:36 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:50:36 Finding medicine details for medicine ID: 3
INFO  10:50:36 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:50:36 Medicine details found for medicine ID: 3
INFO  10:50:36 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CartId], [c].[Cost], [c].[CustomerId], [c].[Date], [c].[MedicineId], [c].[Quantity], [c].[TotalCost]
FROM [Carts] AS [c]
INFO  10:50:36 Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Double), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Carts] ([Cost], [CustomerId], [Date], [MedicineId], [Quantity], [TotalCost])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [CartId]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [CartId] = scope_identity();
INFO  10:50:36 Medicine 3 added to cart 2 for customer 3
INFO  10:50:46 Performing checkout for customer 3
INFO  10:50:46 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:50:46 Executed DbCommand (39ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [t3].[MedicationId], [t3].[CustomerId], [t3].[MedicationName], [t3].[MedicationItemId], [t3].[MedicationId0], [t3].[MedicineId], [t3].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN [Carts] AS [c0] ON [t].[CustomerId] = [c0].[CustomerId]
LEFT JOIN (
    SELECT [m1].[MedicationId], [m1].[CustomerId], [m1].[MedicationName], [m2].[MedicationItemId], [m2].[MedicationId] AS [MedicationId0], [m2].[MedicineId], [m2].[Quantity]
    FROM [Medications] AS [m1]
    LEFT JOIN [MedicationItems] AS [m2] ON [m1].[MedicationId] = [m2].[MedicationId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [c0].[CartId], [t3].[MedicationId]
INFO  10:50:46 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [t3].[MedicationId], [t3].[CustomerId], [t3].[MedicationName], [t3].[MedicationItemId], [t3].[MedicationId0], [t3].[MedicineId], [t3].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN [Carts] AS [c0] ON [t].[CustomerId] = [c0].[CustomerId]
LEFT JOIN (
    SELECT [m1].[MedicationId], [m1].[CustomerId], [m1].[MedicationName], [m2].[MedicationItemId], [m2].[MedicationId] AS [MedicationId0], [m2].[MedicineId], [m2].[Quantity]
    FROM [Medications] AS [m1]
    LEFT JOIN [MedicationItems] AS [m2] ON [m1].[MedicationId] = [m2].[MedicationId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [c0].[CartId], [t3].[MedicationId]
INFO  10:50:46 Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Single), @p2='?' (DbType = Double), @p3='?' (DbType = Double), @p4='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([CustomerId], [Discount], [PaidAmount], [ShipmentCost], [TotalAmount])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [OrderId]
FROM [Orders]
WHERE @@ROWCOUNT = 1 AND [OrderId] = scope_identity();
INFO  10:50:46 Executed DbCommand (6ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:50:46 Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Double), @p1='?' (DbType = Boolean), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([Cost], [DeliveryStatus], [MedicineId], [OrderId], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [OrderDetailId]
FROM [OrderDetails]
WHERE @@ROWCOUNT = 1 AND [OrderDetailId] = scope_identity();
INFO  10:50:46 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:50:46 Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [CurrentQuantity] = @p0, [TotalNumberOfPurchase] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  10:50:46 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CartId], [c].[Cost], [c].[CustomerId], [c].[Date], [c].[MedicineId], [c].[Quantity], [c].[TotalCost]
FROM [Carts] AS [c]
WHERE [c].[CartId] = @__key_0
INFO  10:50:46 Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [Carts]
WHERE [CartId] = @p0;
SELECT @@ROWCOUNT;
INFO  10:50:46 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__key_0
INFO  10:50:46 Executed DbCommand (3ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Double), @p1='?' (DbType = Double), @p2='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Orders] SET [PaidAmount] = @p0, [ShipmentCost] = @p1, [TotalAmount] = @p2
WHERE [OrderId] = @p3;
SELECT @@ROWCOUNT;
INFO  10:50:46 Checkout completed successfully for customer 3, order ID: 2
INFO  10:53:02 Fetching all pending orders.
INFO  10:53:02 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:53:02 Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [o].[OrderDetailId], [o].[Cost], [o].[DeliveryStatus], [o].[MedicineId], [o].[OrderId], [o].[Quantity], [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase]
FROM [OrderDetails] AS [o]
INNER JOIN [Medicines] AS [m] ON [o].[MedicineId] = [m].[MedicineId]
INFO  10:53:02 Fetched 2 pending orders.
INFO  10:53:37 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:53:37 Starting delivery for OrderDetailId: 1.
INFO  10:53:37 Executed DbCommand (5ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [o].[OrderDetailId], [o].[Cost], [o].[DeliveryStatus], [o].[MedicineId], [o].[OrderId], [o].[Quantity], [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase]
FROM [OrderDetails] AS [o]
INNER JOIN [Medicines] AS [m] ON [o].[MedicineId] = [m].[MedicineId]
WHERE [o].[OrderDetailId] = @__key_0
INFO  10:53:37 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__key_0
INFO  10:53:37 Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [s].[StockId], [s].[ExpiryDate], [s].[MedicineId], [s].[PurchaseDetailId], [s].[Quantity], [s].[SellingPrice]
FROM [Stocks] AS [s]
INFO  10:53:37 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [s].[StockId], [s].[ExpiryDate], [s].[MedicineId], [s].[PurchaseDetailId], [s].[Quantity], [s].[SellingPrice]
FROM [Stocks] AS [s]
WHERE [s].[StockId] = @__key_0
INFO  10:53:37 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [s].[StockId], [s].[ExpiryDate], [s].[MedicineId], [s].[PurchaseDetailId], [s].[Quantity], [s].[SellingPrice]
FROM [Stocks] AS [s]
WHERE [s].[StockId] = @__key_0
INFO  10:53:37 Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [Stocks]
WHERE [StockId] = @p0;
SELECT @@ROWCOUNT;
INFO  10:53:37 Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [DeliveryDetails] ([CustomerId], [DeliveryDate], [ExpiryDate], [MedicineId], [OrderDetailId], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [DeliveryId]
FROM [DeliveryDetails]
WHERE @@ROWCOUNT = 1 AND [DeliveryId] = scope_identity();
INFO  10:53:37 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [s].[StockId], [s].[ExpiryDate], [s].[MedicineId], [s].[PurchaseDetailId], [s].[Quantity], [s].[SellingPrice]
FROM [Stocks] AS [s]
WHERE [s].[StockId] = @__key_0
INFO  10:53:37 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [s].[StockId], [s].[ExpiryDate], [s].[MedicineId], [s].[PurchaseDetailId], [s].[Quantity], [s].[SellingPrice]
FROM [Stocks] AS [s]
WHERE [s].[StockId] = @__key_0
INFO  10:53:37 Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Stocks] SET [Quantity] = @p0
WHERE [StockId] = @p1;
SELECT @@ROWCOUNT;
INFO  10:53:37 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [DeliveryDetails] ([CustomerId], [DeliveryDate], [ExpiryDate], [MedicineId], [OrderDetailId], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [DeliveryId]
FROM [DeliveryDetails]
WHERE @@ROWCOUNT = 1 AND [DeliveryId] = scope_identity();
INFO  10:53:37 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [o].[OrderDetailId], [o].[Cost], [o].[DeliveryStatus], [o].[MedicineId], [o].[OrderId], [o].[Quantity], [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase]
FROM [OrderDetails] AS [o]
INNER JOIN [Medicines] AS [m] ON [o].[MedicineId] = [m].[MedicineId]
WHERE [o].[OrderDetailId] = @__key_0
INFO  10:53:37 Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [OrderDetails] SET [DeliveryStatus] = @p0
WHERE [OrderDetailId] = @p1;
SELECT @@ROWCOUNT;
INFO  10:53:37 Delivery for OrderDetailId: 1 completed successfully.
INFO  10:53:59 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:53:59 Starting delivery for OrderDetailId: 2.
INFO  10:53:59 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [o].[OrderDetailId], [o].[Cost], [o].[DeliveryStatus], [o].[MedicineId], [o].[OrderId], [o].[Quantity], [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase]
FROM [OrderDetails] AS [o]
INNER JOIN [Medicines] AS [m] ON [o].[MedicineId] = [m].[MedicineId]
WHERE [o].[OrderDetailId] = @__key_0
INFO  10:53:59 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__key_0
INFO  10:53:59 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [s].[StockId], [s].[ExpiryDate], [s].[MedicineId], [s].[PurchaseDetailId], [s].[Quantity], [s].[SellingPrice]
FROM [Stocks] AS [s]
INFO  10:53:59 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [s].[StockId], [s].[ExpiryDate], [s].[MedicineId], [s].[PurchaseDetailId], [s].[Quantity], [s].[SellingPrice]
FROM [Stocks] AS [s]
WHERE [s].[StockId] = @__key_0
INFO  10:53:59 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [s].[StockId], [s].[ExpiryDate], [s].[MedicineId], [s].[PurchaseDetailId], [s].[Quantity], [s].[SellingPrice]
FROM [Stocks] AS [s]
WHERE [s].[StockId] = @__key_0
INFO  10:54:00 Executed DbCommand (11ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Stocks] SET [Quantity] = @p0
WHERE [StockId] = @p1;
SELECT @@ROWCOUNT;
INFO  10:54:00 Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [DeliveryDetails] ([CustomerId], [DeliveryDate], [ExpiryDate], [MedicineId], [OrderDetailId], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [DeliveryId]
FROM [DeliveryDetails]
WHERE @@ROWCOUNT = 1 AND [DeliveryId] = scope_identity();
INFO  10:54:00 Executed DbCommand (5ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [o].[OrderDetailId], [o].[Cost], [o].[DeliveryStatus], [o].[MedicineId], [o].[OrderId], [o].[Quantity], [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase]
FROM [OrderDetails] AS [o]
INNER JOIN [Medicines] AS [m] ON [o].[MedicineId] = [m].[MedicineId]
WHERE [o].[OrderDetailId] = @__key_0
INFO  10:54:00 Executed DbCommand (7ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [OrderDetails] SET [DeliveryStatus] = @p0
WHERE [OrderDetailId] = @p1;
SELECT @@ROWCOUNT;
INFO  10:54:00 Delivery for OrderDetailId: 2 completed successfully.
INFO  10:55:02 Adding medication for customer 2
INFO  10:55:02 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:55:02 Executed DbCommand (16ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Medications] ([CustomerId], [MedicationName])
VALUES (@p0, @p1);
SELECT [MedicationId]
FROM [Medications]
WHERE @@ROWCOUNT = 1 AND [MedicationId] = scope_identity();
INFO  10:55:02 Executed DbCommand (4ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
ERROR 10:55:02 Error adding medication for customer 2
PharmacyManagementApi.CustomException.NoMedicineFoundException: No Medicine found with given id 1
   at PharmacyManagementApi.Repositories.General_Repositories.MedicineRepository.Get(Int32 key) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Repositories\General_Repositories\MedicineRepository.cs:line 58
   at PharmacyManagementApi.Services.MedicationService.AddMedication(AddMedicationDTO addMedication) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicationService.cs:line 65
INFO  10:55:11 Adding medication for customer 2
INFO  10:55:11 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:55:11 Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Medications] ([CustomerId], [MedicationName])
VALUES (@p0, @p1);
SELECT [MedicationId]
FROM [Medications]
WHERE @@ROWCOUNT = 1 AND [MedicationId] = scope_identity();
INFO  10:55:11 Executed DbCommand (4ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:55:11 Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [MedicationItems] ([MedicationId], [MedicineId], [Quantity])
VALUES (@p0, @p1, @p2);
SELECT [MedicationItemId]
FROM [MedicationItems]
WHERE @@ROWCOUNT = 1 AND [MedicationItemId] = scope_identity();
INFO  10:55:11 Medication 2 added successfully for customer 2
INFO  10:55:35 Fetching medications for customer 1
INFO  10:55:35 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:55:35 Executed DbCommand (35ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [t3].[MedicationId], [t3].[CustomerId], [t3].[MedicationName], [t3].[MedicationItemId], [t3].[MedicationId0], [t3].[MedicineId], [t3].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN [Carts] AS [c0] ON [t].[CustomerId] = [c0].[CustomerId]
LEFT JOIN (
    SELECT [m1].[MedicationId], [m1].[CustomerId], [m1].[MedicationName], [m2].[MedicationItemId], [m2].[MedicationId] AS [MedicationId0], [m2].[MedicineId], [m2].[Quantity]
    FROM [Medications] AS [m1]
    LEFT JOIN [MedicationItems] AS [m2] ON [m1].[MedicationId] = [m2].[MedicationId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [c0].[CartId], [t3].[MedicationId]
WARN  10:55:35 No medications found for customer 1
ERROR 10:55:35 Error fetching medications for customer 1
PharmacyManagementApi.CustomException.NoMedicationFoundException: Customer have no medication
   at PharmacyManagementApi.Services.ViewService.ViewMyMedications(Int32 customerId) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\ViewService.cs:line 100
INFO  10:55:46 Fetching medications for customer 2
INFO  10:55:46 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:55:46 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [t3].[MedicationId], [t3].[CustomerId], [t3].[MedicationName], [t3].[MedicationItemId], [t3].[MedicationId0], [t3].[MedicineId], [t3].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN [Carts] AS [c0] ON [t].[CustomerId] = [c0].[CustomerId]
LEFT JOIN (
    SELECT [m1].[MedicationId], [m1].[CustomerId], [m1].[MedicationName], [m2].[MedicationItemId], [m2].[MedicationId] AS [MedicationId0], [m2].[MedicineId], [m2].[Quantity]
    FROM [Medications] AS [m1]
    LEFT JOIN [MedicationItems] AS [m2] ON [m1].[MedicationId] = [m2].[MedicationId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [c0].[CartId], [t3].[MedicationId]
INFO  10:55:46 1 medications found for customer 2
INFO  10:56:17 Updating medication 1 for customer 1
INFO  10:56:17 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:56:17 Executed DbCommand (32ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [t3].[MedicationId], [t3].[CustomerId], [t3].[MedicationName], [t3].[MedicationItemId], [t3].[MedicationId0], [t3].[MedicineId], [t3].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN [Carts] AS [c0] ON [t].[CustomerId] = [c0].[CustomerId]
LEFT JOIN (
    SELECT [m1].[MedicationId], [m1].[CustomerId], [m1].[MedicationName], [m2].[MedicationItemId], [m2].[MedicationId] AS [MedicationId0], [m2].[MedicineId], [m2].[Quantity]
    FROM [Medications] AS [m1]
    LEFT JOIN [MedicationItems] AS [m2] ON [m1].[MedicationId] = [m2].[MedicationId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [c0].[CartId], [t3].[MedicationId]
INFO  10:56:17 Executed DbCommand (4ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:56:17 Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicationId], [t].[CustomerId], [t].[MedicationName], [m0].[MedicationItemId], [m0].[MedicationId], [m0].[MedicineId], [m0].[Quantity]
FROM (
    SELECT TOP(2) [m].[MedicationId], [m].[CustomerId], [m].[MedicationName]
    FROM [Medications] AS [m]
    WHERE [m].[MedicationId] = @__key_0
) AS [t]
LEFT JOIN [MedicationItems] AS [m0] ON [t].[MedicationId] = [m0].[MedicationId]
ORDER BY [t].[MedicationId]
ERROR 10:56:18 Error updating medication 1 for customer 1
PharmacyManagementApi.CustomException.NoMedicationFoundException: No Medication found with given id 1
   at PharmacyManagementApi.Repositories.General_Repositories.MedicationRepository.Get(Int32 key) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Repositories\General_Repositories\MedicationRepository.cs:line 58
   at PharmacyManagementApi.Services.MedicationService.UpdateMedication(UpdateMedication updateMedication) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicationService.cs:line 112
INFO  10:56:28 Updating medication 2 for customer 1
INFO  10:56:28 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:56:28 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [t3].[MedicationId], [t3].[CustomerId], [t3].[MedicationName], [t3].[MedicationItemId], [t3].[MedicationId0], [t3].[MedicineId], [t3].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN [Carts] AS [c0] ON [t].[CustomerId] = [c0].[CustomerId]
LEFT JOIN (
    SELECT [m1].[MedicationId], [m1].[CustomerId], [m1].[MedicationName], [m2].[MedicationItemId], [m2].[MedicationId] AS [MedicationId0], [m2].[MedicineId], [m2].[Quantity]
    FROM [Medications] AS [m1]
    LEFT JOIN [MedicationItems] AS [m2] ON [m1].[MedicationId] = [m2].[MedicationId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [c0].[CartId], [t3].[MedicationId]
INFO  10:56:28 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:56:28 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicationId], [t].[CustomerId], [t].[MedicationName], [m0].[MedicationItemId], [m0].[MedicationId], [m0].[MedicineId], [m0].[Quantity]
FROM (
    SELECT TOP(2) [m].[MedicationId], [m].[CustomerId], [m].[MedicationName]
    FROM [Medications] AS [m]
    WHERE [m].[MedicationId] = @__key_0
) AS [t]
LEFT JOIN [MedicationItems] AS [m0] ON [t].[MedicationId] = [m0].[MedicationId]
ORDER BY [t].[MedicationId]
WARN  10:56:28 The expected quantity 6 is not available in the medication 2
ERROR 10:56:28 Error updating medication 2 for customer 1
PharmacyManagementApi.CustomException.NegativeValueException: The expected quantity is not available in the medication
   at PharmacyManagementApi.Services.MedicationService.UpdateMedication(UpdateMedication updateMedication) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicationService.cs:line 141
INFO  10:56:44 Updating medication 2 for customer 1
INFO  10:56:44 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:56:44 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [t3].[MedicationId], [t3].[CustomerId], [t3].[MedicationName], [t3].[MedicationItemId], [t3].[MedicationId0], [t3].[MedicineId], [t3].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN [Carts] AS [c0] ON [t].[CustomerId] = [c0].[CustomerId]
LEFT JOIN (
    SELECT [m1].[MedicationId], [m1].[CustomerId], [m1].[MedicationName], [m2].[MedicationItemId], [m2].[MedicationId] AS [MedicationId0], [m2].[MedicineId], [m2].[Quantity]
    FROM [Medications] AS [m1]
    LEFT JOIN [MedicationItems] AS [m2] ON [m1].[MedicationId] = [m2].[MedicationId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [c0].[CartId], [t3].[MedicationId]
INFO  10:56:44 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:56:44 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicationId], [t].[CustomerId], [t].[MedicationName], [m0].[MedicationItemId], [m0].[MedicationId], [m0].[MedicineId], [m0].[Quantity]
FROM (
    SELECT TOP(2) [m].[MedicationId], [m].[CustomerId], [m].[MedicationName]
    FROM [Medications] AS [m]
    WHERE [m].[MedicationId] = @__key_0
) AS [t]
LEFT JOIN [MedicationItems] AS [m0] ON [t].[MedicationId] = [m0].[MedicationId]
ORDER BY [t].[MedicationId]
INFO  10:56:44 Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [m].[MedicationItemId], [m].[MedicationId], [m].[MedicineId], [m].[Quantity]
FROM [MedicationItems] AS [m]
WHERE [m].[MedicationItemId] = @__key_0
INFO  10:56:44 Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [MedicationItems] SET [Quantity] = @p0
WHERE [MedicationItemId] = @p1;
SELECT @@ROWCOUNT;
INFO  10:56:44 Medication 2 updated successfully for customer 1
INFO  10:57:01 Updating medication 2 for customer 1
INFO  10:57:01 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:57:01 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [t3].[MedicationId], [t3].[CustomerId], [t3].[MedicationName], [t3].[MedicationItemId], [t3].[MedicationId0], [t3].[MedicineId], [t3].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN [Carts] AS [c0] ON [t].[CustomerId] = [c0].[CustomerId]
LEFT JOIN (
    SELECT [m1].[MedicationId], [m1].[CustomerId], [m1].[MedicationName], [m2].[MedicationItemId], [m2].[MedicationId] AS [MedicationId0], [m2].[MedicineId], [m2].[Quantity]
    FROM [Medications] AS [m1]
    LEFT JOIN [MedicationItems] AS [m2] ON [m1].[MedicationId] = [m2].[MedicationId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [c0].[CartId], [t3].[MedicationId]
INFO  10:57:01 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:57:01 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicationId], [t].[CustomerId], [t].[MedicationName], [m0].[MedicationItemId], [m0].[MedicationId], [m0].[MedicineId], [m0].[Quantity]
FROM (
    SELECT TOP(2) [m].[MedicationId], [m].[CustomerId], [m].[MedicationName]
    FROM [Medications] AS [m]
    WHERE [m].[MedicationId] = @__key_0
) AS [t]
LEFT JOIN [MedicationItems] AS [m0] ON [t].[MedicationId] = [m0].[MedicationId]
ORDER BY [t].[MedicationId]
INFO  10:57:01 Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [MedicationItems] ([MedicationId], [MedicineId], [Quantity])
VALUES (@p0, @p1, @p2);
SELECT [MedicationItemId]
FROM [MedicationItems]
WHERE @@ROWCOUNT = 1 AND [MedicationItemId] = scope_identity();
INFO  10:57:01 Medication 2 updated successfully for customer 1
INFO  10:57:08 Fetching medications for customer 2
INFO  10:57:08 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:57:08 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [t3].[MedicationId], [t3].[CustomerId], [t3].[MedicationName], [t3].[MedicationItemId], [t3].[MedicationId0], [t3].[MedicineId], [t3].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN [Carts] AS [c0] ON [t].[CustomerId] = [c0].[CustomerId]
LEFT JOIN (
    SELECT [m1].[MedicationId], [m1].[CustomerId], [m1].[MedicationName], [m2].[MedicationItemId], [m2].[MedicationId] AS [MedicationId0], [m2].[MedicineId], [m2].[Quantity]
    FROM [Medications] AS [m1]
    LEFT JOIN [MedicationItems] AS [m2] ON [m1].[MedicationId] = [m2].[MedicationId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [c0].[CartId], [t3].[MedicationId]
INFO  10:57:08 1 medications found for customer 2
INFO  11:02:22 Performing medication checkout for customer 2 and medication 3
INFO  11:02:22 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:02:22 Executed DbCommand (4ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicationId], [t].[CustomerId], [t].[MedicationName], [m0].[MedicationItemId], [m0].[MedicationId], [m0].[MedicineId], [m0].[Quantity]
FROM (
    SELECT TOP(2) [m].[MedicationId], [m].[CustomerId], [m].[MedicationName]
    FROM [Medications] AS [m]
    WHERE [m].[MedicationId] = @__key_0
) AS [t]
LEFT JOIN [MedicationItems] AS [m0] ON [t].[MedicationId] = [m0].[MedicationId]
ORDER BY [t].[MedicationId]
ERROR 11:02:22 Error during medication checkout for customer 2 and medication 3
PharmacyManagementApi.CustomException.NoMedicationFoundException: No Medication found with given id 3
   at PharmacyManagementApi.Repositories.General_Repositories.MedicationRepository.Get(Int32 key) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Repositories\General_Repositories\MedicationRepository.cs:line 58
   at PharmacyManagementApi.Services.MedicationService.BuyMedication(Int32 userId, Int32 medicationId) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicationService.cs:line 184
INFO  11:02:41 Performing medication checkout for customer 1 and medication 2
INFO  11:02:41 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:02:41 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicationId], [t].[CustomerId], [t].[MedicationName], [m0].[MedicationItemId], [m0].[MedicationId], [m0].[MedicineId], [m0].[Quantity]
FROM (
    SELECT TOP(2) [m].[MedicationId], [m].[CustomerId], [m].[MedicationName]
    FROM [Medications] AS [m]
    WHERE [m].[MedicationId] = @__key_0
) AS [t]
LEFT JOIN [MedicationItems] AS [m0] ON [t].[MedicationId] = [m0].[MedicationId]
ORDER BY [t].[MedicationId]
INFO  11:02:41 Executed DbCommand (24ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [t3].[MedicationId], [t3].[CustomerId], [t3].[MedicationName], [t3].[MedicationItemId], [t3].[MedicationId0], [t3].[MedicineId], [t3].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN [Carts] AS [c0] ON [t].[CustomerId] = [c0].[CustomerId]
LEFT JOIN (
    SELECT [m1].[MedicationId], [m1].[CustomerId], [m1].[MedicationName], [m2].[MedicationItemId], [m2].[MedicationId] AS [MedicationId0], [m2].[MedicineId], [m2].[Quantity]
    FROM [Medications] AS [m1]
    LEFT JOIN [MedicationItems] AS [m2] ON [m1].[MedicationId] = [m2].[MedicationId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [c0].[CartId], [t3].[MedicationId]
INFO  11:02:41 Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Single), @p2='?' (DbType = Double), @p3='?' (DbType = Double), @p4='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([CustomerId], [Discount], [PaidAmount], [ShipmentCost], [TotalAmount])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [OrderId]
FROM [Orders]
WHERE @@ROWCOUNT = 1 AND [OrderId] = scope_identity();
INFO  11:02:41 Executed DbCommand (4ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:02:41 Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Double), @p1='?' (DbType = Boolean), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([Cost], [DeliveryStatus], [MedicineId], [OrderId], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [OrderDetailId]
FROM [OrderDetails]
WHERE @@ROWCOUNT = 1 AND [OrderDetailId] = scope_identity();
INFO  11:02:41 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:02:41 Executed DbCommand (7ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [CurrentQuantity] = @p0, [TotalNumberOfPurchase] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  11:02:41 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:02:41 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Double), @p1='?' (DbType = Boolean), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([Cost], [DeliveryStatus], [MedicineId], [OrderId], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [OrderDetailId]
FROM [OrderDetails]
WHERE @@ROWCOUNT = 1 AND [OrderDetailId] = scope_identity();
INFO  11:02:41 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:02:41 Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [CurrentQuantity] = @p0, [TotalNumberOfPurchase] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  11:02:41 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__key_0
INFO  11:02:41 Executed DbCommand (2ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Double), @p1='?' (DbType = Double), @p2='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Orders] SET [PaidAmount] = @p0, [ShipmentCost] = @p1, [TotalAmount] = @p2
WHERE [OrderId] = @p3;
SELECT @@ROWCOUNT;
INFO  11:02:41 Medication checkout completed successfully for customer 1, order ID: 3
INFO  11:03:33 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:03:33 Starting PurchaseMedicine transaction.
INFO  11:03:33 Executed DbCommand (22ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Purchases] ([PurchaseDate], [TotalAmount])
VALUES (@p0, @p1);
SELECT [PurchaseId]
FROM [Purchases]
WHERE @@ROWCOUNT = 1 AND [PurchaseId] = scope_identity();
INFO  11:03:33 Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [c].[CategoryName]
FROM [Medicines] AS [m]
INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
LEFT JOIN [Feedbacks] AS [f] ON [m].[MedicineId] = [f].[MedicineId]
ORDER BY [m].[MedicineId], [c].[CategoryId]
INFO  11:03:33 Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
INFO  11:03:33 Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [v].[VendorId], [v].[Address], [v].[Phone], [v].[VendorName]
FROM [Vendors] AS [v]
INFO  11:03:33 Executed DbCommand (4ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:03:33 Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [CurrentQuantity] = @p0
WHERE [MedicineId] = @p1;
SELECT @@ROWCOUNT;
INFO  11:03:33 Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [PurchaseDetails] ([Amount], [DosageForm], [ExpiryDate], [MedicineId], [PurchaseId], [Quantity], [StorageRequirement], [TotalSum], [VendorId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [PurchaseDetailId]
FROM [PurchaseDetails]
WHERE @@ROWCOUNT = 1 AND [PurchaseDetailId] = scope_identity();
INFO  11:03:33 Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Stocks] ([ExpiryDate], [MedicineId], [PurchaseDetailId], [Quantity], [SellingPrice])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [StockId]
FROM [Stocks]
WHERE @@ROWCOUNT = 1 AND [StockId] = scope_identity();
INFO  11:03:33 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [c].[CategoryName]
FROM [Medicines] AS [m]
INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
LEFT JOIN [Feedbacks] AS [f] ON [m].[MedicineId] = [f].[MedicineId]
ORDER BY [m].[MedicineId], [c].[CategoryId]
INFO  11:03:33 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
INFO  11:03:33 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [v].[VendorId], [v].[Address], [v].[Phone], [v].[VendorName]
FROM [Vendors] AS [v]
INFO  11:03:33 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:03:33 Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [CurrentQuantity] = @p0
WHERE [MedicineId] = @p1;
SELECT @@ROWCOUNT;
INFO  11:03:33 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [PurchaseDetails] ([Amount], [DosageForm], [ExpiryDate], [MedicineId], [PurchaseId], [Quantity], [StorageRequirement], [TotalSum], [VendorId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [PurchaseDetailId]
FROM [PurchaseDetails]
WHERE @@ROWCOUNT = 1 AND [PurchaseDetailId] = scope_identity();
INFO  11:03:33 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Stocks] ([ExpiryDate], [MedicineId], [PurchaseDetailId], [Quantity], [SellingPrice])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [StockId]
FROM [Stocks]
WHERE @@ROWCOUNT = 1 AND [StockId] = scope_identity();
INFO  11:03:33 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [c].[CategoryName]
FROM [Medicines] AS [m]
INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
LEFT JOIN [Feedbacks] AS [f] ON [m].[MedicineId] = [f].[MedicineId]
ORDER BY [m].[MedicineId], [c].[CategoryId]
INFO  11:03:33 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
INFO  11:03:33 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [v].[VendorId], [v].[Address], [v].[Phone], [v].[VendorName]
FROM [Vendors] AS [v]
INFO  11:03:33 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:03:33 Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [CurrentQuantity] = @p0
WHERE [MedicineId] = @p1;
SELECT @@ROWCOUNT;
INFO  11:03:33 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [PurchaseDetails] ([Amount], [DosageForm], [ExpiryDate], [MedicineId], [PurchaseId], [Quantity], [StorageRequirement], [TotalSum], [VendorId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [PurchaseDetailId]
FROM [PurchaseDetails]
WHERE @@ROWCOUNT = 1 AND [PurchaseDetailId] = scope_identity();
INFO  11:03:33 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Stocks] ([ExpiryDate], [MedicineId], [PurchaseDetailId], [Quantity], [SellingPrice])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [StockId]
FROM [Stocks]
WHERE @@ROWCOUNT = 1 AND [StockId] = scope_identity();
INFO  11:03:33 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [p].[PurchaseId], [p].[PurchaseDate], [p].[TotalAmount]
FROM [Purchases] AS [p]
WHERE [p].[PurchaseId] = @__key_0
INFO  11:03:33 Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Purchases] SET [TotalAmount] = @p0
WHERE [PurchaseId] = @p1;
SELECT @@ROWCOUNT;
INFO  11:03:33 PurchaseMedicine transaction completed successfully.
INFO  11:03:43 Performing medication checkout for customer 1 and medication 2
INFO  11:03:44 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:03:44 Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicationId], [t].[CustomerId], [t].[MedicationName], [m0].[MedicationItemId], [m0].[MedicationId], [m0].[MedicineId], [m0].[Quantity]
FROM (
    SELECT TOP(2) [m].[MedicationId], [m].[CustomerId], [m].[MedicationName]
    FROM [Medications] AS [m]
    WHERE [m].[MedicationId] = @__key_0
) AS [t]
LEFT JOIN [MedicationItems] AS [m0] ON [t].[MedicationId] = [m0].[MedicationId]
ORDER BY [t].[MedicationId]
INFO  11:03:44 Executed DbCommand (23ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [t3].[MedicationId], [t3].[CustomerId], [t3].[MedicationName], [t3].[MedicationItemId], [t3].[MedicationId0], [t3].[MedicineId], [t3].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN [Carts] AS [c0] ON [t].[CustomerId] = [c0].[CustomerId]
LEFT JOIN (
    SELECT [m1].[MedicationId], [m1].[CustomerId], [m1].[MedicationName], [m2].[MedicationItemId], [m2].[MedicationId] AS [MedicationId0], [m2].[MedicineId], [m2].[Quantity]
    FROM [Medications] AS [m1]
    LEFT JOIN [MedicationItems] AS [m2] ON [m1].[MedicationId] = [m2].[MedicationId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [c0].[CartId], [t3].[MedicationId]
INFO  11:03:44 Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Single), @p2='?' (DbType = Double), @p3='?' (DbType = Double), @p4='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([CustomerId], [Discount], [PaidAmount], [ShipmentCost], [TotalAmount])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [OrderId]
FROM [Orders]
WHERE @@ROWCOUNT = 1 AND [OrderId] = scope_identity();
INFO  11:03:44 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:03:44 Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Double), @p1='?' (DbType = Boolean), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([Cost], [DeliveryStatus], [MedicineId], [OrderId], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [OrderDetailId]
FROM [OrderDetails]
WHERE @@ROWCOUNT = 1 AND [OrderDetailId] = scope_identity();
INFO  11:03:44 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:03:44 Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [CurrentQuantity] = @p0, [TotalNumberOfPurchase] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  11:03:44 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:03:44 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Double), @p1='?' (DbType = Boolean), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([Cost], [DeliveryStatus], [MedicineId], [OrderId], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [OrderDetailId]
FROM [OrderDetails]
WHERE @@ROWCOUNT = 1 AND [OrderDetailId] = scope_identity();
INFO  11:03:44 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:03:44 Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [CurrentQuantity] = @p0, [TotalNumberOfPurchase] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  11:03:44 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__key_0
INFO  11:03:44 Executed DbCommand (2ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Double), @p1='?' (DbType = Double), @p2='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Orders] SET [PaidAmount] = @p0, [ShipmentCost] = @p1, [TotalAmount] = @p2
WHERE [OrderId] = @p3;
SELECT @@ROWCOUNT;
INFO  11:03:44 Medication checkout completed successfully for customer 1, order ID: 4
INFO  11:04:43 Performing medication checkout for customer 1 and medication 2
INFO  11:04:43 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:04:43 Executed DbCommand (4ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicationId], [t].[CustomerId], [t].[MedicationName], [m0].[MedicationItemId], [m0].[MedicationId], [m0].[MedicineId], [m0].[Quantity]
FROM (
    SELECT TOP(2) [m].[MedicationId], [m].[CustomerId], [m].[MedicationName]
    FROM [Medications] AS [m]
    WHERE [m].[MedicationId] = @__key_0
) AS [t]
LEFT JOIN [MedicationItems] AS [m0] ON [t].[MedicationId] = [m0].[MedicationId]
ORDER BY [t].[MedicationId]
INFO  11:04:43 Executed DbCommand (24ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [t3].[MedicationId], [t3].[CustomerId], [t3].[MedicationName], [t3].[MedicationItemId], [t3].[MedicationId0], [t3].[MedicineId], [t3].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN [Carts] AS [c0] ON [t].[CustomerId] = [c0].[CustomerId]
LEFT JOIN (
    SELECT [m1].[MedicationId], [m1].[CustomerId], [m1].[MedicationName], [m2].[MedicationItemId], [m2].[MedicationId] AS [MedicationId0], [m2].[MedicineId], [m2].[Quantity]
    FROM [Medications] AS [m1]
    LEFT JOIN [MedicationItems] AS [m2] ON [m1].[MedicationId] = [m2].[MedicationId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [c0].[CartId], [t3].[MedicationId]
INFO  11:04:43 Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Single), @p2='?' (DbType = Double), @p3='?' (DbType = Double), @p4='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([CustomerId], [Discount], [PaidAmount], [ShipmentCost], [TotalAmount])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [OrderId]
FROM [Orders]
WHERE @@ROWCOUNT = 1 AND [OrderId] = scope_identity();
INFO  11:04:43 Executed DbCommand (4ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:04:43 Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Double), @p1='?' (DbType = Boolean), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([Cost], [DeliveryStatus], [MedicineId], [OrderId], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [OrderDetailId]
FROM [OrderDetails]
WHERE @@ROWCOUNT = 1 AND [OrderDetailId] = scope_identity();
INFO  11:04:43 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:04:43 Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [CurrentQuantity] = @p0, [TotalNumberOfPurchase] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  11:04:43 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:04:43 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Double), @p1='?' (DbType = Boolean), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([Cost], [DeliveryStatus], [MedicineId], [OrderId], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [OrderDetailId]
FROM [OrderDetails]
WHERE @@ROWCOUNT = 1 AND [OrderDetailId] = scope_identity();
INFO  11:04:43 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:04:43 Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [CurrentQuantity] = @p0, [TotalNumberOfPurchase] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  11:04:43 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__key_0
INFO  11:04:43 Executed DbCommand (2ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Double), @p1='?' (DbType = Double), @p2='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Orders] SET [PaidAmount] = @p0, [ShipmentCost] = @p1, [TotalAmount] = @p2
WHERE [OrderId] = @p3;
SELECT @@ROWCOUNT;
INFO  11:04:43 Medication checkout completed successfully for customer 1, order ID: 5
INFO  11:05:08 Fetching medications for customer 2
INFO  11:05:08 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:05:08 Executed DbCommand (24ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [t3].[MedicationId], [t3].[CustomerId], [t3].[MedicationName], [t3].[MedicationItemId], [t3].[MedicationId0], [t3].[MedicineId], [t3].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN [Carts] AS [c0] ON [t].[CustomerId] = [c0].[CustomerId]
LEFT JOIN (
    SELECT [m1].[MedicationId], [m1].[CustomerId], [m1].[MedicationName], [m2].[MedicationItemId], [m2].[MedicationId] AS [MedicationId0], [m2].[MedicineId], [m2].[Quantity]
    FROM [Medications] AS [m1]
    LEFT JOIN [MedicationItems] AS [m2] ON [m1].[MedicationId] = [m2].[MedicationId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [c0].[CartId], [t3].[MedicationId]
INFO  11:05:08 1 medications found for customer 2
INFO  11:05:35 Adding medicine 3 to cart for customer 3
INFO  11:05:35 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:05:35 Executed DbCommand (6ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:05:35 Finding medicine details for medicine ID: 3
INFO  11:05:35 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:05:35 Medicine details found for medicine ID: 3
INFO  11:05:35 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CartId], [c].[Cost], [c].[CustomerId], [c].[Date], [c].[MedicineId], [c].[Quantity], [c].[TotalCost]
FROM [Carts] AS [c]
INFO  11:05:35 Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Double), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Carts] ([Cost], [CustomerId], [Date], [MedicineId], [Quantity], [TotalCost])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [CartId]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [CartId] = scope_identity();
INFO  11:05:35 Medicine 3 added to cart 3 for customer 3
INFO  11:06:12 Performing checkout for customer 2
INFO  11:06:12 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:06:12 Executed DbCommand (25ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [t3].[MedicationId], [t3].[CustomerId], [t3].[MedicationName], [t3].[MedicationItemId], [t3].[MedicationId0], [t3].[MedicineId], [t3].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN [Carts] AS [c0] ON [t].[CustomerId] = [c0].[CustomerId]
LEFT JOIN (
    SELECT [m1].[MedicationId], [m1].[CustomerId], [m1].[MedicationName], [m2].[MedicationItemId], [m2].[MedicationId] AS [MedicationId0], [m2].[MedicineId], [m2].[Quantity]
    FROM [Medications] AS [m1]
    LEFT JOIN [MedicationItems] AS [m2] ON [m1].[MedicationId] = [m2].[MedicationId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [c0].[CartId], [t3].[MedicationId]
WARN  11:06:12 Cart is empty for customer 2
ERROR 11:06:12 Error during checkout for customer 2
PharmacyManagementApi.CustomException.CartEmptyException: Your Cart is Empty
   at PharmacyManagementApi.Services.CartService.Checkout(Int32 userId) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\CartService.cs:line 271
INFO  11:06:25 Performing checkout for customer 3
INFO  11:06:25 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:06:25 Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [t3].[MedicationId], [t3].[CustomerId], [t3].[MedicationName], [t3].[MedicationItemId], [t3].[MedicationId0], [t3].[MedicineId], [t3].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN [Carts] AS [c0] ON [t].[CustomerId] = [c0].[CustomerId]
LEFT JOIN (
    SELECT [m1].[MedicationId], [m1].[CustomerId], [m1].[MedicationName], [m2].[MedicationItemId], [m2].[MedicationId] AS [MedicationId0], [m2].[MedicineId], [m2].[Quantity]
    FROM [Medications] AS [m1]
    LEFT JOIN [MedicationItems] AS [m2] ON [m1].[MedicationId] = [m2].[MedicationId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [c0].[CartId], [t3].[MedicationId]
INFO  11:06:25 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [t3].[MedicationId], [t3].[CustomerId], [t3].[MedicationName], [t3].[MedicationItemId], [t3].[MedicationId0], [t3].[MedicineId], [t3].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN [Carts] AS [c0] ON [t].[CustomerId] = [c0].[CustomerId]
LEFT JOIN (
    SELECT [m1].[MedicationId], [m1].[CustomerId], [m1].[MedicationName], [m2].[MedicationItemId], [m2].[MedicationId] AS [MedicationId0], [m2].[MedicineId], [m2].[Quantity]
    FROM [Medications] AS [m1]
    LEFT JOIN [MedicationItems] AS [m2] ON [m1].[MedicationId] = [m2].[MedicationId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [c0].[CartId], [t3].[MedicationId]
INFO  11:06:25 Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Single), @p2='?' (DbType = Double), @p3='?' (DbType = Double), @p4='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([CustomerId], [Discount], [PaidAmount], [ShipmentCost], [TotalAmount])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [OrderId]
FROM [Orders]
WHERE @@ROWCOUNT = 1 AND [OrderId] = scope_identity();
INFO  11:06:25 Executed DbCommand (4ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:06:25 Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Double), @p1='?' (DbType = Boolean), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([Cost], [DeliveryStatus], [MedicineId], [OrderId], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [OrderDetailId]
FROM [OrderDetails]
WHERE @@ROWCOUNT = 1 AND [OrderDetailId] = scope_identity();
INFO  11:06:25 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:06:25 Executed DbCommand (3ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [CurrentQuantity] = @p0, [TotalNumberOfPurchase] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  11:06:25 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CartId], [c].[Cost], [c].[CustomerId], [c].[Date], [c].[MedicineId], [c].[Quantity], [c].[TotalCost]
FROM [Carts] AS [c]
WHERE [c].[CartId] = @__key_0
INFO  11:06:25 Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [Carts]
WHERE [CartId] = @p0;
SELECT @@ROWCOUNT;
INFO  11:06:25 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__key_0
INFO  11:06:25 Executed DbCommand (7ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Double), @p1='?' (DbType = Double), @p2='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Orders] SET [PaidAmount] = @p0, [ShipmentCost] = @p1, [TotalAmount] = @p2
WHERE [OrderId] = @p3;
SELECT @@ROWCOUNT;
INFO  11:06:25 Checkout completed successfully for customer 3, order ID: 6
INFO  11:07:03 Fetching all product details
INFO  11:07:03 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:07:03 Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [c].[CategoryName]
FROM [Medicines] AS [m]
INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
LEFT JOIN [Feedbacks] AS [f] ON [m].[MedicineId] = [f].[MedicineId]
ORDER BY [m].[MedicineId], [c].[CategoryId]
INFO  11:07:03 Product details fetched successfully
INFO  11:08:11 Adding feedback for medicine 2 by customer 1
INFO  11:08:11 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:08:11 Executed DbCommand (6ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:08:11 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:08:11 Executed DbCommand (3ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Double), @p1='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [FeedbackCount] = @p0, [FeedbackSum] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  11:08:11 Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Feedbacks] ([CustomerId], [FeedbackMessage], [MedicineId], [Rating])
VALUES (@p0, @p1, @p2, @p3);
SELECT [FeedbackId]
FROM [Feedbacks]
WHERE @@ROWCOUNT = 1 AND [FeedbackId] = scope_identity();
INFO  11:08:11 Feedback 1 added successfully for medicine 2 by customer 1
INFO  11:08:26 Fetching all product details
INFO  11:08:26 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:08:26 Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [c].[CategoryName]
FROM [Medicines] AS [m]
INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
LEFT JOIN [Feedbacks] AS [f] ON [m].[MedicineId] = [f].[MedicineId]
ORDER BY [m].[MedicineId], [c].[CategoryId]
INFO  11:08:26 Product details fetched successfully
INFO  11:08:38 Viewing feedbacks for customer 1
INFO  11:08:38 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:08:38 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
FROM [Customers] AS [c]
WHERE [c].[CustomerId] = @__key_0
INFO  11:08:38 Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating]
FROM [Feedbacks] AS [f]
INFO  11:08:38 1 feedbacks found for customer 1
INFO  11:08:52 Getting feedback details for medicine 2
INFO  11:08:52 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:08:52 Executed DbCommand (5ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:08:52 Feedback details retrieved successfully for medicine 2
INFO  11:09:31 Adding feedback for medicine 2 by customer 2
INFO  11:09:31 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:09:31 Executed DbCommand (5ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:09:31 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:09:31 Executed DbCommand (10ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Double), @p1='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [FeedbackCount] = @p0, [FeedbackSum] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  11:09:31 Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Feedbacks] ([CustomerId], [FeedbackMessage], [MedicineId], [Rating])
VALUES (@p0, @p1, @p2, @p3);
SELECT [FeedbackId]
FROM [Feedbacks]
WHERE @@ROWCOUNT = 1 AND [FeedbackId] = scope_identity();
INFO  11:09:31 Feedback 2 added successfully for medicine 2 by customer 2
INFO  11:09:36 Adding feedback for medicine 2 by customer 2
INFO  11:09:36 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:09:36 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
WARN  11:09:36 Customer 2 has already given feedback for medicine 2
ERROR 11:09:36 Error adding feedback for medicine 2 by customer 2
PharmacyManagementApi.CustomException.DuplicateValueException: The user has already given the feedback
   at PharmacyManagementApi.Services.FeedBackService.AddFeedback(FeedbackRequestDTO feedbackRequest) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\FeedBackService.cs:line 58
INFO  11:10:18 Adding feedback for medicine 3 by customer 2
INFO  11:10:18 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:10:18 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:10:18 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:10:18 Executed DbCommand (6ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Double), @p1='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [FeedbackCount] = @p0, [FeedbackSum] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  11:10:18 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Feedbacks] ([CustomerId], [FeedbackMessage], [MedicineId], [Rating])
VALUES (@p0, @p1, @p2, @p3);
SELECT [FeedbackId]
FROM [Feedbacks]
WHERE @@ROWCOUNT = 1 AND [FeedbackId] = scope_identity();
INFO  11:10:18 Feedback 3 added successfully for medicine 3 by customer 2
INFO  11:10:53 Adding feedback for medicine 3 by customer 1
INFO  11:10:53 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:10:53 Executed DbCommand (5ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:10:53 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:10:53 Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Double), @p1='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [FeedbackCount] = @p0, [FeedbackSum] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  11:10:53 Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Feedbacks] ([CustomerId], [FeedbackMessage], [MedicineId], [Rating])
VALUES (@p0, @p1, @p2, @p3);
SELECT [FeedbackId]
FROM [Feedbacks]
WHERE @@ROWCOUNT = 1 AND [FeedbackId] = scope_identity();
INFO  11:10:53 Feedback 4 added successfully for medicine 3 by customer 1
INFO  11:10:55 Adding feedback for medicine 3 by customer 1
INFO  11:10:55 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:10:55 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
WARN  11:10:55 Customer 1 has already given feedback for medicine 3
ERROR 11:10:55 Error adding feedback for medicine 3 by customer 1
PharmacyManagementApi.CustomException.DuplicateValueException: The user has already given the feedback
   at PharmacyManagementApi.Services.FeedBackService.AddFeedback(FeedbackRequestDTO feedbackRequest) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\FeedBackService.cs:line 58
INFO  11:11:07 Getting feedback details for medicine 2
INFO  11:11:07 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:11:07 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:11:07 Feedback details retrieved successfully for medicine 2
INFO  11:11:13 Getting feedback details for medicine 3
INFO  11:11:13 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:11:13 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:11:13 Feedback details retrieved successfully for medicine 3
INFO  11:14:09 Start processing HTTP request POST https://api.openai.com/v1/chat/completions
INFO  11:14:09 Sending HTTP request POST https://api.openai.com/v1/chat/completions
INFO  11:14:10 Received HTTP response headers after 882.5136ms - 401
INFO  11:14:10 End processing HTTP request after 926.8632ms - 401
ERROR 11:14:11 An unhandled exception has occurred while executing the request.
System.Net.Http.HttpRequestException: Response status code does not indicate success: 401 (Unauthorized).
   at System.Net.Http.HttpResponseMessage.EnsureSuccessStatusCode()
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms)
   at PharmacyManagementApi.Controllers.MedicineDescriptorController.GetChatResponse(String message)
   at lambda_method1153(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
INFO  11:14:48 Now listening on: http://localhost:5033
INFO  11:14:48 Application started. Press Ctrl+C to shut down.
INFO  11:14:48 Hosting environment: Development
INFO  11:14:48 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
WARN  11:15:08 Failed to determine the https port for redirect.
INFO  11:15:08 Start processing HTTP request POST https://api.openai.com/v1/chat/completions
INFO  11:15:08 Sending HTTP request POST https://api.openai.com/v1/chat/completions
INFO  11:15:09 Received HTTP response headers after 585.0572ms - 401
INFO  11:15:09 End processing HTTP request after 633.1609ms - 401
ERROR 11:15:10 An unhandled exception has occurred while executing the request.
System.Net.Http.HttpRequestException: Response status code does not indicate success: 401 (Unauthorized).
   at System.Net.Http.HttpResponseMessage.EnsureSuccessStatusCode()
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 37
   at PharmacyManagementApi.Controllers.MedicineDescriptorController.GetChatResponse(String message) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Controllers\MedicineDescriptorController.cs:line 21
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
INFO  11:15:29 Start processing HTTP request POST https://api.openai.com/v1/chat/completions
INFO  11:15:29 Sending HTTP request POST https://api.openai.com/v1/chat/completions
INFO  11:15:29 Received HTTP response headers after 298.7712ms - 401
INFO  11:15:29 End processing HTTP request after 316.4346ms - 401
ERROR 11:15:29 An unhandled exception has occurred while executing the request.
System.Net.Http.HttpRequestException: Response status code does not indicate success: 401 (Unauthorized).
   at System.Net.Http.HttpResponseMessage.EnsureSuccessStatusCode()
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 37
   at PharmacyManagementApi.Controllers.MedicineDescriptorController.GetChatResponse(String message) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Controllers\MedicineDescriptorController.cs:line 21
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
INFO  11:18:23 Now listening on: http://localhost:5033
INFO  11:18:23 Application started. Press Ctrl+C to shut down.
INFO  11:18:23 Hosting environment: Development
INFO  11:18:23 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
WARN  11:18:28 Failed to determine the https port for redirect.
INFO  11:18:28 Start processing HTTP request POST https://api.openai.com/v1/chat/completions
INFO  11:18:28 Sending HTTP request POST https://api.openai.com/v1/chat/completions
INFO  11:18:29 Received HTTP response headers after 616.8153ms - 401
INFO  11:18:29 End processing HTTP request after 660.4856ms - 401
ERROR 11:18:30 An unhandled exception has occurred while executing the request.
System.UnauthorizedAccessException: Access to the OpenAI API is unauthorized. Please check your API key.
 ---> System.Net.Http.HttpRequestException: Response status code does not indicate success: 401 (Unauthorized).
   at System.Net.Http.HttpResponseMessage.EnsureSuccessStatusCode()
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 41
   --- End of inner exception stack trace ---
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 46
   at PharmacyManagementApi.Controllers.MedicineDescriptorController.GetChatResponse(String message) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Controllers\MedicineDescriptorController.cs:line 21
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
INFO  11:19:54 Now listening on: http://localhost:5033
INFO  11:19:54 Application started. Press Ctrl+C to shut down.
INFO  11:19:54 Hosting environment: Development
INFO  11:19:54 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
WARN  11:20:03 Failed to determine the https port for redirect.
INFO  11:20:03 Start processing HTTP request POST https://api.openai.com/v1/chat/completions
INFO  11:20:03 Sending HTTP request POST https://api.openai.com/v1/chat/completions
INFO  11:20:03 Received HTTP response headers after 698.3995ms - 429
INFO  11:20:03 End processing HTTP request after 743.8895ms - 429
ERROR 11:20:04 An unhandled exception has occurred while executing the request.
System.Exception: An error occurred while calling the OpenAI API.
 ---> System.Net.Http.HttpRequestException: Response status code does not indicate success: 429 (Too Many Requests).
   at System.Net.Http.HttpResponseMessage.EnsureSuccessStatusCode()
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 41
   --- End of inner exception stack trace ---
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 51
   at PharmacyManagementApi.Controllers.MedicineDescriptorController.GetChatResponse(String message) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Controllers\MedicineDescriptorController.cs:line 21
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
INFO  11:21:11 Now listening on: http://localhost:5033
INFO  11:21:11 Application started. Press Ctrl+C to shut down.
INFO  11:21:11 Hosting environment: Development
INFO  11:21:11 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
WARN  11:21:29 Failed to determine the https port for redirect.
INFO  11:21:29 Start processing HTTP request POST https://api.openai.com/v1/chat/completions
INFO  11:21:29 Sending HTTP request POST https://api.openai.com/v1/chat/completions
INFO  11:21:30 Received HTTP response headers after 599.8166ms - 401
INFO  11:21:30 End processing HTTP request after 649.3243ms - 401
ERROR 11:21:31 An unhandled exception has occurred while executing the request.
System.UnauthorizedAccessException: Access to the OpenAI API is unauthorized. Please check your API key.
 ---> System.Net.Http.HttpRequestException: Response status code does not indicate success: 401 (Unauthorized).
   at System.Net.Http.HttpResponseMessage.EnsureSuccessStatusCode()
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 41
   --- End of inner exception stack trace ---
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 46
   at PharmacyManagementApi.Controllers.MedicineDescriptorController.GetChatResponse(String message) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Controllers\MedicineDescriptorController.cs:line 21
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
INFO  11:29:18 Now listening on: http://localhost:5033
INFO  11:29:18 Application started. Press Ctrl+C to shut down.
INFO  11:29:18 Hosting environment: Development
INFO  11:29:18 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
WARN  11:29:35 Failed to determine the https port for redirect.
INFO  11:29:36 Start processing HTTP request POST https://api.openai.com/v1/chat/completions
INFO  11:29:36 Sending HTTP request POST https://api.openai.com/v1/chat/completions
INFO  11:29:36 Received HTTP response headers after 677.958ms - 429
INFO  11:29:36 End processing HTTP request after 718.8114ms - 429
ERROR 11:29:37 An unhandled exception has occurred while executing the request.
System.Exception: An error occurred while calling the OpenAI API.
 ---> System.Net.Http.HttpRequestException: Response status code does not indicate success: 429 (Too Many Requests).
   at System.Net.Http.HttpResponseMessage.EnsureSuccessStatusCode()
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 41
   --- End of inner exception stack trace ---
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 51
   at PharmacyManagementApi.Controllers.MedicineDescriptorController.GetChatResponse(String message) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Controllers\MedicineDescriptorController.cs:line 21
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
INFO  11:30:04 Start processing HTTP request POST https://api.openai.com/v1/chat/completions
INFO  11:30:04 Sending HTTP request POST https://api.openai.com/v1/chat/completions
INFO  11:30:04 Received HTTP response headers after 311.0043ms - 429
INFO  11:30:04 End processing HTTP request after 323.2831ms - 429
ERROR 11:30:05 An unhandled exception has occurred while executing the request.
System.Exception: An error occurred while calling the OpenAI API.
 ---> System.Net.Http.HttpRequestException: Response status code does not indicate success: 429 (Too Many Requests).
   at System.Net.Http.HttpResponseMessage.EnsureSuccessStatusCode()
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 41
   --- End of inner exception stack trace ---
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 51
   at PharmacyManagementApi.Controllers.MedicineDescriptorController.GetChatResponse(String message) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Controllers\MedicineDescriptorController.cs:line 21
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
INFO  11:31:28 Start processing HTTP request POST https://api.openai.com/v1/chat/completions
INFO  11:31:28 Sending HTTP request POST https://api.openai.com/v1/chat/completions
INFO  11:31:29 Received HTTP response headers after 440.9958ms - 429
INFO  11:31:29 End processing HTTP request after 457.3351ms - 429
ERROR 11:31:29 An unhandled exception has occurred while executing the request.
System.Exception: An error occurred while calling the OpenAI API.
 ---> System.Net.Http.HttpRequestException: Response status code does not indicate success: 429 (Too Many Requests).
   at System.Net.Http.HttpResponseMessage.EnsureSuccessStatusCode()
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 41
   --- End of inner exception stack trace ---
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 51
   at PharmacyManagementApi.Controllers.MedicineDescriptorController.GetChatResponse(String message) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Controllers\MedicineDescriptorController.cs:line 21
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
INFO  11:33:39 Now listening on: http://localhost:5033
INFO  11:33:39 Application started. Press Ctrl+C to shut down.
INFO  11:33:39 Hosting environment: Development
INFO  11:33:39 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
WARN  11:33:45 Failed to determine the https port for redirect.
INFO  11:33:45 Start processing HTTP request POST https://api.openai.com/v1/chat/completions
INFO  11:33:45 Sending HTTP request POST https://api.openai.com/v1/chat/completions
INFO  11:33:46 Received HTTP response headers after 645.0414ms - 429
INFO  11:33:46 End processing HTTP request after 692.4863ms - 429
ERROR 11:33:47 An unhandled exception has occurred while executing the request.
System.Exception: An error occurred while calling the OpenAI API.
 ---> System.Net.Http.HttpRequestException: Response status code does not indicate success: 429 (Too Many Requests).
   at System.Net.Http.HttpResponseMessage.EnsureSuccessStatusCode()
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 41
   --- End of inner exception stack trace ---
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 51
   at PharmacyManagementApi.Controllers.MedicineDescriptorController.GetChatResponse(String message) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Controllers\MedicineDescriptorController.cs:line 21
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
INFO  11:45:30 Now listening on: http://localhost:5033
INFO  11:45:30 Application started. Press Ctrl+C to shut down.
INFO  11:45:30 Hosting environment: Development
INFO  11:45:30 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
WARN  11:45:57 Failed to determine the https port for redirect.
INFO  11:45:57 Start processing HTTP request POST https://api.openai.com/v1/chat/completions
INFO  11:45:57 Sending HTTP request POST https://api.openai.com/v1/chat/completions
INFO  11:45:57 Received HTTP response headers after 628.518ms - 429
INFO  11:45:57 End processing HTTP request after 678.8021ms - 429
ERROR 11:45:58 An unhandled exception has occurred while executing the request.
System.Exception: An error occurred while calling the OpenAI API.
 ---> System.Net.Http.HttpRequestException: Response status code does not indicate success: 429 (Too Many Requests).
   at System.Net.Http.HttpResponseMessage.EnsureSuccessStatusCode()
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 41
   --- End of inner exception stack trace ---
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 51
   at PharmacyManagementApi.Controllers.MedicineDescriptorController.GetChatResponse(String message) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Controllers\MedicineDescriptorController.cs:line 21
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
INFO  11:47:31 Start processing HTTP request POST https://api.openai.com/v1/chat/completions
INFO  11:47:31 Sending HTTP request POST https://api.openai.com/v1/chat/completions
INFO  11:47:31 Received HTTP response headers after 423.977ms - 429
INFO  11:47:31 End processing HTTP request after 447.9777ms - 429
ERROR 11:47:32 An unhandled exception has occurred while executing the request.
System.Exception: An error occurred while calling the OpenAI API.
 ---> System.Net.Http.HttpRequestException: Response status code does not indicate success: 429 (Too Many Requests).
   at System.Net.Http.HttpResponseMessage.EnsureSuccessStatusCode()
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 41
   --- End of inner exception stack trace ---
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 51
   at PharmacyManagementApi.Controllers.MedicineDescriptorController.GetChatResponse(String message) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Controllers\MedicineDescriptorController.cs:line 21
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
INFO  11:49:03 Now listening on: http://localhost:5033
INFO  11:49:03 Application started. Press Ctrl+C to shut down.
INFO  11:49:03 Hosting environment: Development
INFO  11:49:03 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
WARN  11:49:10 Failed to determine the https port for redirect.
INFO  11:49:11 Start processing HTTP request POST https://api.openai.com/v1/chat/completions
INFO  11:49:11 Sending HTTP request POST https://api.openai.com/v1/chat/completions
INFO  11:49:11 Received HTTP response headers after 595.7579ms - 429
INFO  11:49:11 End processing HTTP request after 641.4959ms - 429
ERROR 11:49:12 An unhandled exception has occurred while executing the request.
System.Exception: An error occurred while calling the OpenAI API.
 ---> System.Net.Http.HttpRequestException: Response status code does not indicate success: 429 (Too Many Requests).
   at System.Net.Http.HttpResponseMessage.EnsureSuccessStatusCode()
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 41
   --- End of inner exception stack trace ---
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 51
   at PharmacyManagementApi.Controllers.MedicineDescriptorController.GetChatResponse(String message) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Controllers\MedicineDescriptorController.cs:line 21
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
INFO  11:52:15 Now listening on: http://localhost:5033
INFO  11:52:15 Application started. Press Ctrl+C to shut down.
INFO  11:52:15 Hosting environment: Development
INFO  11:52:15 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
WARN  11:52:30 Failed to determine the https port for redirect.
INFO  11:52:31 Sending request to OpenAI API...
INFO  11:52:31 Start processing HTTP request POST https://api.openai.com/v1/chat/completions
INFO  11:52:31 Sending HTTP request POST https://api.openai.com/v1/chat/completions
INFO  11:52:31 Received HTTP response headers after 604.6522ms - 429
INFO  11:52:31 End processing HTTP request after 646.8264ms - 429
ERROR 11:52:32 HttpRequestException: Response status code does not indicate success: 429 (Too Many Requests).
ERROR 11:52:32 An unhandled exception has occurred while executing the request.
System.Exception: An error occurred while calling the OpenAI API.
 ---> System.Net.Http.HttpRequestException: Response status code does not indicate success: 429 (Too Many Requests).
   at System.Net.Http.HttpResponseMessage.EnsureSuccessStatusCode()
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 52
   --- End of inner exception stack trace ---
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 62
   at PharmacyManagementApi.Controllers.MedicineDescriptorController.GetChatResponse(String message) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Controllers\MedicineDescriptorController.cs:line 21
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
INFO  11:56:51 Now listening on: http://localhost:5033
INFO  11:56:51 Application started. Press Ctrl+C to shut down.
INFO  11:56:51 Hosting environment: Development
INFO  11:56:51 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
WARN  11:57:02 Failed to determine the https port for redirect.
INFO  11:57:03 Sending request to OpenAI API...
INFO  11:57:03 Start processing HTTP request POST https://api.openai.com/v1/chat/completions
INFO  11:57:03 Sending HTTP request POST https://api.openai.com/v1/chat/completions
INFO  11:57:03 Received HTTP response headers after 639.9817ms - 429
INFO  11:57:03 End processing HTTP request after 685.559ms - 429
ERROR 11:57:04 HttpRequestException: Response status code does not indicate success: 429 (Too Many Requests).
ERROR 11:57:04 An unhandled exception has occurred while executing the request.
System.Exception: An error occurred while calling the OpenAI API.
 ---> System.Net.Http.HttpRequestException: Response status code does not indicate success: 429 (Too Many Requests).
   at System.Net.Http.HttpResponseMessage.EnsureSuccessStatusCode()
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 52
   --- End of inner exception stack trace ---
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 62
   at PharmacyManagementApi.Controllers.MedicineDescriptorController.GetChatResponse(String message) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Controllers\MedicineDescriptorController.cs:line 21
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
INFO  12:00:15 Fetching medications for customer 2
INFO  12:00:15 Fetching medications for customer 2
INFO  12:00:17 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  12:00:17 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
WARN  12:00:18 Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
INFO  12:00:19 Executed DbCommand (242ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [t3].[MedicationId], [t3].[CustomerId], [t3].[MedicationName], [t3].[MedicationItemId], [t3].[MedicationId0], [t3].[MedicineId], [t3].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN [Carts] AS [c0] ON [t].[CustomerId] = [c0].[CustomerId]
LEFT JOIN (
    SELECT [m1].[MedicationId], [m1].[CustomerId], [m1].[MedicationName], [m2].[MedicationItemId], [m2].[MedicationId] AS [MedicationId0], [m2].[MedicineId], [m2].[Quantity]
    FROM [Medications] AS [m1]
    LEFT JOIN [MedicationItems] AS [m2] ON [m1].[MedicationId] = [m2].[MedicationId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [c0].[CartId], [t3].[MedicationId]
INFO  12:00:19 Executed DbCommand (242ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [t3].[MedicationId], [t3].[CustomerId], [t3].[MedicationName], [t3].[MedicationItemId], [t3].[MedicationId0], [t3].[MedicineId], [t3].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN [Carts] AS [c0] ON [t].[CustomerId] = [c0].[CustomerId]
LEFT JOIN (
    SELECT [m1].[MedicationId], [m1].[CustomerId], [m1].[MedicationName], [m2].[MedicationItemId], [m2].[MedicationId] AS [MedicationId0], [m2].[MedicineId], [m2].[Quantity]
    FROM [Medications] AS [m1]
    LEFT JOIN [MedicationItems] AS [m2] ON [m1].[MedicationId] = [m2].[MedicationId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [c0].[CartId], [t3].[MedicationId]
INFO  12:00:19 1 medications found for customer 2
INFO  12:00:19 1 medications found for customer 2
INFO  12:00:33 Sending request to OpenAI API...
INFO  12:00:33 Start processing HTTP request POST https://api.openai.com/v1/chat/completions
INFO  12:00:33 Sending HTTP request POST https://api.openai.com/v1/chat/completions
INFO  12:00:33 Received HTTP response headers after 455.8902ms - 429
INFO  12:00:34 End processing HTTP request after 470.0063ms - 429
ERROR 12:00:34 HttpRequestException: Response status code does not indicate success: 429 (Too Many Requests).
ERROR 12:00:34 An unhandled exception has occurred while executing the request.
System.Exception: An error occurred while calling the OpenAI API.
 ---> System.Net.Http.HttpRequestException: Response status code does not indicate success: 429 (Too Many Requests).
   at System.Net.Http.HttpResponseMessage.EnsureSuccessStatusCode()
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 52
   --- End of inner exception stack trace ---
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 62
   at PharmacyManagementApi.Controllers.MedicineDescriptorController.GetChatResponse(String message) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Controllers\MedicineDescriptorController.cs:line 21
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
INFO  12:12:18 Now listening on: http://localhost:5033
INFO  12:12:18 Application started. Press Ctrl+C to shut down.
INFO  12:12:18 Hosting environment: Development
INFO  12:12:18 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
WARN  12:12:35 Failed to determine the https port for redirect.
INFO  12:12:35 Sending request to OpenAI API...
INFO  12:12:35 Start processing HTTP request POST https://api.openai.com/v1/chat/completions
INFO  12:12:35 Sending HTTP request POST https://api.openai.com/v1/chat/completions
INFO  12:12:36 Received HTTP response headers after 680.7254ms - 429
INFO  12:12:36 End processing HTTP request after 724.4411ms - 429
ERROR 12:12:36 HttpRequestException: Response status code does not indicate success: 429 (Too Many Requests).
ERROR 12:12:37 An unhandled exception has occurred while executing the request.
System.Exception: An error occurred while calling the OpenAI API.
 ---> System.Net.Http.HttpRequestException: Response status code does not indicate success: 429 (Too Many Requests).
   at System.Net.Http.HttpResponseMessage.EnsureSuccessStatusCode()
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 52
   --- End of inner exception stack trace ---
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 62
   at PharmacyManagementApi.Controllers.MedicineDescriptorController.GetChatResponse(String message) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Controllers\MedicineDescriptorController.cs:line 21
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
INFO  12:14:56 Now listening on: http://localhost:5033
INFO  12:14:56 Application started. Press Ctrl+C to shut down.
INFO  12:14:56 Hosting environment: Development
INFO  12:14:56 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
WARN  12:15:06 Failed to determine the https port for redirect.
INFO  12:15:06 Sending request to OpenAI API...
INFO  12:15:06 Start processing HTTP request POST https://api.openai.com/v1/chat/completions
INFO  12:15:06 Sending HTTP request POST https://api.openai.com/v1/chat/completions
INFO  12:15:07 Received HTTP response headers after 651.8792ms - 429
INFO  12:15:07 End processing HTTP request after 698.7039ms - 429
ERROR 12:15:07 HttpRequestException: Response status code does not indicate success: 429 (Too Many Requests).
ERROR 12:15:08 An unhandled exception has occurred while executing the request.
System.Exception: An error occurred while calling the OpenAI API.
 ---> System.Net.Http.HttpRequestException: Response status code does not indicate success: 429 (Too Many Requests).
   at System.Net.Http.HttpResponseMessage.EnsureSuccessStatusCode()
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 52
   --- End of inner exception stack trace ---
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 62
   at PharmacyManagementApi.Controllers.MedicineDescriptorController.GetChatResponse(String message) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Controllers\MedicineDescriptorController.cs:line 21
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
INFO  12:16:20 Now listening on: http://localhost:5033
INFO  12:16:20 Application started. Press Ctrl+C to shut down.
INFO  12:16:20 Hosting environment: Development
INFO  12:16:20 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
INFO  12:16:56 Now listening on: http://localhost:5033
INFO  12:16:56 Application started. Press Ctrl+C to shut down.
INFO  12:16:56 Hosting environment: Development
INFO  12:16:56 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
INFO  12:19:19 Now listening on: http://localhost:5033
INFO  12:19:19 Application started. Press Ctrl+C to shut down.
INFO  12:19:19 Hosting environment: Development
INFO  12:19:19 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
WARN  12:19:30 Failed to determine the https port for redirect.
INFO  12:19:30 Sending request to OpenAI API...
INFO  12:19:30 Start processing HTTP request POST https://api.openai.com/v1/chat/completions
INFO  12:19:30 Sending HTTP request POST https://api.openai.com/v1/chat/completions
INFO  12:19:32 Received HTTP response headers after 1498.0458ms - 200
INFO  12:19:32 End processing HTTP request after 1539.4188ms - 200
INFO  12:19:32 Received response from OpenAI API.
INFO  12:20:16 Sending request to OpenAI API...
INFO  12:20:16 Start processing HTTP request POST https://api.openai.com/v1/chat/completions
INFO  12:20:16 Sending HTTP request POST https://api.openai.com/v1/chat/completions
INFO  12:20:18 Received HTTP response headers after 2093.6787ms - 200
INFO  12:20:18 End processing HTTP request after 2105.7537ms - 200
INFO  12:20:18 Received response from OpenAI API.
INFO  12:22:04 Removing cart item with ID: 2
INFO  12:22:05 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  12:22:06 Executed DbCommand (100ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CartId], [c].[Cost], [c].[CustomerId], [c].[Date], [c].[MedicineId], [c].[Quantity], [c].[TotalCost]
FROM [Carts] AS [c]
WHERE [c].[CartId] = @__key_0
ERROR 12:22:07 Error removing cart item with ID: 2
PharmacyManagementApi.CustomException.NoCartFoundException: No Cart found with given id 2
   at PharmacyManagementApi.Repositories.General_Repositories.CartRepository.Get(Int32 key) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Repositories\General_Repositories\CartRepository.cs:line 65
   at PharmacyManagementApi.Services.CartService.RemoveFromCart(Int32 cartId) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\CartService.cs:line 227
INFO  12:26:39 Fetching orders for customer 3
INFO  12:26:39 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
WARN  12:26:40 Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
INFO  12:26:40 Executed DbCommand (33ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [t3].[MedicationId], [t3].[CustomerId], [t3].[MedicationName], [t3].[MedicationItemId], [t3].[MedicationId0], [t3].[MedicineId], [t3].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN [Carts] AS [c0] ON [t].[CustomerId] = [c0].[CustomerId]
LEFT JOIN (
    SELECT [m1].[MedicationId], [m1].[CustomerId], [m1].[MedicationName], [m2].[MedicationItemId], [m2].[MedicationId] AS [MedicationId0], [m2].[MedicineId], [m2].[Quantity]
    FROM [Medications] AS [m1]
    LEFT JOIN [MedicationItems] AS [m2] ON [m1].[MedicationId] = [m2].[MedicationId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [c0].[CartId], [t3].[MedicationId]
INFO  12:26:40 2 orders found for customer 3
INFO  12:27:16 Fetching orders for customer 3
INFO  12:27:16 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  12:27:16 Executed DbCommand (24ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [t3].[MedicationId], [t3].[CustomerId], [t3].[MedicationName], [t3].[MedicationItemId], [t3].[MedicationId0], [t3].[MedicineId], [t3].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN [Carts] AS [c0] ON [t].[CustomerId] = [c0].[CustomerId]
LEFT JOIN (
    SELECT [m1].[MedicationId], [m1].[CustomerId], [m1].[MedicationName], [m2].[MedicationItemId], [m2].[MedicationId] AS [MedicationId0], [m2].[MedicineId], [m2].[Quantity]
    FROM [Medications] AS [m1]
    LEFT JOIN [MedicationItems] AS [m2] ON [m1].[MedicationId] = [m2].[MedicationId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [c0].[CartId], [t3].[MedicationId]
INFO  12:27:16 2 orders found for customer 3
INFO  12:27:34 Fetching orders for customer 2
INFO  12:27:34 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  12:27:34 Executed DbCommand (7ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [t3].[MedicationId], [t3].[CustomerId], [t3].[MedicationName], [t3].[MedicationItemId], [t3].[MedicationId0], [t3].[MedicineId], [t3].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN [Carts] AS [c0] ON [t].[CustomerId] = [c0].[CustomerId]
LEFT JOIN (
    SELECT [m1].[MedicationId], [m1].[CustomerId], [m1].[MedicationName], [m2].[MedicationItemId], [m2].[MedicationId] AS [MedicationId0], [m2].[MedicineId], [m2].[Quantity]
    FROM [Medications] AS [m1]
    LEFT JOIN [MedicationItems] AS [m2] ON [m1].[MedicationId] = [m2].[MedicationId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [c0].[CartId], [t3].[MedicationId]
INFO  12:27:34 1 orders found for customer 2
INFO  02:04:24 Now listening on: http://localhost:5033
INFO  02:04:24 Application started. Press Ctrl+C to shut down.
INFO  02:04:24 Hosting environment: Development
INFO  02:04:24 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
WARN  02:05:13 Failed to determine the https port for redirect.
INFO  02:05:13 Sending request to OpenAI API...
INFO  02:05:13 Start processing HTTP request POST https://api.openai.com/v1/chat/completions
INFO  02:05:13 Sending HTTP request POST https://api.openai.com/v1/chat/completions
INFO  02:05:14 Received HTTP response headers after 745.9546ms - 400
INFO  02:05:14 End processing HTTP request after 791.153ms - 400
ERROR 02:05:14 HttpRequestException: Response status code does not indicate success: 400 (Bad Request).
ERROR 02:05:15 An unhandled exception has occurred while executing the request.
System.Exception: An error occurred while calling the OpenAI API.
 ---> System.Net.Http.HttpRequestException: Response status code does not indicate success: 400 (Bad Request).
   at System.Net.Http.HttpResponseMessage.EnsureSuccessStatusCode()
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 52
   --- End of inner exception stack trace ---
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 62
   at PharmacyManagementApi.Controllers.MedicineDescriptorController.GetChatResponse(String message) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Controllers\MedicineDescriptorController.cs:line 21
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
INFO  02:05:42 Sending request to OpenAI API...
INFO  02:05:42 Start processing HTTP request POST https://api.openai.com/v1/chat/completions
INFO  02:05:42 Sending HTTP request POST https://api.openai.com/v1/chat/completions
INFO  02:05:42 Received HTTP response headers after 460.6724ms - 400
INFO  02:05:42 End processing HTTP request after 472.3766ms - 400
ERROR 02:05:42 HttpRequestException: Response status code does not indicate success: 400 (Bad Request).
ERROR 02:05:43 An unhandled exception has occurred while executing the request.
System.Exception: An error occurred while calling the OpenAI API.
 ---> System.Net.Http.HttpRequestException: Response status code does not indicate success: 400 (Bad Request).
   at System.Net.Http.HttpResponseMessage.EnsureSuccessStatusCode()
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 52
   --- End of inner exception stack trace ---
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 62
   at PharmacyManagementApi.Controllers.MedicineDescriptorController.GetChatResponse(String message) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Controllers\MedicineDescriptorController.cs:line 21
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
INFO  02:07:30 Sending request to OpenAI API...
INFO  02:07:30 Start processing HTTP request POST https://api.openai.com/v1/chat/completions
INFO  02:07:30 Sending HTTP request POST https://api.openai.com/v1/chat/completions
INFO  02:07:30 Received HTTP response headers after 482.9761ms - 400
INFO  02:07:30 End processing HTTP request after 493.3272ms - 400
ERROR 02:07:30 HttpRequestException: Response status code does not indicate success: 400 (Bad Request).
ERROR 02:07:31 An unhandled exception has occurred while executing the request.
System.Exception: An error occurred while calling the OpenAI API.
 ---> System.Net.Http.HttpRequestException: Response status code does not indicate success: 400 (Bad Request).
   at System.Net.Http.HttpResponseMessage.EnsureSuccessStatusCode()
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 52
   --- End of inner exception stack trace ---
   at PharmacyManagementApi.Services.MedicineDescriptorAIService.GetSymptomAnalysisAsync(String symptoms) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicineDescriptorAIService.cs:line 62
   at PharmacyManagementApi.Controllers.MedicineDescriptorController.GetChatResponse(String message) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Controllers\MedicineDescriptorController.cs:line 21
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
INFO  02:10:26 Now listening on: http://localhost:5033
INFO  02:10:26 Application started. Press Ctrl+C to shut down.
INFO  02:10:26 Hosting environment: Development
INFO  02:10:26 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
WARN  02:10:51 Failed to determine the https port for redirect.
INFO  02:10:51 Sending request to OpenAI API...
INFO  02:10:51 Start processing HTTP request POST https://api.openai.com/v1/chat/completions
INFO  02:10:51 Sending HTTP request POST https://api.openai.com/v1/chat/completions
INFO  02:10:54 Received HTTP response headers after 2581.3245ms - 200
INFO  02:10:54 End processing HTTP request after 2625.0908ms - 200
INFO  02:10:54 Received response from OpenAI API.
INFO  02:11:56 Sending request to OpenAI API...
INFO  02:11:56 Start processing HTTP request POST https://api.openai.com/v1/chat/completions
INFO  02:11:56 Sending HTTP request POST https://api.openai.com/v1/chat/completions
INFO  02:11:58 Received HTTP response headers after 2348.5007ms - 200
INFO  02:11:58 End processing HTTP request after 2360.155ms - 200
INFO  02:11:58 Received response from OpenAI API.
INFO  02:21:18 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  02:21:19 Executed DbCommand (167ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [u].[Email], [u].[AccountStatus], [u].[BankBalance], [u].[HasedPassword], [u].[Password], [u].[UserId]
FROM [UserCredentials] AS [u]
WHERE [u].[Email] = @__key_0
INFO  02:21:19 Executed DbCommand (9ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
FROM [Customers] AS [c]
WHERE [c].[CustomerId] = @__key_0
INFO  02:21:19 Generating token for customer 1
INFO  02:21:20 Token generated successfully for customer 1
INFO  02:22:33 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  02:22:33 Executed DbCommand (3ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [u].[Email], [u].[AccountStatus], [u].[BankBalance], [u].[HasedPassword], [u].[Password], [u].[UserId]
FROM [UserCredentials] AS [u]
WHERE [u].[Email] = @__key_0
INFO  02:22:33 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
FROM [Customers] AS [c]
WHERE [c].[CustomerId] = @__key_0
INFO  02:22:33 Generating token for customer 1
INFO  02:22:33 Token generated successfully for customer 1
INFO  02:23:20 Fetching all pending orders.
INFO  02:23:20 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  02:23:20 Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [o].[OrderDetailId], [o].[Cost], [o].[DeliveryStatus], [o].[MedicineId], [o].[OrderId], [o].[Quantity], [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase]
FROM [OrderDetails] AS [o]
INNER JOIN [Medicines] AS [m] ON [o].[MedicineId] = [m].[MedicineId]
INFO  02:23:20 Fetched 7 pending orders.
INFO  02:46:23 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  02:46:35 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  02:46:36 Executed DbCommand (484ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [PharmacyManager];
INFO  02:46:36 Executed DbCommand (99ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [PharmacyManager] SET READ_COMMITTED_SNAPSHOT ON;
END;
INFO  02:46:36 Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
INFO  02:46:36 Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
INFO  02:46:36 Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
INFO  02:46:36 Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
INFO  02:46:36 Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
INFO  02:46:36 Applying migration '20240530091624_init'.
INFO  02:46:36 Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Categories] (
    [CategoryId] int NOT NULL IDENTITY,
    [CategoryName] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Categories] PRIMARY KEY ([CategoryId])
);
INFO  02:46:36 Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Customers] (
    [CustomerId] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Email] nvarchar(450) NOT NULL,
    [Phone] nvarchar(max) NOT NULL,
    [Address] nvarchar(max) NOT NULL,
    [Role] nvarchar(max) NOT NULL,
    [IsSubcribed] bit NOT NULL,
    CONSTRAINT [PK_Customers] PRIMARY KEY ([CustomerId])
);
INFO  02:46:36 Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Purchases] (
    [PurchaseId] int NOT NULL IDENTITY,
    [PurchaseDate] datetime2 NOT NULL,
    [TotalAmount] float NULL,
    CONSTRAINT [PK_Purchases] PRIMARY KEY ([PurchaseId])
);
INFO  02:46:36 Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Vendors] (
    [VendorId] int NOT NULL IDENTITY,
    [VendorName] nvarchar(max) NOT NULL,
    [Address] nvarchar(max) NOT NULL,
    [Phone] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Vendors] PRIMARY KEY ([VendorId])
);
INFO  02:46:36 Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Medicines] (
    [MedicineId] int NOT NULL IDENTITY,
    [MedicineName] nvarchar(max) NOT NULL,
    [CategoryId] int NOT NULL,
    [CurrentQuantity] int NOT NULL,
    [FeedbackSum] float NOT NULL,
    [FeedbackCount] float NOT NULL,
    [SellingPrice] float NOT NULL,
    [TotalNumberOfPurchase] int NOT NULL,
    CONSTRAINT [PK_Medicines] PRIMARY KEY ([MedicineId]),
    CONSTRAINT [FK_Medicines_Categories_CategoryId] FOREIGN KEY ([CategoryId]) REFERENCES [Categories] ([CategoryId]) ON DELETE NO ACTION
);
INFO  02:46:36 Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Medications] (
    [MedicationId] int NOT NULL IDENTITY,
    [MedicationName] nvarchar(max) NOT NULL,
    [CustomerId] int NOT NULL,
    CONSTRAINT [PK_Medications] PRIMARY KEY ([MedicationId]),
    CONSTRAINT [FK_Medications_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([CustomerId]) ON DELETE NO ACTION
);
INFO  02:46:36 Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Orders] (
    [OrderId] int NOT NULL IDENTITY,
    [CustomerId] int NOT NULL,
    [PaidAmount] float NOT NULL,
    [TotalAmount] float NOT NULL,
    [Discount] real NOT NULL,
    [ShipmentCost] float NOT NULL,
    CONSTRAINT [PK_Orders] PRIMARY KEY ([OrderId]),
    CONSTRAINT [FK_Orders_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([CustomerId]) ON DELETE NO ACTION
);
INFO  02:46:36 Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [UserCredentials] (
    [Email] nvarchar(450) NOT NULL,
    [UserId] int NOT NULL,
    [Password] varbinary(max) NOT NULL,
    [HasedPassword] varbinary(max) NOT NULL,
    [BankBalance] int NOT NULL,
    [AccountStatus] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_UserCredentials] PRIMARY KEY ([Email]),
    CONSTRAINT [FK_UserCredentials_Customers_UserId] FOREIGN KEY ([UserId]) REFERENCES [Customers] ([CustomerId]) ON DELETE NO ACTION
);
INFO  02:46:36 Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Carts] (
    [CartId] int NOT NULL IDENTITY,
    [CustomerId] int NOT NULL,
    [MedicineId] int NOT NULL,
    [Quantity] int NOT NULL,
    [Cost] float NOT NULL,
    [TotalCost] float NOT NULL,
    [Date] datetime2 NOT NULL,
    CONSTRAINT [PK_Carts] PRIMARY KEY ([CartId]),
    CONSTRAINT [FK_Carts_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([CustomerId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Carts_Medicines_MedicineId] FOREIGN KEY ([MedicineId]) REFERENCES [Medicines] ([MedicineId]) ON DELETE NO ACTION
);
INFO  02:46:36 Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Feedbacks] (
    [FeedbackId] int NOT NULL IDENTITY,
    [FeedbackMessage] nvarchar(max) NOT NULL,
    [MedicineId] int NOT NULL,
    [CustomerId] int NOT NULL,
    [Rating] float NOT NULL,
    CONSTRAINT [PK_Feedbacks] PRIMARY KEY ([FeedbackId]),
    CONSTRAINT [FK_Feedbacks_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([CustomerId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Feedbacks_Medicines_MedicineId] FOREIGN KEY ([MedicineId]) REFERENCES [Medicines] ([MedicineId]) ON DELETE NO ACTION
);
INFO  02:46:36 Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [PurchaseDetails] (
    [PurchaseDetailId] int NOT NULL IDENTITY,
    [PurchaseId] int NOT NULL,
    [MedicineId] int NOT NULL,
    [Amount] int NOT NULL,
    [Quantity] int NOT NULL,
    [TotalSum] int NOT NULL,
    [VendorId] int NOT NULL,
    [ExpiryDate] datetime2 NOT NULL,
    [StorageRequirement] nvarchar(max) NOT NULL,
    [DosageForm] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_PurchaseDetails] PRIMARY KEY ([PurchaseDetailId]),
    CONSTRAINT [FK_PurchaseDetails_Medicines_MedicineId] FOREIGN KEY ([MedicineId]) REFERENCES [Medicines] ([MedicineId]) ON DELETE CASCADE,
    CONSTRAINT [FK_PurchaseDetails_Purchases_PurchaseId] FOREIGN KEY ([PurchaseId]) REFERENCES [Purchases] ([PurchaseId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_PurchaseDetails_Vendors_VendorId] FOREIGN KEY ([VendorId]) REFERENCES [Vendors] ([VendorId]) ON DELETE CASCADE
);
INFO  02:46:36 Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [MedicationItems] (
    [MedicationItemId] int NOT NULL IDENTITY,
    [MedicineId] int NOT NULL,
    [MedicationId] int NOT NULL,
    [Quantity] int NOT NULL,
    CONSTRAINT [PK_MedicationItems] PRIMARY KEY ([MedicationItemId]),
    CONSTRAINT [FK_MedicationItems_Medications_MedicationId] FOREIGN KEY ([MedicationId]) REFERENCES [Medications] ([MedicationId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_MedicationItems_Medicines_MedicineId] FOREIGN KEY ([MedicineId]) REFERENCES [Medicines] ([MedicineId]) ON DELETE NO ACTION
);
INFO  02:46:37 Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [OrderDetails] (
    [OrderDetailId] int NOT NULL IDENTITY,
    [OrderId] int NOT NULL,
    [MedicineId] int NOT NULL,
    [Quantity] int NOT NULL,
    [Cost] float NOT NULL,
    [DeliveryStatus] bit NOT NULL,
    CONSTRAINT [PK_OrderDetails] PRIMARY KEY ([OrderDetailId]),
    CONSTRAINT [FK_OrderDetails_Medicines_MedicineId] FOREIGN KEY ([MedicineId]) REFERENCES [Medicines] ([MedicineId]) ON DELETE CASCADE,
    CONSTRAINT [FK_OrderDetails_Orders_OrderId] FOREIGN KEY ([OrderId]) REFERENCES [Orders] ([OrderId]) ON DELETE NO ACTION
);
INFO  02:46:37 Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Stocks] (
    [StockId] int NOT NULL IDENTITY,
    [PurchaseDetailId] int NOT NULL,
    [MedicineId] int NOT NULL,
    [Quantity] int NOT NULL,
    [ExpiryDate] datetime2 NOT NULL,
    [SellingPrice] float NOT NULL,
    CONSTRAINT [PK_Stocks] PRIMARY KEY ([StockId]),
    CONSTRAINT [FK_Stocks_Medicines_MedicineId] FOREIGN KEY ([MedicineId]) REFERENCES [Medicines] ([MedicineId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Stocks_PurchaseDetails_PurchaseDetailId] FOREIGN KEY ([PurchaseDetailId]) REFERENCES [PurchaseDetails] ([PurchaseDetailId]) ON DELETE NO ACTION
);
INFO  02:46:37 Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [DeliveryDetails] (
    [DeliveryId] int NOT NULL IDENTITY,
    [CustomerId] int NOT NULL,
    [OrderDetailId] int NOT NULL,
    [MedicineId] int NOT NULL,
    [DeliveryDate] datetime2 NOT NULL,
    [Quantity] int NOT NULL,
    [ExpiryDate] datetime2 NOT NULL,
    CONSTRAINT [PK_DeliveryDetails] PRIMARY KEY ([DeliveryId]),
    CONSTRAINT [FK_DeliveryDetails_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([CustomerId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_DeliveryDetails_Medicines_MedicineId] FOREIGN KEY ([MedicineId]) REFERENCES [Medicines] ([MedicineId]) ON DELETE CASCADE,
    CONSTRAINT [FK_DeliveryDetails_OrderDetails_OrderDetailId] FOREIGN KEY ([OrderDetailId]) REFERENCES [OrderDetails] ([OrderDetailId]) ON DELETE NO ACTION
);
INFO  02:46:37 Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Carts_CustomerId] ON [Carts] ([CustomerId]);
INFO  02:46:37 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Carts_MedicineId] ON [Carts] ([MedicineId]);
INFO  02:46:37 Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Customers_Email] ON [Customers] ([Email]);
INFO  02:46:37 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_DeliveryDetails_CustomerId] ON [DeliveryDetails] ([CustomerId]);
INFO  02:46:37 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_DeliveryDetails_MedicineId] ON [DeliveryDetails] ([MedicineId]);
INFO  02:46:37 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_DeliveryDetails_OrderDetailId] ON [DeliveryDetails] ([OrderDetailId]);
INFO  02:46:37 Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Feedbacks_CustomerId] ON [Feedbacks] ([CustomerId]);
INFO  02:46:37 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Feedbacks_MedicineId] ON [Feedbacks] ([MedicineId]);
INFO  02:46:37 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_MedicationItems_MedicationId] ON [MedicationItems] ([MedicationId]);
INFO  02:46:37 Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_MedicationItems_MedicineId] ON [MedicationItems] ([MedicineId]);
INFO  02:46:37 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Medications_CustomerId] ON [Medications] ([CustomerId]);
INFO  02:46:37 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Medicines_CategoryId] ON [Medicines] ([CategoryId]);
INFO  02:46:37 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_OrderDetails_MedicineId] ON [OrderDetails] ([MedicineId]);
INFO  02:46:37 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_OrderDetails_OrderId] ON [OrderDetails] ([OrderId]);
INFO  02:46:37 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Orders_CustomerId] ON [Orders] ([CustomerId]);
INFO  02:46:37 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_PurchaseDetails_MedicineId] ON [PurchaseDetails] ([MedicineId]);
INFO  02:46:37 Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_PurchaseDetails_PurchaseId] ON [PurchaseDetails] ([PurchaseId]);
INFO  02:46:37 Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_PurchaseDetails_VendorId] ON [PurchaseDetails] ([VendorId]);
INFO  02:46:37 Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Stocks_MedicineId] ON [Stocks] ([MedicineId]);
INFO  02:46:37 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Stocks_PurchaseDetailId] ON [Stocks] ([PurchaseDetailId]);
INFO  02:46:37 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_UserCredentials_UserId] ON [UserCredentials] ([UserId]);
INFO  02:46:37 Executed DbCommand (33ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20240530091624_init', N'6.0.30');
INFO  02:47:11 Now listening on: http://localhost:5033
INFO  02:47:11 Application started. Press Ctrl+C to shut down.
INFO  02:47:11 Hosting environment: Development
INFO  02:47:11 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
WARN  02:47:34 Failed to determine the https port for redirect.
INFO  02:47:34 Sending request to OpenAI API...
INFO  02:47:34 Start processing HTTP request POST https://api.openai.com/v1/chat/completions
INFO  02:47:34 Sending HTTP request POST https://api.openai.com/v1/chat/completions
INFO  02:47:37 Received HTTP response headers after 2918.6155ms - 200
INFO  02:47:37 End processing HTTP request after 2968.619ms - 200
INFO  02:47:37 Received response from OpenAI API.
INFO  02:48:51 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  02:48:52 Executed DbCommand (153ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 450), @p2='?' (DbType = Boolean), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Customers] ([Address], [Email], [IsSubcribed], [Name], [Phone], [Role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [CustomerId]
FROM [Customers]
WHERE @@ROWCOUNT = 1 AND [CustomerId] = scope_identity();
INFO  02:48:53 Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (Size = 8000) (DbType = Binary), @p4='?' (Size = 8000) (DbType = Binary), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UserCredentials] ([Email], [AccountStatus], [BankBalance], [HasedPassword], [Password], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
INFO  02:49:14 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  02:49:15 Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 450), @p2='?' (DbType = Boolean), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Customers] ([Address], [Email], [IsSubcribed], [Name], [Phone], [Role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [CustomerId]
FROM [Customers]
WHERE @@ROWCOUNT = 1 AND [CustomerId] = scope_identity();
INFO  02:49:15 Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (Size = 8000) (DbType = Binary), @p4='?' (Size = 8000) (DbType = Binary), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UserCredentials] ([Email], [AccountStatus], [BankBalance], [HasedPassword], [Password], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
INFO  02:50:02 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  02:50:02 Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 450), @p2='?' (DbType = Boolean), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Customers] ([Address], [Email], [IsSubcribed], [Name], [Phone], [Role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [CustomerId]
FROM [Customers]
WHERE @@ROWCOUNT = 1 AND [CustomerId] = scope_identity();
INFO  02:50:02 Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (Size = 8000) (DbType = Binary), @p4='?' (Size = 8000) (DbType = Binary), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UserCredentials] ([Email], [AccountStatus], [BankBalance], [HasedPassword], [Password], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
INFO  02:50:14 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  02:50:15 Executed DbCommand (4ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [u].[Email], [u].[AccountStatus], [u].[BankBalance], [u].[HasedPassword], [u].[Password], [u].[UserId]
FROM [UserCredentials] AS [u]
WHERE [u].[Email] = @__key_0
INFO  02:50:15 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
FROM [Customers] AS [c]
WHERE [c].[CustomerId] = @__key_0
INFO  02:50:15 Generating token for customer 1
INFO  02:50:15 Token generated successfully for customer 1
INFO  02:50:26 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  02:50:26 Executed DbCommand (3ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [u].[Email], [u].[AccountStatus], [u].[BankBalance], [u].[HasedPassword], [u].[Password], [u].[UserId]
FROM [UserCredentials] AS [u]
WHERE [u].[Email] = @__key_0
INFO  02:50:26 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
FROM [Customers] AS [c]
WHERE [c].[CustomerId] = @__key_0
INFO  02:50:26 Generating token for customer 2
INFO  02:50:26 Token generated successfully for customer 2
INFO  02:50:34 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  02:50:34 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [u].[Email], [u].[AccountStatus], [u].[BankBalance], [u].[HasedPassword], [u].[Password], [u].[UserId]
FROM [UserCredentials] AS [u]
WHERE [u].[Email] = @__key_0
INFO  02:50:34 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
FROM [Customers] AS [c]
WHERE [c].[CustomerId] = @__key_0
INFO  02:50:34 Generating token for customer 3
INFO  02:50:34 Token generated successfully for customer 3
INFO  03:45:14 Now listening on: http://localhost:5033
INFO  03:45:14 Application started. Press Ctrl+C to shut down.
INFO  03:45:14 Hosting environment: Development
INFO  03:45:14 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
WARN  03:45:29 Failed to determine the https port for redirect.
INFO  03:45:30 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
WARN  03:45:31 Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
INFO  03:45:31 Executed DbCommand (144ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [t3].[MedicationId], [t3].[CustomerId], [t3].[MedicationName], [t3].[MedicationItemId], [t3].[MedicationId0], [t3].[MedicineId], [t3].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN [Carts] AS [c0] ON [t].[CustomerId] = [c0].[CustomerId]
LEFT JOIN (
    SELECT [m1].[MedicationId], [m1].[CustomerId], [m1].[MedicationName], [m2].[MedicationItemId], [m2].[MedicationId] AS [MedicationId0], [m2].[MedicineId], [m2].[Quantity]
    FROM [Medications] AS [m1]
    LEFT JOIN [MedicationItems] AS [m2] ON [m1].[MedicationId] = [m2].[MedicationId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [c0].[CartId], [t3].[MedicationId]
INFO  03:46:24 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  03:46:24 Executed DbCommand (25ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [t3].[MedicationId], [t3].[CustomerId], [t3].[MedicationName], [t3].[MedicationItemId], [t3].[MedicationId0], [t3].[MedicineId], [t3].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN [Carts] AS [c0] ON [t].[CustomerId] = [c0].[CustomerId]
LEFT JOIN (
    SELECT [m1].[MedicationId], [m1].[CustomerId], [m1].[MedicationName], [m2].[MedicationItemId], [m2].[MedicationId] AS [MedicationId0], [m2].[MedicineId], [m2].[Quantity]
    FROM [Medications] AS [m1]
    LEFT JOIN [MedicationItems] AS [m2] ON [m1].[MedicationId] = [m2].[MedicationId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [c0].[CartId], [t3].[MedicationId]
INFO  03:46:59 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  03:46:59 Executed DbCommand (4ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [u].[Email], [u].[AccountStatus], [u].[BankBalance], [u].[HasedPassword], [u].[Password], [u].[UserId]
FROM [UserCredentials] AS [u]
WHERE [u].[Email] = @__key_0
INFO  03:46:59 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
FROM [Customers] AS [c]
WHERE [c].[CustomerId] = @__key_0
INFO  03:46:59 Generating token for customer 1
INFO  03:46:59 Token generated successfully for customer 1
INFO  03:47:11 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  03:47:11 Starting PurchaseMedicine transaction.
INFO  03:47:11 Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Purchases] ([PurchaseDate], [TotalAmount])
VALUES (@p0, @p1);
SELECT [PurchaseId]
FROM [Purchases]
WHERE @@ROWCOUNT = 1 AND [PurchaseId] = scope_identity();
INFO  03:47:11 Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [c].[CategoryName]
FROM [Medicines] AS [m]
INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
LEFT JOIN [Feedbacks] AS [f] ON [m].[MedicineId] = [f].[MedicineId]
ORDER BY [m].[MedicineId], [c].[CategoryId]
INFO  03:47:11 Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
INFO  03:47:11 Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Categories] ([CategoryName])
VALUES (@p0);
SELECT [CategoryId]
FROM [Categories]
WHERE @@ROWCOUNT = 1 AND [CategoryId] = scope_identity();
INFO  03:47:11 Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Double), @p3='?' (DbType = Double), @p4='?' (Size = 4000), @p5='?' (DbType = Double), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Medicines] ([CategoryId], [CurrentQuantity], [FeedbackCount], [FeedbackSum], [MedicineName], [SellingPrice], [TotalNumberOfPurchase])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [MedicineId]
FROM [Medicines]
WHERE @@ROWCOUNT = 1 AND [MedicineId] = scope_identity();
INFO  03:47:11 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
INFO  03:47:11 Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [v].[VendorId], [v].[Address], [v].[Phone], [v].[VendorName]
FROM [Vendors] AS [v]
INFO  03:47:11 Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [PurchaseDetails] ([Amount], [DosageForm], [ExpiryDate], [MedicineId], [PurchaseId], [Quantity], [StorageRequirement], [TotalSum], [VendorId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [PurchaseDetailId]
FROM [PurchaseDetails]
WHERE @@ROWCOUNT = 1 AND [PurchaseDetailId] = scope_identity();
INFO  03:47:11 Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Stocks] ([ExpiryDate], [MedicineId], [PurchaseDetailId], [Quantity], [SellingPrice])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [StockId]
FROM [Stocks]
WHERE @@ROWCOUNT = 1 AND [StockId] = scope_identity();
INFO  03:47:11 Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [c].[CategoryName]
FROM [Medicines] AS [m]
INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
LEFT JOIN [Feedbacks] AS [f] ON [m].[MedicineId] = [f].[MedicineId]
ORDER BY [m].[MedicineId], [c].[CategoryId]
INFO  03:47:11 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
INFO  03:47:11 Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Categories] ([CategoryName])
VALUES (@p0);
SELECT [CategoryId]
FROM [Categories]
WHERE @@ROWCOUNT = 1 AND [CategoryId] = scope_identity();
INFO  03:47:11 Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Double), @p3='?' (DbType = Double), @p4='?' (Size = 4000), @p5='?' (DbType = Double), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Medicines] ([CategoryId], [CurrentQuantity], [FeedbackCount], [FeedbackSum], [MedicineName], [SellingPrice], [TotalNumberOfPurchase])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [MedicineId]
FROM [Medicines]
WHERE @@ROWCOUNT = 1 AND [MedicineId] = scope_identity();
INFO  03:47:11 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
INFO  03:47:11 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [v].[VendorId], [v].[Address], [v].[Phone], [v].[VendorName]
FROM [Vendors] AS [v]
INFO  03:47:11 Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [PurchaseDetails] ([Amount], [DosageForm], [ExpiryDate], [MedicineId], [PurchaseId], [Quantity], [StorageRequirement], [TotalSum], [VendorId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [PurchaseDetailId]
FROM [PurchaseDetails]
WHERE @@ROWCOUNT = 1 AND [PurchaseDetailId] = scope_identity();
INFO  03:47:11 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Stocks] ([ExpiryDate], [MedicineId], [PurchaseDetailId], [Quantity], [SellingPrice])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [StockId]
FROM [Stocks]
WHERE @@ROWCOUNT = 1 AND [StockId] = scope_identity();
INFO  03:47:11 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [c].[CategoryName]
FROM [Medicines] AS [m]
INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
LEFT JOIN [Feedbacks] AS [f] ON [m].[MedicineId] = [f].[MedicineId]
ORDER BY [m].[MedicineId], [c].[CategoryId]
INFO  03:47:11 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
INFO  03:47:11 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [v].[VendorId], [v].[Address], [v].[Phone], [v].[VendorName]
FROM [Vendors] AS [v]
INFO  03:47:11 Executed DbCommand (4ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  03:47:11 Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [CurrentQuantity] = @p0
WHERE [MedicineId] = @p1;
SELECT @@ROWCOUNT;
INFO  03:47:11 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [PurchaseDetails] ([Amount], [DosageForm], [ExpiryDate], [MedicineId], [PurchaseId], [Quantity], [StorageRequirement], [TotalSum], [VendorId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [PurchaseDetailId]
FROM [PurchaseDetails]
WHERE @@ROWCOUNT = 1 AND [PurchaseDetailId] = scope_identity();
INFO  03:47:11 Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Stocks] ([ExpiryDate], [MedicineId], [PurchaseDetailId], [Quantity], [SellingPrice])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [StockId]
FROM [Stocks]
WHERE @@ROWCOUNT = 1 AND [StockId] = scope_identity();
INFO  03:47:11 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [p].[PurchaseId], [p].[PurchaseDate], [p].[TotalAmount]
FROM [Purchases] AS [p]
WHERE [p].[PurchaseId] = @__key_0
INFO  03:47:11 Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Purchases] SET [TotalAmount] = @p0
WHERE [PurchaseId] = @p1;
SELECT @@ROWCOUNT;
INFO  03:47:11 PurchaseMedicine transaction completed successfully.
INFO  03:47:24 Fetching all pending orders.
INFO  03:47:24 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  03:47:24 Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [o].[OrderDetailId], [o].[Cost], [o].[DeliveryStatus], [o].[MedicineId], [o].[OrderId], [o].[Quantity], [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase]
FROM [OrderDetails] AS [o]
INNER JOIN [Medicines] AS [m] ON [o].[MedicineId] = [m].[MedicineId]
ERROR 03:47:24 Error occurred while fetching orders.
PharmacyManagementApi.CustomException.NoOrderFoundException: No order found for Admin
   at AdminService.GetAllOrder() in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\AdminService.cs:line 172
INFO  03:47:49 Adding medicine 1 to cart for customer 3
INFO  03:47:49 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  03:47:49 Executed DbCommand (5ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  03:47:49 Finding medicine details for medicine ID: 1
INFO  03:47:49 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  03:47:49 Medicine details found for medicine ID: 1
INFO  03:47:49 Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CartId], [c].[Cost], [c].[CustomerId], [c].[Date], [c].[MedicineId], [c].[Quantity], [c].[TotalCost]
FROM [Carts] AS [c]
INFO  03:47:49 Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Double), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Carts] ([Cost], [CustomerId], [Date], [MedicineId], [Quantity], [TotalCost])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [CartId]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [CartId] = scope_identity();
INFO  03:47:49 Medicine 1 added to cart 1 for customer 3
INFO  03:48:21 Performing checkout for customer 3
INFO  03:48:21 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  03:48:21 Executed DbCommand (30ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [t3].[MedicationId], [t3].[CustomerId], [t3].[MedicationName], [t3].[MedicationItemId], [t3].[MedicationId0], [t3].[MedicineId], [t3].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN [Carts] AS [c0] ON [t].[CustomerId] = [c0].[CustomerId]
LEFT JOIN (
    SELECT [m1].[MedicationId], [m1].[CustomerId], [m1].[MedicationName], [m2].[MedicationItemId], [m2].[MedicationId] AS [MedicationId0], [m2].[MedicineId], [m2].[Quantity]
    FROM [Medications] AS [m1]
    LEFT JOIN [MedicationItems] AS [m2] ON [m1].[MedicationId] = [m2].[MedicationId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [c0].[CartId], [t3].[MedicationId]
INFO  03:48:21 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [t3].[MedicationId], [t3].[CustomerId], [t3].[MedicationName], [t3].[MedicationItemId], [t3].[MedicationId0], [t3].[MedicineId], [t3].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN [Carts] AS [c0] ON [t].[CustomerId] = [c0].[CustomerId]
LEFT JOIN (
    SELECT [m1].[MedicationId], [m1].[CustomerId], [m1].[MedicationName], [m2].[MedicationItemId], [m2].[MedicationId] AS [MedicationId0], [m2].[MedicineId], [m2].[Quantity]
    FROM [Medications] AS [m1]
    LEFT JOIN [MedicationItems] AS [m2] ON [m1].[MedicationId] = [m2].[MedicationId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [c0].[CartId], [t3].[MedicationId]
INFO  03:48:21 Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Single), @p2='?' (DbType = Double), @p3='?' (DbType = Double), @p4='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([CustomerId], [Discount], [PaidAmount], [ShipmentCost], [TotalAmount])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [OrderId]
FROM [Orders]
WHERE @@ROWCOUNT = 1 AND [OrderId] = scope_identity();
INFO  03:48:21 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  03:48:21 Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Double), @p1='?' (DbType = Boolean), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([Cost], [DeliveryStatus], [MedicineId], [OrderId], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [OrderDetailId]
FROM [OrderDetails]
WHERE @@ROWCOUNT = 1 AND [OrderDetailId] = scope_identity();
INFO  03:48:21 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  03:48:21 Executed DbCommand (3ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [CurrentQuantity] = @p0, [TotalNumberOfPurchase] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  03:48:21 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CartId], [c].[Cost], [c].[CustomerId], [c].[Date], [c].[MedicineId], [c].[Quantity], [c].[TotalCost]
FROM [Carts] AS [c]
WHERE [c].[CartId] = @__key_0
INFO  03:48:21 Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [Carts]
WHERE [CartId] = @p0;
SELECT @@ROWCOUNT;
INFO  03:48:21 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__key_0
INFO  03:48:21 Executed DbCommand (4ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Double), @p1='?' (DbType = Double), @p2='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Orders] SET [PaidAmount] = @p0, [ShipmentCost] = @p1, [TotalAmount] = @p2
WHERE [OrderId] = @p3;
SELECT @@ROWCOUNT;
INFO  03:48:21 Checkout completed successfully for customer 3, order ID: 1
INFO  03:48:43 Adding medicine 1 to cart for customer 3
INFO  03:48:43 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  03:48:43 Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  03:48:43 Finding medicine details for medicine ID: 1
INFO  03:48:43 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  03:48:43 Medicine details found for medicine ID: 1
INFO  03:48:43 Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CartId], [c].[Cost], [c].[CustomerId], [c].[Date], [c].[MedicineId], [c].[Quantity], [c].[TotalCost]
FROM [Carts] AS [c]
INFO  03:48:43 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Double), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Carts] ([Cost], [CustomerId], [Date], [MedicineId], [Quantity], [TotalCost])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [CartId]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [CartId] = scope_identity();
INFO  03:48:43 Medicine 1 added to cart 2 for customer 3
INFO  03:48:47 Adding medicine 2 to cart for customer 3
INFO  03:48:47 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  03:48:47 Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  03:48:47 Finding medicine details for medicine ID: 2
INFO  03:48:47 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  03:48:47 Medicine details found for medicine ID: 2
INFO  03:48:47 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CartId], [c].[Cost], [c].[CustomerId], [c].[Date], [c].[MedicineId], [c].[Quantity], [c].[TotalCost]
FROM [Carts] AS [c]
INFO  03:48:47 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Double), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Carts] ([Cost], [CustomerId], [Date], [MedicineId], [Quantity], [TotalCost])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [CartId]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [CartId] = scope_identity();
INFO  03:48:47 Medicine 2 added to cart 3 for customer 3
INFO  03:48:53 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  03:48:53 Executed DbCommand (30ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [t3].[MedicationId], [t3].[CustomerId], [t3].[MedicationName], [t3].[MedicationItemId], [t3].[MedicationId0], [t3].[MedicineId], [t3].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN [Carts] AS [c0] ON [t].[CustomerId] = [c0].[CustomerId]
LEFT JOIN (
    SELECT [m1].[MedicationId], [m1].[CustomerId], [m1].[MedicationName], [m2].[MedicationItemId], [m2].[MedicationId] AS [MedicationId0], [m2].[MedicineId], [m2].[Quantity]
    FROM [Medications] AS [m1]
    LEFT JOIN [MedicationItems] AS [m2] ON [m1].[MedicationId] = [m2].[MedicationId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [c0].[CartId], [t3].[MedicationId]
INFO  03:49:23 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  03:49:23 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [u].[Email], [u].[AccountStatus], [u].[BankBalance], [u].[HasedPassword], [u].[Password], [u].[UserId]
FROM [UserCredentials] AS [u]
WHERE [u].[Email] = @__key_0
INFO  03:49:23 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
FROM [Customers] AS [c]
WHERE [c].[CustomerId] = @__key_0
INFO  03:49:23 Generating token for customer 3
INFO  03:49:23 Token generated successfully for customer 3
INFO  03:49:41 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  03:49:41 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [t3].[MedicationId], [t3].[CustomerId], [t3].[MedicationName], [t3].[MedicationItemId], [t3].[MedicationId0], [t3].[MedicineId], [t3].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN [Carts] AS [c0] ON [t].[CustomerId] = [c0].[CustomerId]
LEFT JOIN (
    SELECT [m1].[MedicationId], [m1].[CustomerId], [m1].[MedicationName], [m2].[MedicationItemId], [m2].[MedicationId] AS [MedicationId0], [m2].[MedicineId], [m2].[Quantity]
    FROM [Medications] AS [m1]
    LEFT JOIN [MedicationItems] AS [m2] ON [m1].[MedicationId] = [m2].[MedicationId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [c0].[CartId], [t3].[MedicationId]
INFO  03:51:58 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
WARN  03:51:58 Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
INFO  03:51:59 Executed DbCommand (29ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [t3].[MedicationId], [t3].[CustomerId], [t3].[MedicationName], [t3].[MedicationItemId], [t3].[MedicationId0], [t3].[MedicineId], [t3].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN [Carts] AS [c0] ON [t].[CustomerId] = [c0].[CustomerId]
LEFT JOIN (
    SELECT [m1].[MedicationId], [m1].[CustomerId], [m1].[MedicationName], [m2].[MedicationItemId], [m2].[MedicationId] AS [MedicationId0], [m2].[MedicineId], [m2].[Quantity]
    FROM [Medications] AS [m1]
    LEFT JOIN [MedicationItems] AS [m2] ON [m1].[MedicationId] = [m2].[MedicationId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [c0].[CartId], [t3].[MedicationId]
INFO  03:53:40 Now listening on: http://localhost:5033
INFO  03:53:40 Application started. Press Ctrl+C to shut down.
INFO  03:53:40 Hosting environment: Development
INFO  03:53:40 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
WARN  03:53:46 Failed to determine the https port for redirect.
INFO  03:53:49 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
WARN  03:53:50 Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
INFO  03:53:51 Executed DbCommand (169ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [t3].[MedicationId], [t3].[CustomerId], [t3].[MedicationName], [t3].[MedicationItemId], [t3].[MedicationId0], [t3].[MedicineId], [t3].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN [Carts] AS [c0] ON [t].[CustomerId] = [c0].[CustomerId]
LEFT JOIN (
    SELECT [m1].[MedicationId], [m1].[CustomerId], [m1].[MedicationName], [m2].[MedicationItemId], [m2].[MedicationId] AS [MedicationId0], [m2].[MedicineId], [m2].[Quantity]
    FROM [Medications] AS [m1]
    LEFT JOIN [MedicationItems] AS [m2] ON [m1].[MedicationId] = [m2].[MedicationId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [c0].[CartId], [t3].[MedicationId]
INFO  03:54:53 Now listening on: http://localhost:5033
INFO  03:54:53 Application started. Press Ctrl+C to shut down.
INFO  03:54:53 Hosting environment: Development
INFO  03:54:53 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
WARN  03:54:59 Failed to determine the https port for redirect.
INFO  03:55:01 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
WARN  03:55:02 Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
INFO  03:55:03 Executed DbCommand (176ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [t3].[CartId], [t3].[Cost], [t3].[CustomerId], [t3].[Date], [t3].[MedicineId], [t3].[Quantity], [t3].[TotalCost], [t3].[MedicineId0], [t3].[CategoryId], [t3].[CurrentQuantity], [t3].[FeedbackCount], [t3].[FeedbackSum], [t3].[MedicineName], [t3].[SellingPrice], [t3].[TotalNumberOfPurchase], [t4].[MedicationId], [t4].[CustomerId], [t4].[MedicationName], [t4].[MedicationItemId], [t4].[MedicationId0], [t4].[MedicineId], [t4].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN (
    SELECT [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [m1].[MedicineId] AS [MedicineId0], [m1].[CategoryId], [m1].[CurrentQuantity], [m1].[FeedbackCount], [m1].[FeedbackSum], [m1].[MedicineName], [m1].[SellingPrice], [m1].[TotalNumberOfPurchase]
    FROM [Carts] AS [c0]
    INNER JOIN [Medicines] AS [m1] ON [c0].[MedicineId] = [m1].[MedicineId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
LEFT JOIN (
    SELECT [m2].[MedicationId], [m2].[CustomerId], [m2].[MedicationName], [m3].[MedicationItemId], [m3].[MedicationId] AS [MedicationId0], [m3].[MedicineId], [m3].[Quantity]
    FROM [Medications] AS [m2]
    LEFT JOIN [MedicationItems] AS [m3] ON [m2].[MedicationId] = [m3].[MedicationId]
) AS [t4] ON [t].[CustomerId] = [t4].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [t3].[CartId], [t3].[MedicineId0], [t4].[MedicationId]
INFO  03:57:11 Now listening on: http://localhost:5033
INFO  03:57:11 Application started. Press Ctrl+C to shut down.
INFO  03:57:11 Hosting environment: Development
INFO  03:57:11 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
WARN  03:57:15 Failed to determine the https port for redirect.
INFO  03:57:17 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  03:57:18 Executed DbCommand (169ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [u].[Email], [u].[AccountStatus], [u].[BankBalance], [u].[HasedPassword], [u].[Password], [u].[UserId]
FROM [UserCredentials] AS [u]
WHERE [u].[Email] = @__key_0
INFO  03:57:18 Executed DbCommand (8ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
FROM [Customers] AS [c]
WHERE [c].[CustomerId] = @__key_0
INFO  03:57:18 Generating token for customer 2
INFO  03:57:19 Token generated successfully for customer 2
INFO  03:57:36 Updating cart for medicine 2 and customer 2
INFO  03:57:36 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  03:57:36 Executed DbCommand (6ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  03:57:36 Finding medicine details for medicine ID: 2
INFO  03:57:36 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  03:57:36 Medicine details found for medicine ID: 2
WARN  03:57:37 Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
INFO  03:57:37 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [t3].[CartId], [t3].[Cost], [t3].[CustomerId], [t3].[Date], [t3].[MedicineId], [t3].[Quantity], [t3].[TotalCost], [t3].[MedicineId0], [t3].[CategoryId], [t3].[CurrentQuantity], [t3].[FeedbackCount], [t3].[FeedbackSum], [t3].[MedicineName], [t3].[SellingPrice], [t3].[TotalNumberOfPurchase], [t4].[MedicationId], [t4].[CustomerId], [t4].[MedicationName], [t4].[MedicationItemId], [t4].[MedicationId0], [t4].[MedicineId], [t4].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN (
    SELECT [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [m1].[MedicineId] AS [MedicineId0], [m1].[CategoryId], [m1].[CurrentQuantity], [m1].[FeedbackCount], [m1].[FeedbackSum], [m1].[MedicineName], [m1].[SellingPrice], [m1].[TotalNumberOfPurchase]
    FROM [Carts] AS [c0]
    INNER JOIN [Medicines] AS [m1] ON [c0].[MedicineId] = [m1].[MedicineId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
LEFT JOIN (
    SELECT [m2].[MedicationId], [m2].[CustomerId], [m2].[MedicationName], [m3].[MedicationItemId], [m3].[MedicationId] AS [MedicationId0], [m3].[MedicineId], [m3].[Quantity]
    FROM [Medications] AS [m2]
    LEFT JOIN [MedicationItems] AS [m3] ON [m2].[MedicationId] = [m3].[MedicationId]
) AS [t4] ON [t].[CustomerId] = [t4].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [t3].[CartId], [t3].[MedicineId0], [t4].[MedicationId]
WARN  03:57:37 No cart found for medicine 2 and customer 2
ERROR 03:57:37 Error updating cart for medicine 2 and customer 2
PharmacyManagementApi.CustomException.NoCartFoundException: No cart Contains the Medicine Id , Add the cart first
   at PharmacyManagementApi.Services.CartService.UpdateCart(UpdateCartDTO addToCart) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\CartService.cs:line 163
INFO  03:59:05 Sending request to OpenAI API...
INFO  03:59:05 Start processing HTTP request POST https://api.openai.com/v1/chat/completions
INFO  03:59:05 Sending HTTP request POST https://api.openai.com/v1/chat/completions
INFO  03:59:08 Received HTTP response headers after 2409.559ms - 200
INFO  03:59:08 End processing HTTP request after 2452.137ms - 200
INFO  03:59:08 Received response from OpenAI API.
INFO  07:47:30 Getting feedback details for medicine 1
INFO  07:47:30 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  07:47:30 Executed DbCommand (10ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
WARN  07:47:30 No feedback found for medicine 1
ERROR 07:47:30 Error getting feedback details for medicine 1
PharmacyManagementApi.CustomException.NoFeedbackFoundException: No Feedback Found for the given medicine
   at PharmacyManagementApi.Services.FeedBackService.MedicineFeedback(Int32 medicineId)
INFO  07:48:17 Adding feedback for medicine 1 by customer 1
INFO  07:48:17 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  07:48:17 Executed DbCommand (4ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  07:48:17 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  07:48:17 Executed DbCommand (6ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Double), @p1='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [FeedbackCount] = @p0, [FeedbackSum] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  07:48:17 Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Feedbacks] ([CustomerId], [FeedbackMessage], [MedicineId], [Rating])
VALUES (@p0, @p1, @p2, @p3);
SELECT [FeedbackId]
FROM [Feedbacks]
WHERE @@ROWCOUNT = 1 AND [FeedbackId] = scope_identity();
INFO  07:48:17 Feedback 1 added successfully for medicine 1 by customer 1
INFO  07:48:37 Getting feedback details for medicine 1
INFO  07:48:37 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  07:48:37 Executed DbCommand (5ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  07:48:37 Feedback details retrieved successfully for medicine 1
INFO  07:50:48 Getting feedback details for medicine 1
INFO  07:50:48 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  07:50:48 Executed DbCommand (10ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  07:50:48 Feedback details retrieved successfully for medicine 1
ERROR 07:50:49 An unhandled exception has occurred while executing the request.
System.MissingMethodException: Attempted to invoke a deleted method implementation. This can happen when a method is deleted or its name or signature is changed while the application is running.
   at PharmacyManagementApi.Models.DTO.ResponseDTO.MedicineFeedbackDTO.get_RatingPercentages()
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCoreAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteCore[TValue](JsonConverter jsonConverter, Utf8JsonWriter writer, TValue& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
INFO  07:54:36 Now listening on: http://localhost:5033
INFO  07:54:36 Application started. Press Ctrl+C to shut down.
INFO  07:54:36 Hosting environment: Development
INFO  07:54:36 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
WARN  07:54:43 Failed to determine the https port for redirect.
INFO  07:54:43 Getting feedback details for medicine 1
INFO  07:54:44 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  07:54:45 Executed DbCommand (74ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  07:54:45 Feedback details retrieved successfully for medicine 1
INFO  07:55:41 Now listening on: http://localhost:5033
INFO  07:55:41 Application started. Press Ctrl+C to shut down.
INFO  07:55:41 Hosting environment: Development
INFO  07:55:41 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
WARN  07:55:45 Failed to determine the https port for redirect.
INFO  07:55:45 Getting feedback details for medicine 1
INFO  07:55:46 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  07:55:47 Executed DbCommand (75ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  07:55:48 Feedback details retrieved successfully for medicine 1
INFO  08:41:07 Now listening on: http://localhost:5033
INFO  08:41:07 Application started. Press Ctrl+C to shut down.
INFO  08:41:07 Hosting environment: Development
INFO  08:41:07 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
WARN  08:41:54 Failed to determine the https port for redirect.
INFO  08:42:50 Adding a new vendor: PharmaX.
INFO  08:42:51 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  08:42:52 Executed DbCommand (73ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Vendors] ([Address], [Phone], [VendorName])
VALUES (@p0, @p1, @p2);
SELECT [VendorId]
FROM [Vendors]
WHERE @@ROWCOUNT = 1 AND [VendorId] = scope_identity();
INFO  08:42:52 Vendor PharmaX added successfully.
INFO  08:59:07 Now listening on: http://localhost:5033
INFO  08:59:07 Application started. Press Ctrl+C to shut down.
INFO  08:59:07 Hosting environment: Development
INFO  08:59:07 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
WARN  08:59:14 Failed to determine the https port for redirect.
INFO  08:59:14 Sending request to OpenAI API...
INFO  08:59:14 Start processing HTTP request POST https://api.openai.com/v1/chat/completions
INFO  08:59:14 Sending HTTP request POST https://api.openai.com/v1/chat/completions
INFO  08:59:19 Received HTTP response headers after 4744.0538ms - 200
INFO  08:59:19 End processing HTTP request after 4787.1094ms - 200
INFO  08:59:19 Received response from OpenAI API.
INFO  09:32:20 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  09:32:32 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  09:32:32 Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
INFO  09:32:32 Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
INFO  09:32:32 Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
INFO  09:32:32 Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
INFO  09:32:32 Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
INFO  09:32:32 Applying migration '20240530160220_order-update'.
INFO  09:32:32 Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Orders] ADD [OrderDate] datetime2 NOT NULL DEFAULT '0001-01-01T00:00:00.0000000';
INFO  09:32:32 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20240530160220_order-update', N'6.0.30');
INFO  09:45:54 Now listening on: http://localhost:5033
INFO  09:45:54 Application started. Press Ctrl+C to shut down.
INFO  09:45:54 Hosting environment: Development
INFO  09:45:54 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
INFO  09:50:56 Now listening on: http://localhost:5033
INFO  09:50:56 Application started. Press Ctrl+C to shut down.
INFO  09:50:56 Hosting environment: Development
INFO  09:50:56 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
WARN  09:51:05 Failed to determine the https port for redirect.
INFO  09:51:05 Sending request to OpenAI API...
INFO  09:51:05 Start processing HTTP request POST https://api.openai.com/v1/chat/completions
INFO  09:51:05 Sending HTTP request POST https://api.openai.com/v1/chat/completions
INFO  09:51:08 Received HTTP response headers after 3010.3406ms - 200
INFO  09:51:08 End processing HTTP request after 3049.1659ms - 200
INFO  09:51:08 Received response from OpenAI API.
INFO  09:59:22 Now listening on: http://localhost:5033
INFO  09:59:22 Application started. Press Ctrl+C to shut down.
INFO  09:59:22 Hosting environment: Development
INFO  09:59:22 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
WARN  10:04:41 Failed to determine the https port for redirect.
INFO  10:14:30 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:14:37 Starting PurchaseMedicine transaction.
INFO  10:14:38 Executed DbCommand (89ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Purchases] ([PurchaseDate], [TotalAmount])
VALUES (@p0, @p1);
SELECT [PurchaseId]
FROM [Purchases]
WHERE @@ROWCOUNT = 1 AND [PurchaseId] = scope_identity();
INFO  10:14:38 Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [c].[CategoryName]
FROM [Medicines] AS [m]
INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
LEFT JOIN [Feedbacks] AS [f] ON [m].[MedicineId] = [f].[MedicineId]
ORDER BY [m].[MedicineId], [c].[CategoryId]
INFO  10:14:39 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
INFO  10:14:39 Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Categories] ([CategoryName])
VALUES (@p0);
SELECT [CategoryId]
FROM [Categories]
WHERE @@ROWCOUNT = 1 AND [CategoryId] = scope_identity();
INFO  10:14:39 Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Double), @p3='?' (DbType = Double), @p4='?' (Size = 4000), @p5='?' (DbType = Double), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Medicines] ([CategoryId], [CurrentQuantity], [FeedbackCount], [FeedbackSum], [MedicineName], [SellingPrice], [TotalNumberOfPurchase])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [MedicineId]
FROM [Medicines]
WHERE @@ROWCOUNT = 1 AND [MedicineId] = scope_identity();
INFO  10:14:39 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
INFO  10:14:39 Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [v].[VendorId], [v].[Address], [v].[Phone], [v].[VendorName]
FROM [Vendors] AS [v]
INFO  10:14:39 Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [PurchaseDetails] ([Amount], [DosageForm], [ExpiryDate], [MedicineId], [PurchaseId], [Quantity], [StorageRequirement], [TotalSum], [VendorId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [PurchaseDetailId]
FROM [PurchaseDetails]
WHERE @@ROWCOUNT = 1 AND [PurchaseDetailId] = scope_identity();
INFO  10:14:39 Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Stocks] ([ExpiryDate], [MedicineId], [PurchaseDetailId], [Quantity], [SellingPrice])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [StockId]
FROM [Stocks]
WHERE @@ROWCOUNT = 1 AND [StockId] = scope_identity();
INFO  10:14:39 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [c].[CategoryName]
FROM [Medicines] AS [m]
INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
LEFT JOIN [Feedbacks] AS [f] ON [m].[MedicineId] = [f].[MedicineId]
ORDER BY [m].[MedicineId], [c].[CategoryId]
INFO  10:14:39 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
INFO  10:14:39 Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Categories] ([CategoryName])
VALUES (@p0);
SELECT [CategoryId]
FROM [Categories]
WHERE @@ROWCOUNT = 1 AND [CategoryId] = scope_identity();
INFO  10:14:39 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Double), @p3='?' (DbType = Double), @p4='?' (Size = 4000), @p5='?' (DbType = Double), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Medicines] ([CategoryId], [CurrentQuantity], [FeedbackCount], [FeedbackSum], [MedicineName], [SellingPrice], [TotalNumberOfPurchase])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [MedicineId]
FROM [Medicines]
WHERE @@ROWCOUNT = 1 AND [MedicineId] = scope_identity();
INFO  10:14:39 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
INFO  10:14:39 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [v].[VendorId], [v].[Address], [v].[Phone], [v].[VendorName]
FROM [Vendors] AS [v]
INFO  10:14:39 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [PurchaseDetails] ([Amount], [DosageForm], [ExpiryDate], [MedicineId], [PurchaseId], [Quantity], [StorageRequirement], [TotalSum], [VendorId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [PurchaseDetailId]
FROM [PurchaseDetails]
WHERE @@ROWCOUNT = 1 AND [PurchaseDetailId] = scope_identity();
INFO  10:14:39 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Stocks] ([ExpiryDate], [MedicineId], [PurchaseDetailId], [Quantity], [SellingPrice])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [StockId]
FROM [Stocks]
WHERE @@ROWCOUNT = 1 AND [StockId] = scope_identity();
INFO  10:14:39 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [c].[CategoryName]
FROM [Medicines] AS [m]
INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
LEFT JOIN [Feedbacks] AS [f] ON [m].[MedicineId] = [f].[MedicineId]
ORDER BY [m].[MedicineId], [c].[CategoryId]
INFO  10:14:39 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
INFO  10:14:39 Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Categories] ([CategoryName])
VALUES (@p0);
SELECT [CategoryId]
FROM [Categories]
WHERE @@ROWCOUNT = 1 AND [CategoryId] = scope_identity();
INFO  10:14:39 Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Double), @p3='?' (DbType = Double), @p4='?' (Size = 4000), @p5='?' (DbType = Double), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Medicines] ([CategoryId], [CurrentQuantity], [FeedbackCount], [FeedbackSum], [MedicineName], [SellingPrice], [TotalNumberOfPurchase])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [MedicineId]
FROM [Medicines]
WHERE @@ROWCOUNT = 1 AND [MedicineId] = scope_identity();
INFO  10:14:39 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
INFO  10:14:39 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [v].[VendorId], [v].[Address], [v].[Phone], [v].[VendorName]
FROM [Vendors] AS [v]
INFO  10:14:39 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [PurchaseDetails] ([Amount], [DosageForm], [ExpiryDate], [MedicineId], [PurchaseId], [Quantity], [StorageRequirement], [TotalSum], [VendorId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [PurchaseDetailId]
FROM [PurchaseDetails]
WHERE @@ROWCOUNT = 1 AND [PurchaseDetailId] = scope_identity();
INFO  10:14:39 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Stocks] ([ExpiryDate], [MedicineId], [PurchaseDetailId], [Quantity], [SellingPrice])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [StockId]
FROM [Stocks]
WHERE @@ROWCOUNT = 1 AND [StockId] = scope_identity();
INFO  10:14:39 Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [p].[PurchaseId], [p].[PurchaseDate], [p].[TotalAmount]
FROM [Purchases] AS [p]
WHERE [p].[PurchaseId] = @__key_0
INFO  10:14:39 Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Purchases] SET [TotalAmount] = @p0
WHERE [PurchaseId] = @p1;
SELECT @@ROWCOUNT;
INFO  10:14:39 PurchaseMedicine transaction completed successfully.
INFO  10:17:51 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:17:51 Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 450), @p2='?' (DbType = Boolean), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Customers] ([Address], [Email], [IsSubcribed], [Name], [Phone], [Role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [CustomerId]
FROM [Customers]
WHERE @@ROWCOUNT = 1 AND [CustomerId] = scope_identity();
INFO  10:17:51 Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (Size = 8000) (DbType = Binary), @p4='?' (Size = 8000) (DbType = Binary), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UserCredentials] ([Email], [AccountStatus], [BankBalance], [HasedPassword], [Password], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
INFO  10:18:32 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:18:32 Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 450), @p2='?' (DbType = Boolean), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Customers] ([Address], [Email], [IsSubcribed], [Name], [Phone], [Role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [CustomerId]
FROM [Customers]
WHERE @@ROWCOUNT = 1 AND [CustomerId] = scope_identity();
INFO  10:18:32 Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (Size = 8000) (DbType = Binary), @p4='?' (Size = 8000) (DbType = Binary), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UserCredentials] ([Email], [AccountStatus], [BankBalance], [HasedPassword], [Password], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
INFO  10:19:44 Getting feedback details for medicine 1
INFO  10:19:44 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:19:44 Executed DbCommand (4ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:19:44 Feedback details retrieved successfully for medicine 1
INFO  10:20:17 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:20:17 Executed DbCommand (5ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [u].[Email], [u].[AccountStatus], [u].[BankBalance], [u].[HasedPassword], [u].[Password], [u].[UserId]
FROM [UserCredentials] AS [u]
WHERE [u].[Email] = @__key_0
INFO  10:20:17 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
FROM [Customers] AS [c]
WHERE [c].[CustomerId] = @__key_0
INFO  10:20:17 Generating token for customer 3
INFO  10:20:17 Token generated successfully for customer 3
INFO  10:20:49 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:20:49 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [u].[Email], [u].[AccountStatus], [u].[BankBalance], [u].[HasedPassword], [u].[Password], [u].[UserId]
FROM [UserCredentials] AS [u]
WHERE [u].[Email] = @__key_0
INFO  10:20:49 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
FROM [Customers] AS [c]
WHERE [c].[CustomerId] = @__key_0
INFO  10:20:49 Generating token for customer 5
INFO  10:20:49 Token generated successfully for customer 5
INFO  10:21:18 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:21:18 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [u].[Email], [u].[AccountStatus], [u].[BankBalance], [u].[HasedPassword], [u].[Password], [u].[UserId]
FROM [UserCredentials] AS [u]
WHERE [u].[Email] = @__key_0
INFO  10:21:18 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
FROM [Customers] AS [c]
WHERE [c].[CustomerId] = @__key_0
INFO  10:21:18 Generating token for customer 4
INFO  10:21:18 Token generated successfully for customer 4
INFO  10:22:12 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:22:12 Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 450), @p2='?' (DbType = Boolean), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Customers] ([Address], [Email], [IsSubcribed], [Name], [Phone], [Role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [CustomerId]
FROM [Customers]
WHERE @@ROWCOUNT = 1 AND [CustomerId] = scope_identity();
INFO  10:22:12 Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (Size = 8000) (DbType = Binary), @p4='?' (Size = 8000) (DbType = Binary), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UserCredentials] ([Email], [AccountStatus], [BankBalance], [HasedPassword], [Password], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
INFO  10:22:31 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:22:31 Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 450), @p2='?' (DbType = Boolean), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Customers] ([Address], [Email], [IsSubcribed], [Name], [Phone], [Role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [CustomerId]
FROM [Customers]
WHERE @@ROWCOUNT = 1 AND [CustomerId] = scope_identity();
INFO  10:22:31 Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (Size = 8000) (DbType = Binary), @p4='?' (Size = 8000) (DbType = Binary), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UserCredentials] ([Email], [AccountStatus], [BankBalance], [HasedPassword], [Password], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
INFO  10:22:46 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:22:46 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [u].[Email], [u].[AccountStatus], [u].[BankBalance], [u].[HasedPassword], [u].[Password], [u].[UserId]
FROM [UserCredentials] AS [u]
WHERE [u].[Email] = @__key_0
INFO  10:22:46 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
FROM [Customers] AS [c]
WHERE [c].[CustomerId] = @__key_0
INFO  10:22:46 Generating token for customer 7
INFO  10:22:46 Token generated successfully for customer 7
INFO  10:23:28 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:23:28 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [u].[Email], [u].[AccountStatus], [u].[BankBalance], [u].[HasedPassword], [u].[Password], [u].[UserId]
FROM [UserCredentials] AS [u]
WHERE [u].[Email] = @__key_0
INFO  10:23:28 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
FROM [Customers] AS [c]
WHERE [c].[CustomerId] = @__key_0
INFO  10:23:28 Generating token for customer 6
INFO  10:23:28 Token generated successfully for customer 6
INFO  10:24:51 Adding feedback for medicine 1 by customer 3
INFO  10:24:51 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:24:51 Executed DbCommand (37ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:24:51 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:24:51 Executed DbCommand (4ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Double), @p1='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [FeedbackCount] = @p0, [FeedbackSum] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  10:24:51 Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Feedbacks] ([CustomerId], [FeedbackMessage], [MedicineId], [Rating])
VALUES (@p0, @p1, @p2, @p3);
SELECT [FeedbackId]
FROM [Feedbacks]
WHERE @@ROWCOUNT = 1 AND [FeedbackId] = scope_identity();
INFO  10:24:51 Feedback 2 added successfully for medicine 1 by customer 3
INFO  10:25:16 Adding feedback for medicine 2 by customer 3
INFO  10:25:16 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:25:16 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:25:16 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:25:16 Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Double), @p1='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [FeedbackCount] = @p0, [FeedbackSum] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  10:25:16 Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Feedbacks] ([CustomerId], [FeedbackMessage], [MedicineId], [Rating])
VALUES (@p0, @p1, @p2, @p3);
SELECT [FeedbackId]
FROM [Feedbacks]
WHERE @@ROWCOUNT = 1 AND [FeedbackId] = scope_identity();
INFO  10:25:16 Feedback 3 added successfully for medicine 2 by customer 3
INFO  10:25:44 Adding feedback for medicine 3 by customer 3
INFO  10:25:44 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:25:44 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:25:44 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:25:44 Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Double), @p1='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [FeedbackCount] = @p0, [FeedbackSum] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  10:25:44 Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Feedbacks] ([CustomerId], [FeedbackMessage], [MedicineId], [Rating])
VALUES (@p0, @p1, @p2, @p3);
SELECT [FeedbackId]
FROM [Feedbacks]
WHERE @@ROWCOUNT = 1 AND [FeedbackId] = scope_identity();
INFO  10:25:44 Feedback 4 added successfully for medicine 3 by customer 3
INFO  10:26:02 Adding feedback for medicine 4 by customer 3
INFO  10:26:02 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:26:02 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:26:02 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:26:02 Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Double), @p1='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [FeedbackCount] = @p0, [FeedbackSum] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  10:26:02 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Feedbacks] ([CustomerId], [FeedbackMessage], [MedicineId], [Rating])
VALUES (@p0, @p1, @p2, @p3);
SELECT [FeedbackId]
FROM [Feedbacks]
WHERE @@ROWCOUNT = 1 AND [FeedbackId] = scope_identity();
INFO  10:26:02 Feedback 5 added successfully for medicine 4 by customer 3
INFO  10:26:17 Adding feedback for medicine 5 by customer 3
INFO  10:26:17 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:26:17 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:26:17 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:26:18 Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Double), @p1='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [FeedbackCount] = @p0, [FeedbackSum] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  10:26:18 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Feedbacks] ([CustomerId], [FeedbackMessage], [MedicineId], [Rating])
VALUES (@p0, @p1, @p2, @p3);
SELECT [FeedbackId]
FROM [Feedbacks]
WHERE @@ROWCOUNT = 1 AND [FeedbackId] = scope_identity();
INFO  10:26:18 Feedback 6 added successfully for medicine 5 by customer 3
INFO  10:27:07 Adding feedback for medicine 1 by customer 5
INFO  10:27:07 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:27:07 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:27:07 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:27:07 Executed DbCommand (4ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Double), @p1='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [FeedbackCount] = @p0, [FeedbackSum] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  10:27:07 Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Feedbacks] ([CustomerId], [FeedbackMessage], [MedicineId], [Rating])
VALUES (@p0, @p1, @p2, @p3);
SELECT [FeedbackId]
FROM [Feedbacks]
WHERE @@ROWCOUNT = 1 AND [FeedbackId] = scope_identity();
INFO  10:27:07 Feedback 7 added successfully for medicine 1 by customer 5
INFO  10:27:17 Adding feedback for medicine 2 by customer 5
INFO  10:27:17 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:27:17 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:27:17 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:27:17 Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Double), @p1='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [FeedbackCount] = @p0, [FeedbackSum] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  10:27:17 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Feedbacks] ([CustomerId], [FeedbackMessage], [MedicineId], [Rating])
VALUES (@p0, @p1, @p2, @p3);
SELECT [FeedbackId]
FROM [Feedbacks]
WHERE @@ROWCOUNT = 1 AND [FeedbackId] = scope_identity();
INFO  10:27:17 Feedback 8 added successfully for medicine 2 by customer 5
INFO  10:27:28 Adding feedback for medicine 3 by customer 5
INFO  10:27:28 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:27:28 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:27:28 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:27:28 Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Double), @p1='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [FeedbackCount] = @p0, [FeedbackSum] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  10:27:28 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Feedbacks] ([CustomerId], [FeedbackMessage], [MedicineId], [Rating])
VALUES (@p0, @p1, @p2, @p3);
SELECT [FeedbackId]
FROM [Feedbacks]
WHERE @@ROWCOUNT = 1 AND [FeedbackId] = scope_identity();
INFO  10:27:28 Feedback 9 added successfully for medicine 3 by customer 5
INFO  10:27:35 Adding feedback for medicine 3 by customer 5
INFO  10:27:35 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:27:35 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
WARN  10:27:35 Customer 5 has already given feedback for medicine 3
ERROR 10:27:35 Error adding feedback for medicine 3 by customer 5
PharmacyManagementApi.CustomException.DuplicateValueException: The user has already given the feedback
   at PharmacyManagementApi.Services.FeedBackService.AddFeedback(FeedbackRequestDTO feedbackRequest) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\FeedBackService.cs:line 58
INFO  10:27:46 Adding feedback for medicine 4 by customer 5
INFO  10:27:46 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:27:46 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:27:46 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:27:46 Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Double), @p1='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [FeedbackCount] = @p0, [FeedbackSum] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  10:27:46 Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Feedbacks] ([CustomerId], [FeedbackMessage], [MedicineId], [Rating])
VALUES (@p0, @p1, @p2, @p3);
SELECT [FeedbackId]
FROM [Feedbacks]
WHERE @@ROWCOUNT = 1 AND [FeedbackId] = scope_identity();
INFO  10:27:46 Feedback 10 added successfully for medicine 4 by customer 5
INFO  10:27:55 Adding feedback for medicine 4 by customer 5
INFO  10:27:55 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:27:55 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
WARN  10:27:55 Customer 5 has already given feedback for medicine 4
ERROR 10:27:55 Error adding feedback for medicine 4 by customer 5
PharmacyManagementApi.CustomException.DuplicateValueException: The user has already given the feedback
   at PharmacyManagementApi.Services.FeedBackService.AddFeedback(FeedbackRequestDTO feedbackRequest) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\FeedBackService.cs:line 58
INFO  10:28:02 Adding feedback for medicine 5 by customer 5
INFO  10:28:02 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:28:02 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:28:02 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:28:02 Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Double), @p1='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [FeedbackCount] = @p0, [FeedbackSum] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  10:28:02 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Feedbacks] ([CustomerId], [FeedbackMessage], [MedicineId], [Rating])
VALUES (@p0, @p1, @p2, @p3);
SELECT [FeedbackId]
FROM [Feedbacks]
WHERE @@ROWCOUNT = 1 AND [FeedbackId] = scope_identity();
INFO  10:28:02 Feedback 11 added successfully for medicine 5 by customer 5
INFO  10:28:49 Adding feedback for medicine 1 by customer 4
INFO  10:28:49 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:28:49 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:28:49 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:28:49 Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Double), @p1='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [FeedbackCount] = @p0, [FeedbackSum] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  10:28:49 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Feedbacks] ([CustomerId], [FeedbackMessage], [MedicineId], [Rating])
VALUES (@p0, @p1, @p2, @p3);
SELECT [FeedbackId]
FROM [Feedbacks]
WHERE @@ROWCOUNT = 1 AND [FeedbackId] = scope_identity();
INFO  10:28:49 Feedback 12 added successfully for medicine 1 by customer 4
INFO  10:28:59 Adding feedback for medicine 2 by customer 4
INFO  10:28:59 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:28:59 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:28:59 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:28:59 Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Double), @p1='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [FeedbackCount] = @p0, [FeedbackSum] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  10:28:59 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Feedbacks] ([CustomerId], [FeedbackMessage], [MedicineId], [Rating])
VALUES (@p0, @p1, @p2, @p3);
SELECT [FeedbackId]
FROM [Feedbacks]
WHERE @@ROWCOUNT = 1 AND [FeedbackId] = scope_identity();
INFO  10:28:59 Feedback 13 added successfully for medicine 2 by customer 4
INFO  10:29:07 Adding feedback for medicine 3 by customer 4
INFO  10:29:07 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:29:07 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:29:07 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:29:07 Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Double), @p1='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [FeedbackCount] = @p0, [FeedbackSum] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  10:29:07 Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Feedbacks] ([CustomerId], [FeedbackMessage], [MedicineId], [Rating])
VALUES (@p0, @p1, @p2, @p3);
SELECT [FeedbackId]
FROM [Feedbacks]
WHERE @@ROWCOUNT = 1 AND [FeedbackId] = scope_identity();
INFO  10:29:07 Feedback 14 added successfully for medicine 3 by customer 4
INFO  10:29:22 Adding feedback for medicine 4 by customer 4
INFO  10:29:22 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:29:22 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:29:22 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:29:22 Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Double), @p1='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [FeedbackCount] = @p0, [FeedbackSum] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  10:29:22 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Feedbacks] ([CustomerId], [FeedbackMessage], [MedicineId], [Rating])
VALUES (@p0, @p1, @p2, @p3);
SELECT [FeedbackId]
FROM [Feedbacks]
WHERE @@ROWCOUNT = 1 AND [FeedbackId] = scope_identity();
INFO  10:29:22 Feedback 15 added successfully for medicine 4 by customer 4
INFO  10:29:36 Adding feedback for medicine 5 by customer 4
INFO  10:29:36 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:29:36 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:29:36 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:29:36 Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Double), @p1='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [FeedbackCount] = @p0, [FeedbackSum] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  10:29:36 Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Feedbacks] ([CustomerId], [FeedbackMessage], [MedicineId], [Rating])
VALUES (@p0, @p1, @p2, @p3);
SELECT [FeedbackId]
FROM [Feedbacks]
WHERE @@ROWCOUNT = 1 AND [FeedbackId] = scope_identity();
INFO  10:29:36 Feedback 16 added successfully for medicine 5 by customer 4
INFO  10:30:21 Adding feedback for medicine 1 by customer 7
INFO  10:30:21 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:30:21 Executed DbCommand (6ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:30:21 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:30:21 Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Double), @p1='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [FeedbackCount] = @p0, [FeedbackSum] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  10:30:21 Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Feedbacks] ([CustomerId], [FeedbackMessage], [MedicineId], [Rating])
VALUES (@p0, @p1, @p2, @p3);
SELECT [FeedbackId]
FROM [Feedbacks]
WHERE @@ROWCOUNT = 1 AND [FeedbackId] = scope_identity();
INFO  10:30:21 Feedback 17 added successfully for medicine 1 by customer 7
INFO  10:30:30 Adding feedback for medicine 2 by customer 7
INFO  10:30:30 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:30:30 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:30:30 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:30:30 Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Double), @p1='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [FeedbackCount] = @p0, [FeedbackSum] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  10:30:30 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Feedbacks] ([CustomerId], [FeedbackMessage], [MedicineId], [Rating])
VALUES (@p0, @p1, @p2, @p3);
SELECT [FeedbackId]
FROM [Feedbacks]
WHERE @@ROWCOUNT = 1 AND [FeedbackId] = scope_identity();
INFO  10:30:30 Feedback 18 added successfully for medicine 2 by customer 7
INFO  10:30:40 Adding feedback for medicine 2 by customer 7
INFO  10:30:40 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:30:40 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
WARN  10:30:40 Customer 7 has already given feedback for medicine 2
ERROR 10:30:40 Error adding feedback for medicine 2 by customer 7
PharmacyManagementApi.CustomException.DuplicateValueException: The user has already given the feedback
   at PharmacyManagementApi.Services.FeedBackService.AddFeedback(FeedbackRequestDTO feedbackRequest) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\FeedBackService.cs:line 58
INFO  10:30:52 Adding feedback for medicine 3 by customer 7
INFO  10:30:52 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:30:52 Executed DbCommand (5ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:30:52 Executed DbCommand (7ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:30:52 Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Double), @p1='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [FeedbackCount] = @p0, [FeedbackSum] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  10:30:52 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Feedbacks] ([CustomerId], [FeedbackMessage], [MedicineId], [Rating])
VALUES (@p0, @p1, @p2, @p3);
SELECT [FeedbackId]
FROM [Feedbacks]
WHERE @@ROWCOUNT = 1 AND [FeedbackId] = scope_identity();
INFO  10:30:52 Feedback 19 added successfully for medicine 3 by customer 7
INFO  10:31:04 Adding feedback for medicine 4 by customer 7
INFO  10:31:04 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:31:04 Executed DbCommand (4ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:31:04 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:31:04 Executed DbCommand (3ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Double), @p1='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [FeedbackCount] = @p0, [FeedbackSum] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  10:31:04 Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Feedbacks] ([CustomerId], [FeedbackMessage], [MedicineId], [Rating])
VALUES (@p0, @p1, @p2, @p3);
SELECT [FeedbackId]
FROM [Feedbacks]
WHERE @@ROWCOUNT = 1 AND [FeedbackId] = scope_identity();
INFO  10:31:04 Feedback 20 added successfully for medicine 4 by customer 7
INFO  10:31:17 Adding feedback for medicine 5 by customer 7
INFO  10:31:17 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:31:17 Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:31:17 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:31:17 Executed DbCommand (3ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Double), @p1='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [FeedbackCount] = @p0, [FeedbackSum] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  10:31:17 Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Feedbacks] ([CustomerId], [FeedbackMessage], [MedicineId], [Rating])
VALUES (@p0, @p1, @p2, @p3);
SELECT [FeedbackId]
FROM [Feedbacks]
WHERE @@ROWCOUNT = 1 AND [FeedbackId] = scope_identity();
INFO  10:31:17 Feedback 21 added successfully for medicine 5 by customer 7
INFO  10:31:24 Viewing feedbacks for customer 1
INFO  10:31:24 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:31:24 Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
FROM [Customers] AS [c]
WHERE [c].[CustomerId] = @__key_0
INFO  10:31:24 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating]
FROM [Feedbacks] AS [f]
INFO  10:31:24 1 feedbacks found for customer 1
INFO  10:31:31 Viewing feedbacks for customer 7
INFO  10:31:31 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:31:31 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
FROM [Customers] AS [c]
WHERE [c].[CustomerId] = @__key_0
INFO  10:31:31 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating]
FROM [Feedbacks] AS [f]
INFO  10:31:31 5 feedbacks found for customer 7
INFO  10:31:40 Getting feedback details for medicine 1
INFO  10:31:40 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:31:40 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:31:40 Feedback details retrieved successfully for medicine 1
INFO  10:31:55 Getting feedback details for medicine 2
INFO  10:31:55 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:31:55 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:31:55 Feedback details retrieved successfully for medicine 2
INFO  10:32:02 Getting feedback details for medicine 4
INFO  10:32:02 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:32:02 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:32:02 Feedback details retrieved successfully for medicine 4
INFO  10:32:10 Getting feedback details for medicine 5
INFO  10:32:10 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:32:10 Executed DbCommand (5ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:32:10 Feedback details retrieved successfully for medicine 5
INFO  10:34:25 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:34:25 Starting PurchaseMedicine transaction.
INFO  10:34:25 Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Purchases] ([PurchaseDate], [TotalAmount])
VALUES (@p0, @p1);
SELECT [PurchaseId]
FROM [Purchases]
WHERE @@ROWCOUNT = 1 AND [PurchaseId] = scope_identity();
INFO  10:34:25 Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [c].[CategoryName]
FROM [Medicines] AS [m]
INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
LEFT JOIN [Feedbacks] AS [f] ON [m].[MedicineId] = [f].[MedicineId]
ORDER BY [m].[MedicineId], [c].[CategoryId]
INFO  10:34:25 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
INFO  10:34:25 Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [v].[VendorId], [v].[Address], [v].[Phone], [v].[VendorName]
FROM [Vendors] AS [v]
INFO  10:34:25 Executed DbCommand (5ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:34:25 Executed DbCommand (4ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [CurrentQuantity] = @p0
WHERE [MedicineId] = @p1;
SELECT @@ROWCOUNT;
INFO  10:34:25 Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [PurchaseDetails] ([Amount], [DosageForm], [ExpiryDate], [MedicineId], [PurchaseId], [Quantity], [StorageRequirement], [TotalSum], [VendorId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [PurchaseDetailId]
FROM [PurchaseDetails]
WHERE @@ROWCOUNT = 1 AND [PurchaseDetailId] = scope_identity();
INFO  10:34:25 Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Stocks] ([ExpiryDate], [MedicineId], [PurchaseDetailId], [Quantity], [SellingPrice])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [StockId]
FROM [Stocks]
WHERE @@ROWCOUNT = 1 AND [StockId] = scope_identity();
INFO  10:34:25 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [c].[CategoryName]
FROM [Medicines] AS [m]
INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
LEFT JOIN [Feedbacks] AS [f] ON [m].[MedicineId] = [f].[MedicineId]
ORDER BY [m].[MedicineId], [c].[CategoryId]
INFO  10:34:25 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
INFO  10:34:25 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [v].[VendorId], [v].[Address], [v].[Phone], [v].[VendorName]
FROM [Vendors] AS [v]
INFO  10:34:25 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:34:25 Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [CurrentQuantity] = @p0
WHERE [MedicineId] = @p1;
SELECT @@ROWCOUNT;
INFO  10:34:25 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [PurchaseDetails] ([Amount], [DosageForm], [ExpiryDate], [MedicineId], [PurchaseId], [Quantity], [StorageRequirement], [TotalSum], [VendorId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [PurchaseDetailId]
FROM [PurchaseDetails]
WHERE @@ROWCOUNT = 1 AND [PurchaseDetailId] = scope_identity();
INFO  10:34:25 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Stocks] ([ExpiryDate], [MedicineId], [PurchaseDetailId], [Quantity], [SellingPrice])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [StockId]
FROM [Stocks]
WHERE @@ROWCOUNT = 1 AND [StockId] = scope_identity();
INFO  10:34:25 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [c].[CategoryName]
FROM [Medicines] AS [m]
INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
LEFT JOIN [Feedbacks] AS [f] ON [m].[MedicineId] = [f].[MedicineId]
ORDER BY [m].[MedicineId], [c].[CategoryId]
INFO  10:34:25 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
INFO  10:34:25 Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [v].[VendorId], [v].[Address], [v].[Phone], [v].[VendorName]
FROM [Vendors] AS [v]
ERROR 10:34:25 Error occurred in PurchaseMedicine, rolling back transaction.
PharmacyManagementApi.CustomException.NoVendorFoundException: No vendor found, add the vendor
   at AdminService.PurchaseMedicine(PurchaseDTO items) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\AdminService.cs:line 100
INFO  10:35:14 Adding medicine 2 to cart for customer 5
INFO  10:35:14 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:35:14 Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:35:14 Finding medicine details for medicine ID: 2
INFO  10:35:14 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:35:14 Medicine details found for medicine ID: 2
INFO  10:35:14 Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CartId], [c].[Cost], [c].[CustomerId], [c].[Date], [c].[MedicineId], [c].[Quantity], [c].[TotalCost]
FROM [Carts] AS [c]
INFO  10:35:14 Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Double), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Carts] ([Cost], [CustomerId], [Date], [MedicineId], [Quantity], [TotalCost])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [CartId]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [CartId] = scope_identity();
INFO  10:35:14 Medicine 2 added to cart 4 for customer 5
INFO  10:37:11 Adding medicine 2 to cart for customer 5
INFO  10:37:11 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:37:11 Executed DbCommand (5ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:37:11 Finding medicine details for medicine ID: 2
INFO  10:37:12 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:37:12 Medicine details found for medicine ID: 2
WARN  10:37:12 Expected quantity 3 is not available for medicine 2
ERROR 10:37:12 Error adding medicine 2 to cart for customer 5
PharmacyManagementApi.CustomException.OutOfStockException: Expected Quantity is not available in the stock
   at PharmacyManagementApi.Services.CartService.AddToCart(AddToCartDTO addToCart) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\CartService.cs:line 102
INFO  10:37:23 Adding medicine 1 to cart for customer 5
INFO  10:37:23 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:37:23 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:37:24 Finding medicine details for medicine ID: 1
INFO  10:37:24 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:37:24 Medicine details found for medicine ID: 1
WARN  10:37:24 Expected quantity 3 is not available for medicine 1
ERROR 10:37:24 Error adding medicine 1 to cart for customer 5
PharmacyManagementApi.CustomException.OutOfStockException: Expected Quantity is not available in the stock
   at PharmacyManagementApi.Services.CartService.AddToCart(AddToCartDTO addToCart) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\CartService.cs:line 102
INFO  10:37:31 Adding medicine 3 to cart for customer 5
INFO  10:37:31 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:37:31 Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:37:31 Finding medicine details for medicine ID: 3
INFO  10:37:31 Executed DbCommand (14ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:37:31 Medicine details found for medicine ID: 3
INFO  10:37:31 Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CartId], [c].[Cost], [c].[CustomerId], [c].[Date], [c].[MedicineId], [c].[Quantity], [c].[TotalCost]
FROM [Carts] AS [c]
INFO  10:37:31 Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Double), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Carts] ([Cost], [CustomerId], [Date], [MedicineId], [Quantity], [TotalCost])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [CartId]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [CartId] = scope_identity();
INFO  10:37:31 Medicine 3 added to cart 5 for customer 5
INFO  10:37:50 Updating cart for medicine 2 and customer 5
INFO  10:37:50 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:37:50 Executed DbCommand (5ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:37:50 Finding medicine details for medicine ID: 2
INFO  10:37:50 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:37:50 Medicine details found for medicine ID: 2
WARN  10:37:50 Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
INFO  10:37:50 Executed DbCommand (32ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[OrderDate], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [t3].[CartId], [t3].[Cost], [t3].[CustomerId], [t3].[Date], [t3].[MedicineId], [t3].[Quantity], [t3].[TotalCost], [t3].[MedicineId0], [t3].[CategoryId], [t3].[CurrentQuantity], [t3].[FeedbackCount], [t3].[FeedbackSum], [t3].[MedicineName], [t3].[SellingPrice], [t3].[TotalNumberOfPurchase], [t4].[MedicationId], [t4].[CustomerId], [t4].[MedicationName], [t4].[MedicationItemId], [t4].[MedicationId0], [t4].[MedicineId], [t4].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[OrderDate], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN (
    SELECT [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [m1].[MedicineId] AS [MedicineId0], [m1].[CategoryId], [m1].[CurrentQuantity], [m1].[FeedbackCount], [m1].[FeedbackSum], [m1].[MedicineName], [m1].[SellingPrice], [m1].[TotalNumberOfPurchase]
    FROM [Carts] AS [c0]
    INNER JOIN [Medicines] AS [m1] ON [c0].[MedicineId] = [m1].[MedicineId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
LEFT JOIN (
    SELECT [m2].[MedicationId], [m2].[CustomerId], [m2].[MedicationName], [m3].[MedicationItemId], [m3].[MedicationId] AS [MedicationId0], [m3].[MedicineId], [m3].[Quantity]
    FROM [Medications] AS [m2]
    LEFT JOIN [MedicationItems] AS [m3] ON [m2].[MedicationId] = [m3].[MedicationId]
) AS [t4] ON [t].[CustomerId] = [t4].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [t3].[CartId], [t3].[MedicineId0], [t4].[MedicationId]
WARN  10:37:50 No cart found for medicine 2 and customer 5
ERROR 10:37:50 Error updating cart for medicine 2 and customer 5
PharmacyManagementApi.CustomException.NoCartFoundException: No cart Contains the Medicine Id , Add the cart first
   at PharmacyManagementApi.Services.CartService.UpdateCart(UpdateCartDTO addToCart) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\CartService.cs:line 163
INFO  10:38:21 Updating cart for medicine 3 and customer 5
INFO  10:38:21 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:38:21 Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:38:21 Finding medicine details for medicine ID: 3
INFO  10:38:21 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:38:21 Medicine details found for medicine ID: 3
INFO  10:38:21 Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[OrderDate], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [t3].[CartId], [t3].[Cost], [t3].[CustomerId], [t3].[Date], [t3].[MedicineId], [t3].[Quantity], [t3].[TotalCost], [t3].[MedicineId0], [t3].[CategoryId], [t3].[CurrentQuantity], [t3].[FeedbackCount], [t3].[FeedbackSum], [t3].[MedicineName], [t3].[SellingPrice], [t3].[TotalNumberOfPurchase], [t4].[MedicationId], [t4].[CustomerId], [t4].[MedicationName], [t4].[MedicationItemId], [t4].[MedicationId0], [t4].[MedicineId], [t4].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[OrderDate], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN (
    SELECT [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [m1].[MedicineId] AS [MedicineId0], [m1].[CategoryId], [m1].[CurrentQuantity], [m1].[FeedbackCount], [m1].[FeedbackSum], [m1].[MedicineName], [m1].[SellingPrice], [m1].[TotalNumberOfPurchase]
    FROM [Carts] AS [c0]
    INNER JOIN [Medicines] AS [m1] ON [c0].[MedicineId] = [m1].[MedicineId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
LEFT JOIN (
    SELECT [m2].[MedicationId], [m2].[CustomerId], [m2].[MedicationName], [m3].[MedicationItemId], [m3].[MedicationId] AS [MedicationId0], [m3].[MedicineId], [m3].[Quantity]
    FROM [Medications] AS [m2]
    LEFT JOIN [MedicationItems] AS [m3] ON [m2].[MedicationId] = [m3].[MedicationId]
) AS [t4] ON [t].[CustomerId] = [t4].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [t3].[CartId], [t3].[MedicineId0], [t4].[MedicationId]
INFO  10:38:21 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CartId], [c].[Cost], [c].[CustomerId], [c].[Date], [c].[MedicineId], [c].[Quantity], [c].[TotalCost]
FROM [Carts] AS [c]
WHERE [c].[CartId] = @__key_0
INFO  10:38:21 Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Carts] SET [Quantity] = @p0
WHERE [CartId] = @p1;
SELECT @@ROWCOUNT;
INFO  10:38:21 Cart updated successfully for medicine 3 and customer 5
INFO  10:38:33 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:38:33 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[OrderDate], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [t3].[CartId], [t3].[Cost], [t3].[CustomerId], [t3].[Date], [t3].[MedicineId], [t3].[Quantity], [t3].[TotalCost], [t3].[MedicineId0], [t3].[CategoryId], [t3].[CurrentQuantity], [t3].[FeedbackCount], [t3].[FeedbackSum], [t3].[MedicineName], [t3].[SellingPrice], [t3].[TotalNumberOfPurchase], [t4].[MedicationId], [t4].[CustomerId], [t4].[MedicationName], [t4].[MedicationItemId], [t4].[MedicationId0], [t4].[MedicineId], [t4].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[OrderDate], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN (
    SELECT [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [m1].[MedicineId] AS [MedicineId0], [m1].[CategoryId], [m1].[CurrentQuantity], [m1].[FeedbackCount], [m1].[FeedbackSum], [m1].[MedicineName], [m1].[SellingPrice], [m1].[TotalNumberOfPurchase]
    FROM [Carts] AS [c0]
    INNER JOIN [Medicines] AS [m1] ON [c0].[MedicineId] = [m1].[MedicineId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
LEFT JOIN (
    SELECT [m2].[MedicationId], [m2].[CustomerId], [m2].[MedicationName], [m3].[MedicationItemId], [m3].[MedicationId] AS [MedicationId0], [m3].[MedicineId], [m3].[Quantity]
    FROM [Medications] AS [m2]
    LEFT JOIN [MedicationItems] AS [m3] ON [m2].[MedicationId] = [m3].[MedicationId]
) AS [t4] ON [t].[CustomerId] = [t4].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [t3].[CartId], [t3].[MedicineId0], [t4].[MedicationId]
INFO  10:38:46 Updating cart for medicine 3 and customer 5
INFO  10:38:46 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:38:46 Executed DbCommand (4ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:38:46 Finding medicine details for medicine ID: 3
INFO  10:38:46 Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:38:47 Medicine details found for medicine ID: 3
INFO  10:38:47 Executed DbCommand (29ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[OrderDate], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [t3].[CartId], [t3].[Cost], [t3].[CustomerId], [t3].[Date], [t3].[MedicineId], [t3].[Quantity], [t3].[TotalCost], [t3].[MedicineId0], [t3].[CategoryId], [t3].[CurrentQuantity], [t3].[FeedbackCount], [t3].[FeedbackSum], [t3].[MedicineName], [t3].[SellingPrice], [t3].[TotalNumberOfPurchase], [t4].[MedicationId], [t4].[CustomerId], [t4].[MedicationName], [t4].[MedicationItemId], [t4].[MedicationId0], [t4].[MedicineId], [t4].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[OrderDate], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN (
    SELECT [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [m1].[MedicineId] AS [MedicineId0], [m1].[CategoryId], [m1].[CurrentQuantity], [m1].[FeedbackCount], [m1].[FeedbackSum], [m1].[MedicineName], [m1].[SellingPrice], [m1].[TotalNumberOfPurchase]
    FROM [Carts] AS [c0]
    INNER JOIN [Medicines] AS [m1] ON [c0].[MedicineId] = [m1].[MedicineId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
LEFT JOIN (
    SELECT [m2].[MedicationId], [m2].[CustomerId], [m2].[MedicationName], [m3].[MedicationItemId], [m3].[MedicationId] AS [MedicationId0], [m3].[MedicineId], [m3].[Quantity]
    FROM [Medications] AS [m2]
    LEFT JOIN [MedicationItems] AS [m3] ON [m2].[MedicationId] = [m3].[MedicationId]
) AS [t4] ON [t].[CustomerId] = [t4].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [t3].[CartId], [t3].[MedicineId0], [t4].[MedicationId]
WARN  10:38:47 The expected quantity 5 is not available in the cart for medicine 3
ERROR 10:38:47 Error updating cart for medicine 3 and customer 5
PharmacyManagementApi.CustomException.NegativeValueException: The expected quantity is not available in the cart
   at PharmacyManagementApi.Services.CartService.UpdateCart(UpdateCartDTO addToCart) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\CartService.cs:line 180
INFO  10:39:08 Updating cart for medicine 3 and customer 5
INFO  10:39:08 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:39:08 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:39:08 Finding medicine details for medicine ID: 3
INFO  10:39:08 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:39:08 Medicine details found for medicine ID: 3
INFO  10:39:08 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[OrderDate], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [t3].[CartId], [t3].[Cost], [t3].[CustomerId], [t3].[Date], [t3].[MedicineId], [t3].[Quantity], [t3].[TotalCost], [t3].[MedicineId0], [t3].[CategoryId], [t3].[CurrentQuantity], [t3].[FeedbackCount], [t3].[FeedbackSum], [t3].[MedicineName], [t3].[SellingPrice], [t3].[TotalNumberOfPurchase], [t4].[MedicationId], [t4].[CustomerId], [t4].[MedicationName], [t4].[MedicationItemId], [t4].[MedicationId0], [t4].[MedicineId], [t4].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[OrderDate], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN (
    SELECT [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [m1].[MedicineId] AS [MedicineId0], [m1].[CategoryId], [m1].[CurrentQuantity], [m1].[FeedbackCount], [m1].[FeedbackSum], [m1].[MedicineName], [m1].[SellingPrice], [m1].[TotalNumberOfPurchase]
    FROM [Carts] AS [c0]
    INNER JOIN [Medicines] AS [m1] ON [c0].[MedicineId] = [m1].[MedicineId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
LEFT JOIN (
    SELECT [m2].[MedicationId], [m2].[CustomerId], [m2].[MedicationName], [m3].[MedicationItemId], [m3].[MedicationId] AS [MedicationId0], [m3].[MedicineId], [m3].[Quantity]
    FROM [Medications] AS [m2]
    LEFT JOIN [MedicationItems] AS [m3] ON [m2].[MedicationId] = [m3].[MedicationId]
) AS [t4] ON [t].[CustomerId] = [t4].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [t3].[CartId], [t3].[MedicineId0], [t4].[MedicationId]
WARN  10:39:08 Expected quantity 103 is not available in stock for medicine 3
ERROR 10:39:08 Error updating cart for medicine 3 and customer 5
PharmacyManagementApi.CustomException.OutOfStockException: Expected Quantity is not available in the stock
   at PharmacyManagementApi.Services.CartService.UpdateCart(UpdateCartDTO addToCart) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\CartService.cs:line 187
INFO  10:39:15 Updating cart for medicine 3 and customer 5
INFO  10:39:15 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:39:15 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:39:15 Finding medicine details for medicine ID: 3
INFO  10:39:15 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:39:15 Medicine details found for medicine ID: 3
INFO  10:39:15 Executed DbCommand (4ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[OrderDate], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [t3].[CartId], [t3].[Cost], [t3].[CustomerId], [t3].[Date], [t3].[MedicineId], [t3].[Quantity], [t3].[TotalCost], [t3].[MedicineId0], [t3].[CategoryId], [t3].[CurrentQuantity], [t3].[FeedbackCount], [t3].[FeedbackSum], [t3].[MedicineName], [t3].[SellingPrice], [t3].[TotalNumberOfPurchase], [t4].[MedicationId], [t4].[CustomerId], [t4].[MedicationName], [t4].[MedicationItemId], [t4].[MedicationId0], [t4].[MedicineId], [t4].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[OrderDate], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN (
    SELECT [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [m1].[MedicineId] AS [MedicineId0], [m1].[CategoryId], [m1].[CurrentQuantity], [m1].[FeedbackCount], [m1].[FeedbackSum], [m1].[MedicineName], [m1].[SellingPrice], [m1].[TotalNumberOfPurchase]
    FROM [Carts] AS [c0]
    INNER JOIN [Medicines] AS [m1] ON [c0].[MedicineId] = [m1].[MedicineId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
LEFT JOIN (
    SELECT [m2].[MedicationId], [m2].[CustomerId], [m2].[MedicationName], [m3].[MedicationItemId], [m3].[MedicationId] AS [MedicationId0], [m3].[MedicineId], [m3].[Quantity]
    FROM [Medications] AS [m2]
    LEFT JOIN [MedicationItems] AS [m3] ON [m2].[MedicationId] = [m3].[MedicationId]
) AS [t4] ON [t].[CustomerId] = [t4].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [t3].[CartId], [t3].[MedicineId0], [t4].[MedicationId]
INFO  10:39:15 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CartId], [c].[Cost], [c].[CustomerId], [c].[Date], [c].[MedicineId], [c].[Quantity], [c].[TotalCost]
FROM [Carts] AS [c]
WHERE [c].[CartId] = @__key_0
INFO  10:39:15 Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Carts] SET [Quantity] = @p0
WHERE [CartId] = @p1;
SELECT @@ROWCOUNT;
INFO  10:39:15 Cart updated successfully for medicine 3 and customer 5
INFO  10:39:38 Removing cart item with ID: 2
INFO  10:39:38 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:39:38 Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CartId], [c].[Cost], [c].[CustomerId], [c].[Date], [c].[MedicineId], [c].[Quantity], [c].[TotalCost]
FROM [Carts] AS [c]
WHERE [c].[CartId] = @__key_0
ERROR 10:39:38 Error removing cart item with ID: 2
PharmacyManagementApi.CustomException.NoCartFoundException: No Cart found with given id 2
   at PharmacyManagementApi.Repositories.General_Repositories.CartRepository.Get(Int32 key) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Repositories\General_Repositories\CartRepository.cs:line 65
   at PharmacyManagementApi.Services.CartService.RemoveFromCart(Int32 cartId) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\CartService.cs:line 227
INFO  10:39:59 Removing cart item with ID: 1
INFO  10:39:59 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:39:59 Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CartId], [c].[Cost], [c].[CustomerId], [c].[Date], [c].[MedicineId], [c].[Quantity], [c].[TotalCost]
FROM [Carts] AS [c]
WHERE [c].[CartId] = @__key_0
ERROR 10:39:59 Error removing cart item with ID: 1
PharmacyManagementApi.CustomException.NoCartFoundException: No Cart found with given id 1
   at PharmacyManagementApi.Repositories.General_Repositories.CartRepository.Get(Int32 key) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Repositories\General_Repositories\CartRepository.cs:line 65
   at PharmacyManagementApi.Services.CartService.RemoveFromCart(Int32 cartId) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\CartService.cs:line 227
INFO  10:40:54 Removing cart item with ID: 1
INFO  10:40:54 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:40:54 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CartId], [c].[Cost], [c].[CustomerId], [c].[Date], [c].[MedicineId], [c].[Quantity], [c].[TotalCost]
FROM [Carts] AS [c]
WHERE [c].[CartId] = @__key_0
ERROR 10:40:55 Error removing cart item with ID: 1
PharmacyManagementApi.CustomException.NoCartFoundException: No Cart found with given id 1
   at PharmacyManagementApi.Repositories.General_Repositories.CartRepository.Get(Int32 key) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Repositories\General_Repositories\CartRepository.cs:line 65
   at PharmacyManagementApi.Services.CartService.RemoveFromCart(Int32 cartId) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\CartService.cs:line 227
INFO  10:41:31 Removing cart item with ID: 5
INFO  10:41:31 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:41:31 Executed DbCommand (4ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CartId], [c].[Cost], [c].[CustomerId], [c].[Date], [c].[MedicineId], [c].[Quantity], [c].[TotalCost]
FROM [Carts] AS [c]
WHERE [c].[CartId] = @__key_0
INFO  10:41:31 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CartId], [c].[Cost], [c].[CustomerId], [c].[Date], [c].[MedicineId], [c].[Quantity], [c].[TotalCost]
FROM [Carts] AS [c]
WHERE [c].[CartId] = @__key_0
INFO  10:41:31 Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [Carts]
WHERE [CartId] = @p0;
SELECT @@ROWCOUNT;
INFO  10:41:31 Cart item with ID: 5 removed successfully
INFO  10:52:50 Adding medicine 3 to cart for customer 5
INFO  10:52:50 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:52:50 Executed DbCommand (8ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:52:50 Finding medicine details for medicine ID: 3
INFO  10:52:50 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:52:50 Medicine details found for medicine ID: 3
INFO  10:52:50 Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CartId], [c].[Cost], [c].[CustomerId], [c].[Date], [c].[MedicineId], [c].[Quantity], [c].[TotalCost]
FROM [Carts] AS [c]
INFO  10:52:50 Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Double), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Carts] ([Cost], [CustomerId], [Date], [MedicineId], [Quantity], [TotalCost])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [CartId]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [CartId] = scope_identity();
INFO  10:52:50 Medicine 3 added to cart 6 for customer 5
INFO  10:53:15 Performing checkout for customer 4
INFO  10:53:15 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:53:15 Executed DbCommand (38ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[OrderDate], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [t3].[CartId], [t3].[Cost], [t3].[CustomerId], [t3].[Date], [t3].[MedicineId], [t3].[Quantity], [t3].[TotalCost], [t3].[MedicineId0], [t3].[CategoryId], [t3].[CurrentQuantity], [t3].[FeedbackCount], [t3].[FeedbackSum], [t3].[MedicineName], [t3].[SellingPrice], [t3].[TotalNumberOfPurchase], [t4].[MedicationId], [t4].[CustomerId], [t4].[MedicationName], [t4].[MedicationItemId], [t4].[MedicationId0], [t4].[MedicineId], [t4].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[OrderDate], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN (
    SELECT [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [m1].[MedicineId] AS [MedicineId0], [m1].[CategoryId], [m1].[CurrentQuantity], [m1].[FeedbackCount], [m1].[FeedbackSum], [m1].[MedicineName], [m1].[SellingPrice], [m1].[TotalNumberOfPurchase]
    FROM [Carts] AS [c0]
    INNER JOIN [Medicines] AS [m1] ON [c0].[MedicineId] = [m1].[MedicineId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
LEFT JOIN (
    SELECT [m2].[MedicationId], [m2].[CustomerId], [m2].[MedicationName], [m3].[MedicationItemId], [m3].[MedicationId] AS [MedicationId0], [m3].[MedicineId], [m3].[Quantity]
    FROM [Medications] AS [m2]
    LEFT JOIN [MedicationItems] AS [m3] ON [m2].[MedicationId] = [m3].[MedicationId]
) AS [t4] ON [t].[CustomerId] = [t4].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [t3].[CartId], [t3].[MedicineId0], [t4].[MedicationId]
WARN  10:53:15 Cart is empty for customer 4
ERROR 10:53:15 Error during checkout for customer 4
PharmacyManagementApi.CustomException.CartEmptyException: Your Cart is Empty
   at PharmacyManagementApi.Services.CartService.Checkout(Int32 userId) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\CartService.cs:line 271
INFO  10:53:32 Performing checkout for customer 4
INFO  10:53:32 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:53:32 Executed DbCommand (4ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[OrderDate], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [t3].[CartId], [t3].[Cost], [t3].[CustomerId], [t3].[Date], [t3].[MedicineId], [t3].[Quantity], [t3].[TotalCost], [t3].[MedicineId0], [t3].[CategoryId], [t3].[CurrentQuantity], [t3].[FeedbackCount], [t3].[FeedbackSum], [t3].[MedicineName], [t3].[SellingPrice], [t3].[TotalNumberOfPurchase], [t4].[MedicationId], [t4].[CustomerId], [t4].[MedicationName], [t4].[MedicationItemId], [t4].[MedicationId0], [t4].[MedicineId], [t4].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[OrderDate], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN (
    SELECT [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [m1].[MedicineId] AS [MedicineId0], [m1].[CategoryId], [m1].[CurrentQuantity], [m1].[FeedbackCount], [m1].[FeedbackSum], [m1].[MedicineName], [m1].[SellingPrice], [m1].[TotalNumberOfPurchase]
    FROM [Carts] AS [c0]
    INNER JOIN [Medicines] AS [m1] ON [c0].[MedicineId] = [m1].[MedicineId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
LEFT JOIN (
    SELECT [m2].[MedicationId], [m2].[CustomerId], [m2].[MedicationName], [m3].[MedicationItemId], [m3].[MedicationId] AS [MedicationId0], [m3].[MedicineId], [m3].[Quantity]
    FROM [Medications] AS [m2]
    LEFT JOIN [MedicationItems] AS [m3] ON [m2].[MedicationId] = [m3].[MedicationId]
) AS [t4] ON [t].[CustomerId] = [t4].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [t3].[CartId], [t3].[MedicineId0], [t4].[MedicationId]
WARN  10:53:32 Cart is empty for customer 4
ERROR 10:53:32 Error during checkout for customer 4
PharmacyManagementApi.CustomException.CartEmptyException: Your Cart is Empty
   at PharmacyManagementApi.Services.CartService.Checkout(Int32 userId) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\CartService.cs:line 271
INFO  10:53:45 Performing checkout for customer 7
INFO  10:53:45 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:53:45 Executed DbCommand (6ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[OrderDate], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [t3].[CartId], [t3].[Cost], [t3].[CustomerId], [t3].[Date], [t3].[MedicineId], [t3].[Quantity], [t3].[TotalCost], [t3].[MedicineId0], [t3].[CategoryId], [t3].[CurrentQuantity], [t3].[FeedbackCount], [t3].[FeedbackSum], [t3].[MedicineName], [t3].[SellingPrice], [t3].[TotalNumberOfPurchase], [t4].[MedicationId], [t4].[CustomerId], [t4].[MedicationName], [t4].[MedicationItemId], [t4].[MedicationId0], [t4].[MedicineId], [t4].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[OrderDate], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN (
    SELECT [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [m1].[MedicineId] AS [MedicineId0], [m1].[CategoryId], [m1].[CurrentQuantity], [m1].[FeedbackCount], [m1].[FeedbackSum], [m1].[MedicineName], [m1].[SellingPrice], [m1].[TotalNumberOfPurchase]
    FROM [Carts] AS [c0]
    INNER JOIN [Medicines] AS [m1] ON [c0].[MedicineId] = [m1].[MedicineId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
LEFT JOIN (
    SELECT [m2].[MedicationId], [m2].[CustomerId], [m2].[MedicationName], [m3].[MedicationItemId], [m3].[MedicationId] AS [MedicationId0], [m3].[MedicineId], [m3].[Quantity]
    FROM [Medications] AS [m2]
    LEFT JOIN [MedicationItems] AS [m3] ON [m2].[MedicationId] = [m3].[MedicationId]
) AS [t4] ON [t].[CustomerId] = [t4].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [t3].[CartId], [t3].[MedicineId0], [t4].[MedicationId]
WARN  10:53:45 Cart is empty for customer 7
ERROR 10:53:46 Error during checkout for customer 7
PharmacyManagementApi.CustomException.CartEmptyException: Your Cart is Empty
   at PharmacyManagementApi.Services.CartService.Checkout(Int32 userId) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\CartService.cs:line 271
INFO  10:54:55 Performing checkout for customer 5
INFO  10:54:55 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:54:55 Executed DbCommand (32ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[OrderDate], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [t3].[CartId], [t3].[Cost], [t3].[CustomerId], [t3].[Date], [t3].[MedicineId], [t3].[Quantity], [t3].[TotalCost], [t3].[MedicineId0], [t3].[CategoryId], [t3].[CurrentQuantity], [t3].[FeedbackCount], [t3].[FeedbackSum], [t3].[MedicineName], [t3].[SellingPrice], [t3].[TotalNumberOfPurchase], [t4].[MedicationId], [t4].[CustomerId], [t4].[MedicationName], [t4].[MedicationItemId], [t4].[MedicationId0], [t4].[MedicineId], [t4].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[OrderDate], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN (
    SELECT [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [m1].[MedicineId] AS [MedicineId0], [m1].[CategoryId], [m1].[CurrentQuantity], [m1].[FeedbackCount], [m1].[FeedbackSum], [m1].[MedicineName], [m1].[SellingPrice], [m1].[TotalNumberOfPurchase]
    FROM [Carts] AS [c0]
    INNER JOIN [Medicines] AS [m1] ON [c0].[MedicineId] = [m1].[MedicineId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
LEFT JOIN (
    SELECT [m2].[MedicationId], [m2].[CustomerId], [m2].[MedicationName], [m3].[MedicationItemId], [m3].[MedicationId] AS [MedicationId0], [m3].[MedicineId], [m3].[Quantity]
    FROM [Medications] AS [m2]
    LEFT JOIN [MedicationItems] AS [m3] ON [m2].[MedicationId] = [m3].[MedicationId]
) AS [t4] ON [t].[CustomerId] = [t4].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [t3].[CartId], [t3].[MedicineId0], [t4].[MedicationId]
INFO  10:54:55 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[OrderDate], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [t3].[CartId], [t3].[Cost], [t3].[CustomerId], [t3].[Date], [t3].[MedicineId], [t3].[Quantity], [t3].[TotalCost], [t3].[MedicineId0], [t3].[CategoryId], [t3].[CurrentQuantity], [t3].[FeedbackCount], [t3].[FeedbackSum], [t3].[MedicineName], [t3].[SellingPrice], [t3].[TotalNumberOfPurchase], [t4].[MedicationId], [t4].[CustomerId], [t4].[MedicationName], [t4].[MedicationItemId], [t4].[MedicationId0], [t4].[MedicineId], [t4].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[OrderDate], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN (
    SELECT [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [m1].[MedicineId] AS [MedicineId0], [m1].[CategoryId], [m1].[CurrentQuantity], [m1].[FeedbackCount], [m1].[FeedbackSum], [m1].[MedicineName], [m1].[SellingPrice], [m1].[TotalNumberOfPurchase]
    FROM [Carts] AS [c0]
    INNER JOIN [Medicines] AS [m1] ON [c0].[MedicineId] = [m1].[MedicineId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
LEFT JOIN (
    SELECT [m2].[MedicationId], [m2].[CustomerId], [m2].[MedicationName], [m3].[MedicationItemId], [m3].[MedicationId] AS [MedicationId0], [m3].[MedicineId], [m3].[Quantity]
    FROM [Medications] AS [m2]
    LEFT JOIN [MedicationItems] AS [m3] ON [m2].[MedicationId] = [m3].[MedicationId]
) AS [t4] ON [t].[CustomerId] = [t4].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [t3].[CartId], [t3].[MedicineId0], [t4].[MedicationId]
INFO  10:54:55 Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Single), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Double), @p4='?' (DbType = Double), @p5='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([CustomerId], [Discount], [OrderDate], [PaidAmount], [ShipmentCost], [TotalAmount])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [OrderId]
FROM [Orders]
WHERE @@ROWCOUNT = 1 AND [OrderId] = scope_identity();
INFO  10:54:55 Executed DbCommand (10ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:54:55 Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Double), @p1='?' (DbType = Boolean), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([Cost], [DeliveryStatus], [MedicineId], [OrderId], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [OrderDetailId]
FROM [OrderDetails]
WHERE @@ROWCOUNT = 1 AND [OrderDetailId] = scope_identity();
INFO  10:54:55 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  10:54:55 Executed DbCommand (3ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Medicines] SET [CurrentQuantity] = @p0, [TotalNumberOfPurchase] = @p1
WHERE [MedicineId] = @p2;
SELECT @@ROWCOUNT;
INFO  10:54:55 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CartId], [c].[Cost], [c].[CustomerId], [c].[Date], [c].[MedicineId], [c].[Quantity], [c].[TotalCost]
FROM [Carts] AS [c]
WHERE [c].[CartId] = @__key_0
INFO  10:54:55 Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [Carts]
WHERE [CartId] = @p0;
SELECT @@ROWCOUNT;
INFO  10:54:55 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[OrderDate], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__key_0
INFO  10:54:55 Executed DbCommand (2ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Double), @p1='?' (DbType = Double), @p2='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Orders] SET [PaidAmount] = @p0, [ShipmentCost] = @p1, [TotalAmount] = @p2
WHERE [OrderId] = @p3;
SELECT @@ROWCOUNT;
INFO  10:54:55 Checkout completed successfully for customer 5, order ID: 2
INFO  10:55:55 Fetching orders for customer 2
INFO  10:55:55 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:55:55 Executed DbCommand (31ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[OrderDate], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [t3].[CartId], [t3].[Cost], [t3].[CustomerId], [t3].[Date], [t3].[MedicineId], [t3].[Quantity], [t3].[TotalCost], [t3].[MedicineId0], [t3].[CategoryId], [t3].[CurrentQuantity], [t3].[FeedbackCount], [t3].[FeedbackSum], [t3].[MedicineName], [t3].[SellingPrice], [t3].[TotalNumberOfPurchase], [t4].[MedicationId], [t4].[CustomerId], [t4].[MedicationName], [t4].[MedicationItemId], [t4].[MedicationId0], [t4].[MedicineId], [t4].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[OrderDate], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN (
    SELECT [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [m1].[MedicineId] AS [MedicineId0], [m1].[CategoryId], [m1].[CurrentQuantity], [m1].[FeedbackCount], [m1].[FeedbackSum], [m1].[MedicineName], [m1].[SellingPrice], [m1].[TotalNumberOfPurchase]
    FROM [Carts] AS [c0]
    INNER JOIN [Medicines] AS [m1] ON [c0].[MedicineId] = [m1].[MedicineId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
LEFT JOIN (
    SELECT [m2].[MedicationId], [m2].[CustomerId], [m2].[MedicationName], [m3].[MedicationItemId], [m3].[MedicationId] AS [MedicationId0], [m3].[MedicineId], [m3].[Quantity]
    FROM [Medications] AS [m2]
    LEFT JOIN [MedicationItems] AS [m3] ON [m2].[MedicationId] = [m3].[MedicationId]
) AS [t4] ON [t].[CustomerId] = [t4].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [t3].[CartId], [t3].[MedicineId0], [t4].[MedicationId]
WARN  10:55:55 No orders found for customer 2
ERROR 10:55:55 Error fetching orders for customer 2
PharmacyManagementApi.CustomException.NoOrderFoundException: There is no order for the customer
   at PharmacyManagementApi.Services.ViewService.GetAllOrders(Int32 userId) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\ViewService.cs:line 146
INFO  10:56:13 Fetching all product details
INFO  10:56:13 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  10:56:13 Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [c].[CategoryName]
FROM [Medicines] AS [m]
INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
LEFT JOIN [Feedbacks] AS [f] ON [m].[MedicineId] = [f].[MedicineId]
ORDER BY [m].[MedicineId], [c].[CategoryId]
INFO  10:56:13 Product details fetched successfully
INFO  11:01:00 Fetching all product details
INFO  11:01:00 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:01:00 Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [c].[CategoryName]
FROM [Medicines] AS [m]
INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
LEFT JOIN [Feedbacks] AS [f] ON [m].[MedicineId] = [f].[MedicineId]
ORDER BY [m].[MedicineId], [c].[CategoryId]
INFO  11:01:00 Product details fetched successfully
INFO  11:01:40 Now listening on: http://localhost:5033
INFO  11:01:40 Application started. Press Ctrl+C to shut down.
INFO  11:01:40 Hosting environment: Development
INFO  11:01:40 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
WARN  11:01:44 Failed to determine the https port for redirect.
INFO  11:01:45 Fetching all product details
INFO  11:01:46 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:01:48 Executed DbCommand (112ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [c].[CategoryName]
FROM [Medicines] AS [m]
INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
LEFT JOIN [Feedbacks] AS [f] ON [m].[MedicineId] = [f].[MedicineId]
ORDER BY [m].[MedicineId], [c].[CategoryId]
INFO  11:01:48 Product details fetched successfully
INFO  11:02:05 Fetching medications for customer 2
INFO  11:02:05 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
WARN  11:02:05 Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
INFO  11:02:05 Executed DbCommand (90ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[OrderDate], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [t3].[CartId], [t3].[Cost], [t3].[CustomerId], [t3].[Date], [t3].[MedicineId], [t3].[Quantity], [t3].[TotalCost], [t3].[MedicineId0], [t3].[CategoryId], [t3].[CurrentQuantity], [t3].[FeedbackCount], [t3].[FeedbackSum], [t3].[MedicineName], [t3].[SellingPrice], [t3].[TotalNumberOfPurchase], [t4].[MedicationId], [t4].[CustomerId], [t4].[MedicationName], [t4].[MedicationItemId], [t4].[MedicationId0], [t4].[MedicineId], [t4].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[OrderDate], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN (
    SELECT [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [m1].[MedicineId] AS [MedicineId0], [m1].[CategoryId], [m1].[CurrentQuantity], [m1].[FeedbackCount], [m1].[FeedbackSum], [m1].[MedicineName], [m1].[SellingPrice], [m1].[TotalNumberOfPurchase]
    FROM [Carts] AS [c0]
    INNER JOIN [Medicines] AS [m1] ON [c0].[MedicineId] = [m1].[MedicineId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
LEFT JOIN (
    SELECT [m2].[MedicationId], [m2].[CustomerId], [m2].[MedicationName], [m3].[MedicationItemId], [m3].[MedicationId] AS [MedicationId0], [m3].[MedicineId], [m3].[Quantity]
    FROM [Medications] AS [m2]
    LEFT JOIN [MedicationItems] AS [m3] ON [m2].[MedicationId] = [m3].[MedicationId]
) AS [t4] ON [t].[CustomerId] = [t4].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [t3].[CartId], [t3].[MedicineId0], [t4].[MedicationId]
WARN  11:02:05 No medications found for customer 2
ERROR 11:02:05 Error fetching medications for customer 2
PharmacyManagementApi.CustomException.NoMedicationFoundException: Customer have no medication
   at PharmacyManagementApi.Services.ViewService.ViewMyMedications(Int32 customerId) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\ViewService.cs:line 93
INFO  11:02:12 Fetching orders for customer 2
INFO  11:02:12 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:02:12 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[OrderDate], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [t3].[CartId], [t3].[Cost], [t3].[CustomerId], [t3].[Date], [t3].[MedicineId], [t3].[Quantity], [t3].[TotalCost], [t3].[MedicineId0], [t3].[CategoryId], [t3].[CurrentQuantity], [t3].[FeedbackCount], [t3].[FeedbackSum], [t3].[MedicineName], [t3].[SellingPrice], [t3].[TotalNumberOfPurchase], [t4].[MedicationId], [t4].[CustomerId], [t4].[MedicationName], [t4].[MedicationItemId], [t4].[MedicationId0], [t4].[MedicineId], [t4].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[OrderDate], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN (
    SELECT [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [m1].[MedicineId] AS [MedicineId0], [m1].[CategoryId], [m1].[CurrentQuantity], [m1].[FeedbackCount], [m1].[FeedbackSum], [m1].[MedicineName], [m1].[SellingPrice], [m1].[TotalNumberOfPurchase]
    FROM [Carts] AS [c0]
    INNER JOIN [Medicines] AS [m1] ON [c0].[MedicineId] = [m1].[MedicineId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
LEFT JOIN (
    SELECT [m2].[MedicationId], [m2].[CustomerId], [m2].[MedicationName], [m3].[MedicationItemId], [m3].[MedicationId] AS [MedicationId0], [m3].[MedicineId], [m3].[Quantity]
    FROM [Medications] AS [m2]
    LEFT JOIN [MedicationItems] AS [m3] ON [m2].[MedicationId] = [m3].[MedicationId]
) AS [t4] ON [t].[CustomerId] = [t4].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [t3].[CartId], [t3].[MedicineId0], [t4].[MedicationId]
WARN  11:02:12 No orders found for customer 2
ERROR 11:02:12 Error fetching orders for customer 2
PharmacyManagementApi.CustomException.NoOrderFoundException: There is no order for the customer
   at PharmacyManagementApi.Services.ViewService.GetAllOrders(Int32 userId) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\ViewService.cs:line 147
INFO  11:02:27 Fetching orders for customer 5
INFO  11:02:27 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:02:27 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[OrderDate], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [t3].[CartId], [t3].[Cost], [t3].[CustomerId], [t3].[Date], [t3].[MedicineId], [t3].[Quantity], [t3].[TotalCost], [t3].[MedicineId0], [t3].[CategoryId], [t3].[CurrentQuantity], [t3].[FeedbackCount], [t3].[FeedbackSum], [t3].[MedicineName], [t3].[SellingPrice], [t3].[TotalNumberOfPurchase], [t4].[MedicationId], [t4].[CustomerId], [t4].[MedicationName], [t4].[MedicationItemId], [t4].[MedicationId0], [t4].[MedicineId], [t4].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[OrderDate], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN (
    SELECT [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [m1].[MedicineId] AS [MedicineId0], [m1].[CategoryId], [m1].[CurrentQuantity], [m1].[FeedbackCount], [m1].[FeedbackSum], [m1].[MedicineName], [m1].[SellingPrice], [m1].[TotalNumberOfPurchase]
    FROM [Carts] AS [c0]
    INNER JOIN [Medicines] AS [m1] ON [c0].[MedicineId] = [m1].[MedicineId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
LEFT JOIN (
    SELECT [m2].[MedicationId], [m2].[CustomerId], [m2].[MedicationName], [m3].[MedicationItemId], [m3].[MedicationId] AS [MedicationId0], [m3].[MedicineId], [m3].[Quantity]
    FROM [Medications] AS [m2]
    LEFT JOIN [MedicationItems] AS [m3] ON [m2].[MedicationId] = [m3].[MedicationId]
) AS [t4] ON [t].[CustomerId] = [t4].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [t3].[CartId], [t3].[MedicineId0], [t4].[MedicationId]
INFO  11:02:27 1 orders found for customer 5
INFO  11:02:41 Fetching all pending orders.
INFO  11:02:41 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:02:41 Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [o].[OrderDetailId], [o].[Cost], [o].[DeliveryStatus], [o].[MedicineId], [o].[OrderId], [o].[Quantity], [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase]
FROM [OrderDetails] AS [o]
INNER JOIN [Medicines] AS [m] ON [o].[MedicineId] = [m].[MedicineId]
INFO  11:02:41 Fetched 1 pending orders.
INFO  11:14:08 Now listening on: http://localhost:5033
INFO  11:14:08 Application started. Press Ctrl+C to shut down.
INFO  11:14:08 Hosting environment: Development
INFO  11:14:08 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
WARN  11:14:13 Failed to determine the https port for redirect.
INFO  11:14:14 Fetching all pending orders.
INFO  11:14:16 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:14:18 Executed DbCommand (96ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [o].[OrderDetailId], [o].[Cost], [o].[DeliveryStatus], [o].[MedicineId], [o].[OrderId], [o].[Quantity], [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [o0].[OrderId], [o0].[CustomerId], [o0].[Discount], [o0].[OrderDate], [o0].[PaidAmount], [o0].[ShipmentCost], [o0].[TotalAmount]
FROM [OrderDetails] AS [o]
INNER JOIN [Medicines] AS [m] ON [o].[MedicineId] = [m].[MedicineId]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[OrderId]
INFO  11:14:18 Fetched 1 pending orders.
INFO  11:14:36 Fetching medications for customer 2
INFO  11:14:36 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
WARN  11:14:37 Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
INFO  11:14:37 Executed DbCommand (108ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[OrderDate], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [t3].[CartId], [t3].[Cost], [t3].[CustomerId], [t3].[Date], [t3].[MedicineId], [t3].[Quantity], [t3].[TotalCost], [t3].[MedicineId0], [t3].[CategoryId], [t3].[CurrentQuantity], [t3].[FeedbackCount], [t3].[FeedbackSum], [t3].[MedicineName], [t3].[SellingPrice], [t3].[TotalNumberOfPurchase], [t4].[MedicationId], [t4].[CustomerId], [t4].[MedicationName], [t4].[MedicationItemId], [t4].[MedicationId0], [t4].[MedicineId], [t4].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[OrderDate], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN (
    SELECT [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [m1].[MedicineId] AS [MedicineId0], [m1].[CategoryId], [m1].[CurrentQuantity], [m1].[FeedbackCount], [m1].[FeedbackSum], [m1].[MedicineName], [m1].[SellingPrice], [m1].[TotalNumberOfPurchase]
    FROM [Carts] AS [c0]
    INNER JOIN [Medicines] AS [m1] ON [c0].[MedicineId] = [m1].[MedicineId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
LEFT JOIN (
    SELECT [m2].[MedicationId], [m2].[CustomerId], [m2].[MedicationName], [m3].[MedicationItemId], [m3].[MedicationId] AS [MedicationId0], [m3].[MedicineId], [m3].[Quantity]
    FROM [Medications] AS [m2]
    LEFT JOIN [MedicationItems] AS [m3] ON [m2].[MedicationId] = [m3].[MedicationId]
) AS [t4] ON [t].[CustomerId] = [t4].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [t3].[CartId], [t3].[MedicineId0], [t4].[MedicationId]
WARN  11:14:37 No medications found for customer 2
ERROR 11:14:37 Error fetching medications for customer 2
PharmacyManagementApi.CustomException.NoMedicationFoundException: Customer have no medication
   at PharmacyManagementApi.Services.ViewService.ViewMyMedications(Int32 customerId) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\ViewService.cs:line 93
INFO  11:14:52 Fetching medications for customer 5
INFO  11:14:52 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:14:52 Executed DbCommand (27ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[OrderDate], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [t3].[CartId], [t3].[Cost], [t3].[CustomerId], [t3].[Date], [t3].[MedicineId], [t3].[Quantity], [t3].[TotalCost], [t3].[MedicineId0], [t3].[CategoryId], [t3].[CurrentQuantity], [t3].[FeedbackCount], [t3].[FeedbackSum], [t3].[MedicineName], [t3].[SellingPrice], [t3].[TotalNumberOfPurchase], [t4].[MedicationId], [t4].[CustomerId], [t4].[MedicationName], [t4].[MedicationItemId], [t4].[MedicationId0], [t4].[MedicineId], [t4].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[OrderDate], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN (
    SELECT [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [m1].[MedicineId] AS [MedicineId0], [m1].[CategoryId], [m1].[CurrentQuantity], [m1].[FeedbackCount], [m1].[FeedbackSum], [m1].[MedicineName], [m1].[SellingPrice], [m1].[TotalNumberOfPurchase]
    FROM [Carts] AS [c0]
    INNER JOIN [Medicines] AS [m1] ON [c0].[MedicineId] = [m1].[MedicineId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
LEFT JOIN (
    SELECT [m2].[MedicationId], [m2].[CustomerId], [m2].[MedicationName], [m3].[MedicationItemId], [m3].[MedicationId] AS [MedicationId0], [m3].[MedicineId], [m3].[Quantity]
    FROM [Medications] AS [m2]
    LEFT JOIN [MedicationItems] AS [m3] ON [m2].[MedicationId] = [m3].[MedicationId]
) AS [t4] ON [t].[CustomerId] = [t4].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [t3].[CartId], [t3].[MedicineId0], [t4].[MedicationId]
WARN  11:14:52 No medications found for customer 5
ERROR 11:14:53 Error fetching medications for customer 5
PharmacyManagementApi.CustomException.NoMedicationFoundException: Customer have no medication
   at PharmacyManagementApi.Services.ViewService.ViewMyMedications(Int32 customerId) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\ViewService.cs:line 93
INFO  11:16:14 Adding medication for customer 2
INFO  11:16:14 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:16:14 Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Medications] ([CustomerId], [MedicationName])
VALUES (@p0, @p1);
SELECT [MedicationId]
FROM [Medications]
WHERE @@ROWCOUNT = 1 AND [MedicationId] = scope_identity();
INFO  11:16:14 Executed DbCommand (4ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:16:15 Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [MedicationItems] ([MedicationId], [MedicineId], [Quantity])
VALUES (@p0, @p1, @p2);
SELECT [MedicationItemId]
FROM [MedicationItems]
WHERE @@ROWCOUNT = 1 AND [MedicationItemId] = scope_identity();
INFO  11:16:15 Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:16:15 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [MedicationItems] ([MedicationId], [MedicineId], [Quantity])
VALUES (@p0, @p1, @p2);
SELECT [MedicationItemId]
FROM [MedicationItems]
WHERE @@ROWCOUNT = 1 AND [MedicationItemId] = scope_identity();
INFO  11:16:15 Medication 1 added successfully for customer 2
INFO  11:18:03 Updating medication 2 for customer 2
INFO  11:18:03 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:18:03 Executed DbCommand (39ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[OrderDate], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [t3].[CartId], [t3].[Cost], [t3].[CustomerId], [t3].[Date], [t3].[MedicineId], [t3].[Quantity], [t3].[TotalCost], [t3].[MedicineId0], [t3].[CategoryId], [t3].[CurrentQuantity], [t3].[FeedbackCount], [t3].[FeedbackSum], [t3].[MedicineName], [t3].[SellingPrice], [t3].[TotalNumberOfPurchase], [t4].[MedicationId], [t4].[CustomerId], [t4].[MedicationName], [t4].[MedicationItemId], [t4].[MedicationId0], [t4].[MedicineId], [t4].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[OrderDate], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN (
    SELECT [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [m1].[MedicineId] AS [MedicineId0], [m1].[CategoryId], [m1].[CurrentQuantity], [m1].[FeedbackCount], [m1].[FeedbackSum], [m1].[MedicineName], [m1].[SellingPrice], [m1].[TotalNumberOfPurchase]
    FROM [Carts] AS [c0]
    INNER JOIN [Medicines] AS [m1] ON [c0].[MedicineId] = [m1].[MedicineId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
LEFT JOIN (
    SELECT [m2].[MedicationId], [m2].[CustomerId], [m2].[MedicationName], [m3].[MedicationItemId], [m3].[MedicationId] AS [MedicationId0], [m3].[MedicineId], [m3].[Quantity]
    FROM [Medications] AS [m2]
    LEFT JOIN [MedicationItems] AS [m3] ON [m2].[MedicationId] = [m3].[MedicationId]
) AS [t4] ON [t].[CustomerId] = [t4].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [t3].[CartId], [t3].[MedicineId0], [t4].[MedicationId]
INFO  11:18:03 Executed DbCommand (5ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:18:03 Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicationId], [t].[CustomerId], [t].[MedicationName], [m0].[MedicationItemId], [m0].[MedicationId], [m0].[MedicineId], [m0].[Quantity]
FROM (
    SELECT TOP(2) [m].[MedicationId], [m].[CustomerId], [m].[MedicationName]
    FROM [Medications] AS [m]
    WHERE [m].[MedicationId] = @__key_0
) AS [t]
LEFT JOIN [MedicationItems] AS [m0] ON [t].[MedicationId] = [m0].[MedicationId]
ORDER BY [t].[MedicationId]
ERROR 11:18:03 Error updating medication 2 for customer 2
PharmacyManagementApi.CustomException.NoMedicationFoundException: No Medication found with given id 2
   at PharmacyManagementApi.Repositories.General_Repositories.MedicationRepository.Get(Int32 key) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Repositories\General_Repositories\MedicationRepository.cs:line 58
   at PharmacyManagementApi.Services.MedicationService.UpdateMedication(UpdateMedication updateMedication) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicationService.cs:line 112
INFO  11:18:11 Updating medication 1 for customer 2
INFO  11:18:11 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:18:11 Executed DbCommand (28ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[OrderDate], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [t3].[CartId], [t3].[Cost], [t3].[CustomerId], [t3].[Date], [t3].[MedicineId], [t3].[Quantity], [t3].[TotalCost], [t3].[MedicineId0], [t3].[CategoryId], [t3].[CurrentQuantity], [t3].[FeedbackCount], [t3].[FeedbackSum], [t3].[MedicineName], [t3].[SellingPrice], [t3].[TotalNumberOfPurchase], [t4].[MedicationId], [t4].[CustomerId], [t4].[MedicationName], [t4].[MedicationItemId], [t4].[MedicationId0], [t4].[MedicineId], [t4].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[OrderDate], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN (
    SELECT [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [m1].[MedicineId] AS [MedicineId0], [m1].[CategoryId], [m1].[CurrentQuantity], [m1].[FeedbackCount], [m1].[FeedbackSum], [m1].[MedicineName], [m1].[SellingPrice], [m1].[TotalNumberOfPurchase]
    FROM [Carts] AS [c0]
    INNER JOIN [Medicines] AS [m1] ON [c0].[MedicineId] = [m1].[MedicineId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
LEFT JOIN (
    SELECT [m2].[MedicationId], [m2].[CustomerId], [m2].[MedicationName], [m3].[MedicationItemId], [m3].[MedicationId] AS [MedicationId0], [m3].[MedicineId], [m3].[Quantity]
    FROM [Medications] AS [m2]
    LEFT JOIN [MedicationItems] AS [m3] ON [m2].[MedicationId] = [m3].[MedicationId]
) AS [t4] ON [t].[CustomerId] = [t4].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [t3].[CartId], [t3].[MedicineId0], [t4].[MedicationId]
INFO  11:18:11 Executed DbCommand (5ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:18:11 Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicationId], [t].[CustomerId], [t].[MedicationName], [m0].[MedicationItemId], [m0].[MedicationId], [m0].[MedicineId], [m0].[Quantity]
FROM (
    SELECT TOP(2) [m].[MedicationId], [m].[CustomerId], [m].[MedicationName]
    FROM [Medications] AS [m]
    WHERE [m].[MedicationId] = @__key_0
) AS [t]
LEFT JOIN [MedicationItems] AS [m0] ON [t].[MedicationId] = [m0].[MedicationId]
ORDER BY [t].[MedicationId]
INFO  11:18:11 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [m].[MedicationItemId], [m].[MedicationId], [m].[MedicineId], [m].[Quantity]
FROM [MedicationItems] AS [m]
WHERE [m].[MedicationItemId] = @__key_0
INFO  11:18:11 Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [MedicationItems] SET [Quantity] = @p0
WHERE [MedicationItemId] = @p1;
SELECT @@ROWCOUNT;
INFO  11:18:11 Medication 1 updated successfully for customer 2
INFO  11:18:20 Updating medication 1 for customer 2
INFO  11:18:20 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:18:20 Executed DbCommand (31ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[OrderDate], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [t3].[CartId], [t3].[Cost], [t3].[CustomerId], [t3].[Date], [t3].[MedicineId], [t3].[Quantity], [t3].[TotalCost], [t3].[MedicineId0], [t3].[CategoryId], [t3].[CurrentQuantity], [t3].[FeedbackCount], [t3].[FeedbackSum], [t3].[MedicineName], [t3].[SellingPrice], [t3].[TotalNumberOfPurchase], [t4].[MedicationId], [t4].[CustomerId], [t4].[MedicationName], [t4].[MedicationItemId], [t4].[MedicationId0], [t4].[MedicineId], [t4].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[OrderDate], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN (
    SELECT [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [m1].[MedicineId] AS [MedicineId0], [m1].[CategoryId], [m1].[CurrentQuantity], [m1].[FeedbackCount], [m1].[FeedbackSum], [m1].[MedicineName], [m1].[SellingPrice], [m1].[TotalNumberOfPurchase]
    FROM [Carts] AS [c0]
    INNER JOIN [Medicines] AS [m1] ON [c0].[MedicineId] = [m1].[MedicineId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
LEFT JOIN (
    SELECT [m2].[MedicationId], [m2].[CustomerId], [m2].[MedicationName], [m3].[MedicationItemId], [m3].[MedicationId] AS [MedicationId0], [m3].[MedicineId], [m3].[Quantity]
    FROM [Medications] AS [m2]
    LEFT JOIN [MedicationItems] AS [m3] ON [m2].[MedicationId] = [m3].[MedicationId]
) AS [t4] ON [t].[CustomerId] = [t4].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [t3].[CartId], [t3].[MedicineId0], [t4].[MedicationId]
INFO  11:18:20 Executed DbCommand (5ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:18:20 Executed DbCommand (4ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicationId], [t].[CustomerId], [t].[MedicationName], [m0].[MedicationItemId], [m0].[MedicationId], [m0].[MedicineId], [m0].[Quantity]
FROM (
    SELECT TOP(2) [m].[MedicationId], [m].[CustomerId], [m].[MedicationName]
    FROM [Medications] AS [m]
    WHERE [m].[MedicationId] = @__key_0
) AS [t]
LEFT JOIN [MedicationItems] AS [m0] ON [t].[MedicationId] = [m0].[MedicationId]
ORDER BY [t].[MedicationId]
INFO  11:18:20 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [m].[MedicationItemId], [m].[MedicationId], [m].[MedicineId], [m].[Quantity]
FROM [MedicationItems] AS [m]
WHERE [m].[MedicationItemId] = @__key_0
INFO  11:18:20 Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [MedicationItems] SET [Quantity] = @p0
WHERE [MedicationItemId] = @p1;
SELECT @@ROWCOUNT;
INFO  11:18:20 Medication 1 updated successfully for customer 2
INFO  11:18:31 Updating medication 1 for customer 2
INFO  11:18:31 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:18:31 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[OrderDate], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [t3].[CartId], [t3].[Cost], [t3].[CustomerId], [t3].[Date], [t3].[MedicineId], [t3].[Quantity], [t3].[TotalCost], [t3].[MedicineId0], [t3].[CategoryId], [t3].[CurrentQuantity], [t3].[FeedbackCount], [t3].[FeedbackSum], [t3].[MedicineName], [t3].[SellingPrice], [t3].[TotalNumberOfPurchase], [t4].[MedicationId], [t4].[CustomerId], [t4].[MedicationName], [t4].[MedicationItemId], [t4].[MedicationId0], [t4].[MedicineId], [t4].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[OrderDate], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN (
    SELECT [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [m1].[MedicineId] AS [MedicineId0], [m1].[CategoryId], [m1].[CurrentQuantity], [m1].[FeedbackCount], [m1].[FeedbackSum], [m1].[MedicineName], [m1].[SellingPrice], [m1].[TotalNumberOfPurchase]
    FROM [Carts] AS [c0]
    INNER JOIN [Medicines] AS [m1] ON [c0].[MedicineId] = [m1].[MedicineId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
LEFT JOIN (
    SELECT [m2].[MedicationId], [m2].[CustomerId], [m2].[MedicationName], [m3].[MedicationItemId], [m3].[MedicationId] AS [MedicationId0], [m3].[MedicineId], [m3].[Quantity]
    FROM [Medications] AS [m2]
    LEFT JOIN [MedicationItems] AS [m3] ON [m2].[MedicationId] = [m3].[MedicationId]
) AS [t4] ON [t].[CustomerId] = [t4].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [t3].[CartId], [t3].[MedicineId0], [t4].[MedicationId]
INFO  11:18:31 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:18:31 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicationId], [t].[CustomerId], [t].[MedicationName], [m0].[MedicationItemId], [m0].[MedicationId], [m0].[MedicineId], [m0].[Quantity]
FROM (
    SELECT TOP(2) [m].[MedicationId], [m].[CustomerId], [m].[MedicationName]
    FROM [Medications] AS [m]
    WHERE [m].[MedicationId] = @__key_0
) AS [t]
LEFT JOIN [MedicationItems] AS [m0] ON [t].[MedicationId] = [m0].[MedicationId]
ORDER BY [t].[MedicationId]
INFO  11:18:31 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [m].[MedicationItemId], [m].[MedicationId], [m].[MedicineId], [m].[Quantity]
FROM [MedicationItems] AS [m]
WHERE [m].[MedicationItemId] = @__key_0
INFO  11:18:31 Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [MedicationItems] SET [Quantity] = @p0
WHERE [MedicationItemId] = @p1;
SELECT @@ROWCOUNT;
INFO  11:18:31 Medication 1 updated successfully for customer 2
INFO  11:18:37 Updating medication 1 for customer 2
INFO  11:18:37 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:18:37 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[OrderDate], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [t3].[CartId], [t3].[Cost], [t3].[CustomerId], [t3].[Date], [t3].[MedicineId], [t3].[Quantity], [t3].[TotalCost], [t3].[MedicineId0], [t3].[CategoryId], [t3].[CurrentQuantity], [t3].[FeedbackCount], [t3].[FeedbackSum], [t3].[MedicineName], [t3].[SellingPrice], [t3].[TotalNumberOfPurchase], [t4].[MedicationId], [t4].[CustomerId], [t4].[MedicationName], [t4].[MedicationItemId], [t4].[MedicationId0], [t4].[MedicineId], [t4].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[OrderDate], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN (
    SELECT [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [m1].[MedicineId] AS [MedicineId0], [m1].[CategoryId], [m1].[CurrentQuantity], [m1].[FeedbackCount], [m1].[FeedbackSum], [m1].[MedicineName], [m1].[SellingPrice], [m1].[TotalNumberOfPurchase]
    FROM [Carts] AS [c0]
    INNER JOIN [Medicines] AS [m1] ON [c0].[MedicineId] = [m1].[MedicineId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
LEFT JOIN (
    SELECT [m2].[MedicationId], [m2].[CustomerId], [m2].[MedicationName], [m3].[MedicationItemId], [m3].[MedicationId] AS [MedicationId0], [m3].[MedicineId], [m3].[Quantity]
    FROM [Medications] AS [m2]
    LEFT JOIN [MedicationItems] AS [m3] ON [m2].[MedicationId] = [m3].[MedicationId]
) AS [t4] ON [t].[CustomerId] = [t4].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [t3].[CartId], [t3].[MedicineId0], [t4].[MedicationId]
INFO  11:18:37 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:18:37 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicationId], [t].[CustomerId], [t].[MedicationName], [m0].[MedicationItemId], [m0].[MedicationId], [m0].[MedicineId], [m0].[Quantity]
FROM (
    SELECT TOP(2) [m].[MedicationId], [m].[CustomerId], [m].[MedicationName]
    FROM [Medications] AS [m]
    WHERE [m].[MedicationId] = @__key_0
) AS [t]
LEFT JOIN [MedicationItems] AS [m0] ON [t].[MedicationId] = [m0].[MedicationId]
ORDER BY [t].[MedicationId]
WARN  11:18:37 The expected quantity 110 is not available in the medication 1
ERROR 11:18:38 Error updating medication 1 for customer 2
PharmacyManagementApi.CustomException.NegativeValueException: The expected quantity is not available in the medication
   at PharmacyManagementApi.Services.MedicationService.UpdateMedication(UpdateMedication updateMedication) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicationService.cs:line 141
INFO  11:19:02 Updating medication 3 for customer 2
INFO  11:19:02 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:19:02 Executed DbCommand (30ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[OrderDate], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [t3].[CartId], [t3].[Cost], [t3].[CustomerId], [t3].[Date], [t3].[MedicineId], [t3].[Quantity], [t3].[TotalCost], [t3].[MedicineId0], [t3].[CategoryId], [t3].[CurrentQuantity], [t3].[FeedbackCount], [t3].[FeedbackSum], [t3].[MedicineName], [t3].[SellingPrice], [t3].[TotalNumberOfPurchase], [t4].[MedicationId], [t4].[CustomerId], [t4].[MedicationName], [t4].[MedicationItemId], [t4].[MedicationId0], [t4].[MedicineId], [t4].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[OrderDate], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN (
    SELECT [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [m1].[MedicineId] AS [MedicineId0], [m1].[CategoryId], [m1].[CurrentQuantity], [m1].[FeedbackCount], [m1].[FeedbackSum], [m1].[MedicineName], [m1].[SellingPrice], [m1].[TotalNumberOfPurchase]
    FROM [Carts] AS [c0]
    INNER JOIN [Medicines] AS [m1] ON [c0].[MedicineId] = [m1].[MedicineId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
LEFT JOIN (
    SELECT [m2].[MedicationId], [m2].[CustomerId], [m2].[MedicationName], [m3].[MedicationItemId], [m3].[MedicationId] AS [MedicationId0], [m3].[MedicineId], [m3].[Quantity]
    FROM [Medications] AS [m2]
    LEFT JOIN [MedicationItems] AS [m3] ON [m2].[MedicationId] = [m3].[MedicationId]
) AS [t4] ON [t].[CustomerId] = [t4].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [t3].[CartId], [t3].[MedicineId0], [t4].[MedicationId]
INFO  11:19:02 Executed DbCommand (5ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:19:02 Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicationId], [t].[CustomerId], [t].[MedicationName], [m0].[MedicationItemId], [m0].[MedicationId], [m0].[MedicineId], [m0].[Quantity]
FROM (
    SELECT TOP(2) [m].[MedicationId], [m].[CustomerId], [m].[MedicationName]
    FROM [Medications] AS [m]
    WHERE [m].[MedicationId] = @__key_0
) AS [t]
LEFT JOIN [MedicationItems] AS [m0] ON [t].[MedicationId] = [m0].[MedicationId]
ORDER BY [t].[MedicationId]
ERROR 11:19:03 Error updating medication 3 for customer 2
PharmacyManagementApi.CustomException.NoMedicationFoundException: No Medication found with given id 3
   at PharmacyManagementApi.Repositories.General_Repositories.MedicationRepository.Get(Int32 key) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Repositories\General_Repositories\MedicationRepository.cs:line 58
   at PharmacyManagementApi.Services.MedicationService.UpdateMedication(UpdateMedication updateMedication) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicationService.cs:line 112
INFO  11:19:19 Updating medication 1 for customer 2
INFO  11:19:19 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:19:19 Executed DbCommand (28ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[OrderDate], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [t3].[CartId], [t3].[Cost], [t3].[CustomerId], [t3].[Date], [t3].[MedicineId], [t3].[Quantity], [t3].[TotalCost], [t3].[MedicineId0], [t3].[CategoryId], [t3].[CurrentQuantity], [t3].[FeedbackCount], [t3].[FeedbackSum], [t3].[MedicineName], [t3].[SellingPrice], [t3].[TotalNumberOfPurchase], [t4].[MedicationId], [t4].[CustomerId], [t4].[MedicationName], [t4].[MedicationItemId], [t4].[MedicationId0], [t4].[MedicineId], [t4].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[OrderDate], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN (
    SELECT [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [m1].[MedicineId] AS [MedicineId0], [m1].[CategoryId], [m1].[CurrentQuantity], [m1].[FeedbackCount], [m1].[FeedbackSum], [m1].[MedicineName], [m1].[SellingPrice], [m1].[TotalNumberOfPurchase]
    FROM [Carts] AS [c0]
    INNER JOIN [Medicines] AS [m1] ON [c0].[MedicineId] = [m1].[MedicineId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
LEFT JOIN (
    SELECT [m2].[MedicationId], [m2].[CustomerId], [m2].[MedicationName], [m3].[MedicationItemId], [m3].[MedicationId] AS [MedicationId0], [m3].[MedicineId], [m3].[Quantity]
    FROM [Medications] AS [m2]
    LEFT JOIN [MedicationItems] AS [m3] ON [m2].[MedicationId] = [m3].[MedicationId]
) AS [t4] ON [t].[CustomerId] = [t4].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [t3].[CartId], [t3].[MedicineId0], [t4].[MedicationId]
INFO  11:19:19 Executed DbCommand (5ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  11:19:19 Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicationId], [t].[CustomerId], [t].[MedicationName], [m0].[MedicationItemId], [m0].[MedicationId], [m0].[MedicineId], [m0].[Quantity]
FROM (
    SELECT TOP(2) [m].[MedicationId], [m].[CustomerId], [m].[MedicationName]
    FROM [Medications] AS [m]
    WHERE [m].[MedicationId] = @__key_0
) AS [t]
LEFT JOIN [MedicationItems] AS [m0] ON [t].[MedicationId] = [m0].[MedicationId]
ORDER BY [t].[MedicationId]
INFO  11:19:19 Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [MedicationItems] ([MedicationId], [MedicineId], [Quantity])
VALUES (@p0, @p1, @p2);
SELECT [MedicationItemId]
FROM [MedicationItems]
WHERE @@ROWCOUNT = 1 AND [MedicationItemId] = scope_identity();
INFO  11:19:19 Medication 1 updated successfully for customer 2
INFO  11:20:12 Fetching medications for customer 2
INFO  11:20:12 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:20:12 Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[OrderDate], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [t3].[CartId], [t3].[Cost], [t3].[CustomerId], [t3].[Date], [t3].[MedicineId], [t3].[Quantity], [t3].[TotalCost], [t3].[MedicineId0], [t3].[CategoryId], [t3].[CurrentQuantity], [t3].[FeedbackCount], [t3].[FeedbackSum], [t3].[MedicineName], [t3].[SellingPrice], [t3].[TotalNumberOfPurchase], [t4].[MedicationId], [t4].[CustomerId], [t4].[MedicationName], [t4].[MedicationItemId], [t4].[MedicationId0], [t4].[MedicineId], [t4].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[OrderDate], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN (
    SELECT [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [m1].[MedicineId] AS [MedicineId0], [m1].[CategoryId], [m1].[CurrentQuantity], [m1].[FeedbackCount], [m1].[FeedbackSum], [m1].[MedicineName], [m1].[SellingPrice], [m1].[TotalNumberOfPurchase]
    FROM [Carts] AS [c0]
    INNER JOIN [Medicines] AS [m1] ON [c0].[MedicineId] = [m1].[MedicineId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
LEFT JOIN (
    SELECT [m2].[MedicationId], [m2].[CustomerId], [m2].[MedicationName], [m3].[MedicationItemId], [m3].[MedicationId] AS [MedicationId0], [m3].[MedicineId], [m3].[Quantity]
    FROM [Medications] AS [m2]
    LEFT JOIN [MedicationItems] AS [m3] ON [m2].[MedicationId] = [m3].[MedicationId]
) AS [t4] ON [t].[CustomerId] = [t4].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [t3].[CartId], [t3].[MedicineId0], [t4].[MedicationId]
INFO  11:20:12 1 medications found for customer 2
INFO  11:20:39 Performing medication checkout for customer 1 and medication 1
INFO  11:20:39 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:20:39 Executed DbCommand (4ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicationId], [t].[CustomerId], [t].[MedicationName], [m0].[MedicationItemId], [m0].[MedicationId], [m0].[MedicineId], [m0].[Quantity]
FROM (
    SELECT TOP(2) [m].[MedicationId], [m].[CustomerId], [m].[MedicationName]
    FROM [Medications] AS [m]
    WHERE [m].[MedicationId] = @__key_0
) AS [t]
LEFT JOIN [MedicationItems] AS [m0] ON [t].[MedicationId] = [m0].[MedicationId]
ORDER BY [t].[MedicationId]
ERROR 11:20:39 Error during medication checkout for customer 1 and medication 1
PharmacyManagementApi.CustomException.NoMedicationFoundException: The customer has no such medication
   at PharmacyManagementApi.Services.MedicationService.BuyMedication(Int32 userId, Int32 medicationId) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicationService.cs:line 186
INFO  11:20:56 Performing medication checkout for customer 2 and medication 1
INFO  11:20:56 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  11:20:56 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicationId], [t].[CustomerId], [t].[MedicationName], [m0].[MedicationItemId], [m0].[MedicationId], [m0].[MedicineId], [m0].[Quantity]
FROM (
    SELECT TOP(2) [m].[MedicationId], [m].[CustomerId], [m].[MedicationName]
    FROM [Medications] AS [m]
    WHERE [m].[MedicationId] = @__key_0
) AS [t]
LEFT JOIN [MedicationItems] AS [m0] ON [t].[MedicationId] = [m0].[MedicationId]
ORDER BY [t].[MedicationId]
INFO  11:20:56 Executed DbCommand (31ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[CustomerId], [t].[Address], [t].[Email], [t].[IsSubcribed], [t].[Name], [t].[Phone], [t].[Role], [t1].[OrderId], [t1].[CustomerId], [t1].[Discount], [t1].[OrderDate], [t1].[PaidAmount], [t1].[ShipmentCost], [t1].[TotalAmount], [t1].[OrderDetailId], [t1].[Cost], [t1].[DeliveryStatus], [t1].[MedicineId], [t1].[OrderId0], [t1].[Quantity], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[CustomerId0], [t1].[DeliveryDate], [t1].[ExpiryDate], [t1].[MedicineId1], [t1].[OrderDetailId0], [t1].[Quantity0], [t1].[MedicineId00], [t1].[CategoryId], [t1].[CurrentQuantity], [t1].[FeedbackCount], [t1].[FeedbackSum], [t1].[MedicineName], [t1].[SellingPrice], [t1].[TotalNumberOfPurchase], [t1].[CategoryId0], [t1].[CurrentQuantity0], [t1].[FeedbackCount0], [t1].[FeedbackSum0], [t1].[MedicineName0], [t1].[SellingPrice0], [t1].[TotalNumberOfPurchase0], [t3].[CartId], [t3].[Cost], [t3].[CustomerId], [t3].[Date], [t3].[MedicineId], [t3].[Quantity], [t3].[TotalCost], [t3].[MedicineId0], [t3].[CategoryId], [t3].[CurrentQuantity], [t3].[FeedbackCount], [t3].[FeedbackSum], [t3].[MedicineName], [t3].[SellingPrice], [t3].[TotalNumberOfPurchase], [t4].[MedicationId], [t4].[CustomerId], [t4].[MedicationName], [t4].[MedicationItemId], [t4].[MedicationId0], [t4].[MedicineId], [t4].[Quantity]
FROM (
    SELECT TOP(2) [c].[CustomerId], [c].[Address], [c].[Email], [c].[IsSubcribed], [c].[Name], [c].[Phone], [c].[Role]
    FROM [Customers] AS [c]
    WHERE [c].[CustomerId] = @__key_0
) AS [t]
LEFT JOIN (
    SELECT [o].[OrderId], [o].[CustomerId], [o].[Discount], [o].[OrderDate], [o].[PaidAmount], [o].[ShipmentCost], [o].[TotalAmount], [t0].[OrderDetailId], [t0].[Cost], [t0].[DeliveryStatus], [t0].[MedicineId], [t0].[OrderId] AS [OrderId0], [t0].[Quantity], [t0].[MedicineId0], [t0].[DeliveryId], [t0].[CustomerId] AS [CustomerId0], [t0].[DeliveryDate], [t0].[ExpiryDate], [t0].[MedicineId1], [t0].[OrderDetailId0], [t0].[Quantity0], [t0].[MedicineId00], [t0].[CategoryId], [t0].[CurrentQuantity], [t0].[FeedbackCount], [t0].[FeedbackSum], [t0].[MedicineName], [t0].[SellingPrice], [t0].[TotalNumberOfPurchase], [t0].[CategoryId0], [t0].[CurrentQuantity0], [t0].[FeedbackCount0], [t0].[FeedbackSum0], [t0].[MedicineName0], [t0].[SellingPrice0], [t0].[TotalNumberOfPurchase0]
    FROM [Orders] AS [o]
    LEFT JOIN (
        SELECT [o0].[OrderDetailId], [o0].[Cost], [o0].[DeliveryStatus], [o0].[MedicineId], [o0].[OrderId], [o0].[Quantity], [m].[MedicineId] AS [MedicineId0], [t2].[DeliveryId], [t2].[CustomerId], [t2].[DeliveryDate], [t2].[ExpiryDate], [t2].[MedicineId] AS [MedicineId1], [t2].[OrderDetailId] AS [OrderDetailId0], [t2].[Quantity] AS [Quantity0], [t2].[MedicineId0] AS [MedicineId00], [t2].[CategoryId], [t2].[CurrentQuantity], [t2].[FeedbackCount], [t2].[FeedbackSum], [t2].[MedicineName], [t2].[SellingPrice], [t2].[TotalNumberOfPurchase], [m].[CategoryId] AS [CategoryId0], [m].[CurrentQuantity] AS [CurrentQuantity0], [m].[FeedbackCount] AS [FeedbackCount0], [m].[FeedbackSum] AS [FeedbackSum0], [m].[MedicineName] AS [MedicineName0], [m].[SellingPrice] AS [SellingPrice0], [m].[TotalNumberOfPurchase] AS [TotalNumberOfPurchase0]
        FROM [OrderDetails] AS [o0]
        INNER JOIN [Medicines] AS [m] ON [o0].[MedicineId] = [m].[MedicineId]
        LEFT JOIN (
            SELECT [d].[DeliveryId], [d].[CustomerId], [d].[DeliveryDate], [d].[ExpiryDate], [d].[MedicineId], [d].[OrderDetailId], [d].[Quantity], [m0].[MedicineId] AS [MedicineId0], [m0].[CategoryId], [m0].[CurrentQuantity], [m0].[FeedbackCount], [m0].[FeedbackSum], [m0].[MedicineName], [m0].[SellingPrice], [m0].[TotalNumberOfPurchase]
            FROM [DeliveryDetails] AS [d]
            INNER JOIN [Medicines] AS [m0] ON [d].[MedicineId] = [m0].[MedicineId]
        ) AS [t2] ON [o0].[OrderDetailId] = [t2].[OrderDetailId]
    ) AS [t0] ON [o].[OrderId] = [t0].[OrderId]
) AS [t1] ON [t].[CustomerId] = [t1].[CustomerId]
LEFT JOIN (
    SELECT [c0].[CartId], [c0].[Cost], [c0].[CustomerId], [c0].[Date], [c0].[MedicineId], [c0].[Quantity], [c0].[TotalCost], [m1].[MedicineId] AS [MedicineId0], [m1].[CategoryId], [m1].[CurrentQuantity], [m1].[FeedbackCount], [m1].[FeedbackSum], [m1].[MedicineName], [m1].[SellingPrice], [m1].[TotalNumberOfPurchase]
    FROM [Carts] AS [c0]
    INNER JOIN [Medicines] AS [m1] ON [c0].[MedicineId] = [m1].[MedicineId]
) AS [t3] ON [t].[CustomerId] = [t3].[CustomerId]
LEFT JOIN (
    SELECT [m2].[MedicationId], [m2].[CustomerId], [m2].[MedicationName], [m3].[MedicationItemId], [m3].[MedicationId] AS [MedicationId0], [m3].[MedicineId], [m3].[Quantity]
    FROM [Medications] AS [m2]
    LEFT JOIN [MedicationItems] AS [m3] ON [m2].[MedicationId] = [m3].[MedicationId]
) AS [t4] ON [t].[CustomerId] = [t4].[CustomerId]
ORDER BY [t].[CustomerId], [t1].[OrderId], [t1].[OrderDetailId], [t1].[MedicineId0], [t1].[DeliveryId], [t1].[MedicineId00], [t3].[CartId], [t3].[MedicineId0], [t4].[MedicationId]
INFO  11:20:56 Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Single), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Double), @p4='?' (DbType = Double), @p5='?' (DbType = Double)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([CustomerId], [Discount], [OrderDate], [PaidAmount], [ShipmentCost], [TotalAmount])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [OrderId]
FROM [Orders]
WHERE @@ROWCOUNT = 1 AND [OrderId] = scope_identity();
INFO  11:20:56 Executed DbCommand (4ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
WARN  11:20:56 Expected quantity 3 is not available in stock for medicine 2
ERROR 11:20:57 Error during medication checkout for customer 2 and medication 1
PharmacyManagementApi.CustomException.OutOfStockException: Expected Quantity is not available at the moment for 2
   at PharmacyManagementApi.Services.MedicationService.BuyMedication(Int32 userId, Int32 medicationId) in C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\Services\MedicationService.cs:line 212
INFO  12:55:41 Now listening on: http://localhost:5033
INFO  12:55:41 Application started. Press Ctrl+C to shut down.
INFO  12:55:41 Hosting environment: Development
INFO  12:55:41 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
WARN  12:56:15 Failed to determine the https port for redirect.
INFO  12:56:16 Getting feedback details for medicine 1
INFO  12:56:18 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  12:56:20 Executed DbCommand (160ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  12:56:20 Feedback details retrieved successfully for medicine 1
INFO  12:56:43 Fetching all product details
INFO  12:56:43 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  12:56:43 Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [c].[CategoryName]
FROM [Medicines] AS [m]
INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
LEFT JOIN [Feedbacks] AS [f] ON [m].[MedicineId] = [f].[MedicineId]
ORDER BY [m].[MedicineId], [c].[CategoryId]
INFO  12:56:43 Product details fetched successfully
INFO  12:57:18 Getting feedback details for medicine 5
INFO  12:57:18 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  12:57:18 Executed DbCommand (6ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[MedicineId], [t].[CategoryId], [t].[CurrentQuantity], [t].[FeedbackCount], [t].[FeedbackSum], [t].[MedicineName], [t].[SellingPrice], [t].[TotalNumberOfPurchase], [t].[CategoryId0], [f].[FeedbackId], [f].[CustomerId], [f].[FeedbackMessage], [f].[MedicineId], [f].[Rating], [t].[CategoryName]
FROM (
    SELECT TOP(2) [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase], [c].[CategoryId] AS [CategoryId0], [c].[CategoryName]
    FROM [Medicines] AS [m]
    INNER JOIN [Categories] AS [c] ON [m].[CategoryId] = [c].[CategoryId]
    WHERE [m].[MedicineId] = @__key_0
) AS [t]
LEFT JOIN [Feedbacks] AS [f] ON [t].[MedicineId] = [f].[MedicineId]
ORDER BY [t].[MedicineId], [t].[CategoryId0]
INFO  12:57:18 Feedback details retrieved successfully for medicine 5
INFO  05:11:59 Now listening on: http://localhost:5033
INFO  05:11:59 Application started. Press Ctrl+C to shut down.
INFO  05:11:59 Hosting environment: Development
INFO  05:11:59 Content root path: C:\Users\VC\Documents\Pharmacy Manager\PharmacyManagementSolution\PharmacyManagementApi\
WARN  05:21:25 Failed to determine the https port for redirect.
INFO  05:21:27 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  05:21:28 Executed DbCommand (65ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[PurchaseDetailId], [p].[Amount], [p].[DosageForm], [p].[ExpiryDate], [p].[MedicineId], [p].[PurchaseId], [p].[Quantity], [p].[StorageRequirement], [p].[TotalSum], [p].[VendorId], [p0].[PurchaseId], [p0].[PurchaseDate], [p0].[TotalAmount], [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase]
FROM [PurchaseDetails] AS [p]
INNER JOIN [Purchases] AS [p0] ON [p].[PurchaseId] = [p0].[PurchaseId]
INNER JOIN [Medicines] AS [m] ON [p].[MedicineId] = [m].[MedicineId]
INFO  05:21:49 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  05:21:49 Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[PurchaseDetailId], [p].[Amount], [p].[DosageForm], [p].[ExpiryDate], [p].[MedicineId], [p].[PurchaseId], [p].[Quantity], [p].[StorageRequirement], [p].[TotalSum], [p].[VendorId], [p0].[PurchaseId], [p0].[PurchaseDate], [p0].[TotalAmount], [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase]
FROM [PurchaseDetails] AS [p]
INNER JOIN [Purchases] AS [p0] ON [p].[PurchaseId] = [p0].[PurchaseId]
INNER JOIN [Medicines] AS [m] ON [p].[MedicineId] = [m].[MedicineId]
INFO  05:23:05 Entity Framework Core 6.0.30 initialized 'PharmacyContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  05:23:05 Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[PurchaseDetailId], [p].[Amount], [p].[DosageForm], [p].[ExpiryDate], [p].[MedicineId], [p].[PurchaseId], [p].[Quantity], [p].[StorageRequirement], [p].[TotalSum], [p].[VendorId], [p0].[PurchaseId], [p0].[PurchaseDate], [p0].[TotalAmount], [m].[MedicineId], [m].[CategoryId], [m].[CurrentQuantity], [m].[FeedbackCount], [m].[FeedbackSum], [m].[MedicineName], [m].[SellingPrice], [m].[TotalNumberOfPurchase]
FROM [PurchaseDetails] AS [p]
INNER JOIN [Purchases] AS [p0] ON [p].[PurchaseId] = [p0].[PurchaseId]
INNER JOIN [Medicines] AS [m] ON [p].[MedicineId] = [m].[MedicineId]
INFO  05:25:15 Sending request to OpenAI API...
INFO  05:25:15 Start processing HTTP request POST https://api.openai.com/v1/chat/completions
INFO  05:25:15 Sending HTTP request POST https://api.openai.com/v1/chat/completions
INFO  05:25:17 Received HTTP response headers after 2648.0315ms - 200
INFO  05:25:17 End processing HTTP request after 2676.3026ms - 200
INFO  05:25:17 Received response from OpenAI API.
